<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Docker è¡¥æ•‘æŒ‡å— - harry&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿé˜¿é‡Œäº‘ä¸»é¡µæœç´¢ å®¹å™¨é•œåƒæœåŠ¡ï¼Œè¿›å…¥ã€Œé•œåƒä»“åº“ç®¡ç†æ§åˆ¶å°ã€ï¼Œæ ¹æ®è¯´æ˜æ–‡æ¡£æ“ä½œå³å¯ã€‚ å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š 1docker version æŸ¥çœ‹dockerå®‰è£…ä¿¡æ¯ï¼š 1docker info æŸ¥çœ‹å‘½ä»¤è¯´æ˜ï¼š 1docker --help">
<meta name="keywords" content="docker,å¾®æœåŠ¡">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker è¡¥æ•‘æŒ‡å—">
<meta property="og:url" content="http://yoursite.com/2019/05/11/Dockerè¡¥æ•‘æŒ‡å—/index.html">
<meta property="og:site_name" content="harry&#39;s blog">
<meta property="og:description" content="é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿé˜¿é‡Œäº‘ä¸»é¡µæœç´¢ å®¹å™¨é•œåƒæœåŠ¡ï¼Œè¿›å…¥ã€Œé•œåƒä»“åº“ç®¡ç†æ§åˆ¶å°ã€ï¼Œæ ¹æ®è¯´æ˜æ–‡æ¡£æ“ä½œå³å¯ã€‚ å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š 1docker version æŸ¥çœ‹dockerå®‰è£…ä¿¡æ¯ï¼š 1docker info æŸ¥çœ‹å‘½ä»¤è¯´æ˜ï¼š 1docker --help">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://img.yuzh.xyz/docker-note/wallhaven-263173.jpg">
<meta property="og:updated_time" content="2019-05-11T15:13:55.361Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker è¡¥æ•‘æŒ‡å—">
<meta name="twitter:description" content="é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿé˜¿é‡Œäº‘ä¸»é¡µæœç´¢ å®¹å™¨é•œåƒæœåŠ¡ï¼Œè¿›å…¥ã€Œé•œåƒä»“åº“ç®¡ç†æ§åˆ¶å°ã€ï¼Œæ ¹æ®è¯´æ˜æ–‡æ¡£æ“ä½œå³å¯ã€‚ å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š 1docker version æŸ¥çœ‹dockerå®‰è£…ä¿¡æ¯ï¼š 1docker info æŸ¥çœ‹å‘½ä»¤è¯´æ˜ï¼š 1docker --help">
<meta name="twitter:image" content="http://img.yuzh.xyz/docker-note/wallhaven-263173.jpg">







<link rel="icon" href="/images/star.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/star.png" alt="Docker è¡¥æ•‘æŒ‡å—" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/yuzh233">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="http://img.yuzh.xyz/docker-note/wallhaven-263173.jpg" alt="Docker è¡¥æ•‘æŒ‡å—">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-05-10T16:00:00.000Z">2019-05-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/docker/">docker</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    an hour read (About 11922 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Docker è¡¥æ•‘æŒ‡å—
            
        </h1>
        <div class="content">
            <h1 id="é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"><a href="#é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ" class="headerlink" title="é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"></a>é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</h1><p>é˜¿é‡Œäº‘ä¸»é¡µæœç´¢ <a href="https://help.aliyun.com/product/60716.html?spm=a2c4g.11186623.6.540.10823864peBl6O" target="_blank" rel="noopener">å®¹å™¨é•œåƒæœåŠ¡</a>ï¼Œè¿›å…¥<a href="https://cr.console.aliyun.com/cn-shanghai/instances/mirrors" target="_blank" rel="noopener">ã€Œé•œåƒä»“åº“ç®¡ç†æ§åˆ¶å°ã€</a>ï¼Œæ ¹æ®è¯´æ˜æ–‡æ¡£æ“ä½œå³å¯ã€‚</p>
<h1 id="å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤"><a href="#å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤" class="headerlink" title="å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤"></a>å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤</h1><p>æŸ¥çœ‹ç‰ˆæœ¬ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹dockerå®‰è£…ä¿¡æ¯ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å‘½ä»¤è¯´æ˜ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --<span class="hljs-built_in">help</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>ä½¿ç”¨æ–¹å¼ï¼š<code>docker COMMAND --help</code> å¦‚ï¼š<code>docker logs --help</code></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Usage:	docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow <span class="hljs-built_in">log</span> output</span><br><span class="line">      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m <span class="hljs-keyword">for</span></span><br><span class="line">                       42 minutes)</span><br><span class="line">      --tail string    Number of lines to show from the end of the logs (default <span class="hljs-string">"all"</span>)</span><br><span class="line">  -t, --timestamps     Show timestamps</span><br><span class="line">      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m</span><br><span class="line">                       <span class="hljs-keyword">for</span> 42 minutes)</span><br></pre></td></tr></table></figure>
<h1 id="é•œåƒ"><a href="#é•œåƒ" class="headerlink" title="é•œåƒ"></a>é•œåƒ</h1><h2 id="æŸ¥çœ‹æœ¬åœ°é•œåƒ"><a href="#æŸ¥çœ‹æœ¬åœ°é•œåƒ" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°é•œåƒ"></a>æŸ¥çœ‹æœ¬åœ°é•œåƒ</h2><p><strong>docker images / docker image ls</strong></p>
<p>å‚æ•°ï¼š</p>
<ul>
<li><p>-a åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆåŒ…å«æ‰€æœ‰ä¸­é—´å±‚é•œåƒï¼‰</p>
</li>
<li><p>-q åªæ˜¾ç¤ºé•œåƒID</p>
</li>
<li><p>â€“digests æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼ˆä¼šå¤šä¸€ä¸ªGUGESTå±•ç¤ºå­—æ®µï¼Œç›¸å½“äºä¸€ä¸ªé•œåƒçš„å¤‡æ³¨ä¿¡æ¯ï¼Œæœ‰äº›é•œåƒæ²¡æœ‰ã€‚ï¼‰</p>
</li>
<li><p>â€“no-trunc æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯</p>
</li>
</ul>
<h2 id="ä»-Docker-Hub-æŸ¥è¯¢é•œåƒ"><a href="#ä»-Docker-Hub-æŸ¥è¯¢é•œåƒ" class="headerlink" title="ä» Docker Hub æŸ¥è¯¢é•œåƒ"></a>ä» Docker Hub æŸ¥è¯¢é•œåƒ</h2><p><strong>docker search é•œåƒå</strong></p>
<p>å¦‚ï¼š<code>docker search tomcat</code></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">NAME                                       DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">tomcat                                     Apache Tomcat is an open <span class="hljs-built_in">source</span> implementatiâ€¦   2345                [OK]</span><br><span class="line">tomee                                      Apache TomEE is an all-Apache Java EE certifâ€¦   64                  [OK]</span><br><span class="line">dordoka/tomcat                             Ubuntu 14.04, Oracle JDK 8 and Tomcat 8 baseâ€¦   53                                      [OK]</span><br><span class="line">davidcaste/alpine-tomcat                   Apache Tomcat 7/8 using Oracle Java 7/8 withâ€¦   34                                      [OK]</span><br><span class="line">bitnami/tomcat                             Bitnami Tomcat Docker Image                     28                                      [OK]</span><br><span class="line">cloudesire/tomcat                          Tomcat server, 6/7/8                            14                                      [OK]</span><br><span class="line">meirwa/spring-boot-tomcat-mysql-app        a sample spring-boot app using tomcat and Myâ€¦   12                                      [OK]</span><br><span class="line">tutum/tomcat                               Base docker image to run a Tomcat applicatioâ€¦   11</span><br><span class="line">aallam/tomcat-mysql                        Debian, Oracle JDK, Tomcat &amp; MySQL              11                                      [OK]</span><br><span class="line">jeanblanchard/tomcat                       Minimal Docker image with Apache Tomcat         8</span><br><span class="line">arm32v7/tomcat                             Apache Tomcat is an open <span class="hljs-built_in">source</span> implementatiâ€¦   6</span><br><span class="line">rightctrl/tomcat                           CentOS , Oracle Java, tomcat application sslâ€¦   4                                       [OK]</span><br><span class="line">maluuba/tomcat7-java8                      Tomcat7 with java8.                             3</span><br><span class="line">amd64/tomcat                               Apache Tomcat is an open <span class="hljs-built_in">source</span> implementatiâ€¦   2</span><br><span class="line">arm64v8/tomcat                             Apache Tomcat is an open <span class="hljs-built_in">source</span> implementatiâ€¦   2</span><br><span class="line">fabric8/tomcat-8                           Fabric8 Tomcat 8 Image                          2                                       [OK]</span><br><span class="line">camptocamp/tomcat-logback                  Docker image <span class="hljs-keyword">for</span> tomcat with logback integraâ€¦   1                                       [OK]</span><br><span class="line">99taxis/tomcat7                            Tomcat7                                         1                                       [OK]</span><br><span class="line">s390x/tomcat                               Apache Tomcat is an open <span class="hljs-built_in">source</span> implementatiâ€¦   0</span><br><span class="line">picoded/tomcat7                            tomcat7 with jre8 and MANAGER_USER / MANAGERâ€¦   0                                       [OK]</span><br><span class="line">oobsri/tomcat8                             Testing CI Jobs with different names.           0</span><br><span class="line">cfje/tomcat-resource                       Tomcat Concourse Resource                       0</span><br><span class="line">1and1internet/debian-9-java-8-tomcat-8.5   Our tomcat 8.5 image                            0                                       [OK]</span><br><span class="line">jelastic/tomcat                            An image of the Tomcat Java application servâ€¦   0</span><br><span class="line">swisstopo/service-print-tomcat             backend tomcat <span class="hljs-keyword">for</span> service-print the <span class="hljs-literal">true</span>, â€¦   0</span><br></pre></td></tr></table></figure>
<p>å‚æ•°ï¼š</p>
<ul>
<li><p>-s [æ•°å­—]ï¼š åˆ—å‡º star ä¸å°äºæŒ‡å®šæ•°å€¼çš„é•œåƒ</p>
  <figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥è¯¢æ˜Ÿæ˜Ÿæ•°ä¸å°äº 30 ä¸ªçš„ tomcat é•œåƒ</span></span><br><span class="line">docker search -s 30 tomcat</span><br><span class="line"><span class="hljs-comment"># -s å‚æ•°å·²åºŸå¼ƒï¼Œå¯ç”¨ --filter æ›¿ä»£</span></span><br><span class="line">docker search --filter=stars=30 tomcat</span><br></pre></td></tr></table></figure>
</li>
<li><p>â€“no-truncï¼š æ˜¾ç¤ºå®Œæ•´çš„é•œåƒæè¿°ä¿¡æ¯</p>
</li>
<li><p>â€“automatedï¼šåªåˆ—å‡º automated build ç±»å‹çš„é•œåƒ</p>
</li>
</ul>
<h2 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h2><p><strong>docker pull é•œåƒå:ç‰ˆæœ¬å·</strong></p>
<p>ä¸åŠ ç‰ˆæœ¬å·é»˜è®¤ <code>:latest</code></p>
<h2 id="åˆ é™¤æœ¬åœ°é•œåƒ"><a href="#åˆ é™¤æœ¬åœ°é•œåƒ" class="headerlink" title="åˆ é™¤æœ¬åœ°é•œåƒ"></a>åˆ é™¤æœ¬åœ°é•œåƒ</h2><p><strong>docker rmi é•œåƒåå­—æˆ–ID</strong></p>
<p>å‚æ•°ï¼š<code>-f</code> åˆ é™¤ä¸­é—´å±‚é•œåƒ</p>
<ul>
<li><p>åˆ é™¤å•ä¸ª</p>
  <figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f é•œåƒID</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤å¤šä¸ª</p>
  <figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f é•œåƒ1:TAG é•œåƒ2:TAG</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤å…¨éƒ¨</p>
<pre><code><figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å‘½ä»¤çš„ç»„åˆä½¿ç”¨ï¼Œå°† $(docker image ls -qa) çš„ç»“æœä½œä¸º å‰ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚ `docker image ls -qa` çš„ç»“æœå°±æ˜¯ä¸€ä¸²é•œåƒIDæ•°ç»„</span></span><br><span class="line">   docker rmi -f $(docker image ls -qa)</span><br></pre></td></tr></table></figure>
</code></pre></li>
</ul>
<p><strong>æœ‰å®¹å™¨æ­£åœ¨ä½¿ç”¨æ­¤é•œåƒï¼Œä¸èƒ½åˆ é™¤æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>docker rmi -f XXX</p>
<h1 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h1><p><em>ä»¥ CentOS å®¹å™¨ä¸ºä¾‹</em></p>
<h2 id="æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨"><a href="#æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨" class="headerlink" title="æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨"></a>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</h2><p><strong>docker run [options] image [command] [agsâ€¦]</strong></p>
<p>options:</p>
<ul>
<li>â€“name=â€å®¹å™¨åâ€ï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°</li>
<li>-dï¼šåå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼Œä¹Ÿå³ï¼š<strong>å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨</strong></li>
<li><strong>-i</strong>ï¼šä»¥äº¤äº’å¼æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ <code>-t</code> åŒæ—¶ä½¿ç”¨</li>
<li><strong>-t</strong>ï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ <code>-i</code> åŒæ—¶ä½¿ç”¨</li>
<li>-Pï¼šéšæœºç«¯å£åˆ†é…</li>
<li>-pï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæœ‰ä¸€ä¸‹å››ç§æ ¼å¼ï¼š<ul>
<li>ip:hostPort:containerPort</li>
<li>ip::containerPort</li>
<li>hostPort:containerPort</li>
<li>containerPort</li>
</ul>
</li>
</ul>
<p><strong>ç®€å•å¯åŠ¨ï¼š</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it centos</span><br></pre></td></tr></table></figure>
<p><strong>å¸¦å®¹å™¨åå¯åŠ¨ï¼š</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=<span class="hljs-string">"my-centos"</span> centos</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨"><a href="#æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨" class="headerlink" title="æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨"></a>æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</h2><p><strong>docker ps [options]</strong></p>
<p>options:</p>
<ul>
<li>-aï¼šåˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ + å†å²ä¸Šè¿è¡Œè¿‡çš„</li>
<li>-lï¼šæ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨</li>
<li>-nï¼šæ˜¾ç¤ºæœ€è¿‘ n ä¸ªåˆ›å»ºçš„å®¹å™¨</li>
<li>-qï¼šé™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ï¼ˆä¸åŠ å…¶ä»–å‚æ•°é»˜è®¤æ˜¾ç¤ºå½“å‰è¿è¡Œçš„æ‰€æœ‰å®¹å™¨çš„IDï¼‰</li>
<li>â€“no-truncï¼šä¸æˆªæ–­è¾“å‡º</li>
</ul>
<p>ç»“åˆ <code>-a</code>/<code>-q</code> å‚æ•°ï¼Œå¯ä»¥å®ç°åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åˆ é™¤æœ€è¿‘çš„ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">docker rm $(docker ps -lq)</span><br><span class="line"><span class="hljs-comment"># å¼ºåˆ¶åˆ é™¤æœ€è¿‘çš„ä¸€ä¸ªå®¹å™¨ï¼ˆè‹¥æœ€è¿‘çš„ä¸€ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œï¼‰</span></span><br><span class="line">docker rm -f $(docker ps -lq)</span><br><span class="line"><span class="hljs-comment"># åˆ é™¤å†å²æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…å«æ­£åœ¨è¿è¡Œçš„</span></span><br><span class="line">docker rm -f $(docker ps -aq)</span><br></pre></td></tr></table></figure>
<h2 id="é€€å‡ºå®¹å™¨"><a href="#é€€å‡ºå®¹å™¨" class="headerlink" title="é€€å‡ºå®¹å™¨"></a>é€€å‡ºå®¹å™¨</h2><p>ä¸€ï¼‰exitï¼šé€€å‡ºå¹¶åœæ­¢</p>
<p>ä½¿ç”¨ <code>docker run -it --name=&quot;my-centos&quot; centos</code> çš„æ–¹å¼å¯åŠ¨å®¹å™¨ä¼šä»¥ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯å½¢å¼è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨ï¼Œå½“æ‰§è¡Œ <code>exit</code> æ—¶å®¹å™¨å°±è‡ªåŠ¨åœæ­¢äº†ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker ps -a</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">037deff7ded9        centos              <span class="hljs-string">"/bin/bash"</span>         14 seconds ago      **Exited (0) 5 seconds ago**                       my-centos</span><br></pre></td></tr></table></figure>
<p>äºŒï¼‰Control + P + Qï¼šé€€å‡ºä¸åœæ­¢</p>
<p>é‡æ–°è¿è¡Œå®¹å™¨ï¼Œå¹¶åœ¨é‡å¯å†…æ‰§è¡Œå¿«æ·é”®ä¹‹åï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES</span><br><span class="line">f654ef93ea3f        centos              <span class="hljs-string">"/bin/bash"</span>         About a minute ago   **Up About a minute**                       practical_sinoussi</span><br></pre></td></tr></table></figure>
<p><strong>å½“ä¸åœæ­¢é€€å‡ºäº†ï¼Œå¦‚ä½•é‡æ–°è¿›å»å‘¢ï¼Ÿ</strong> æŸ¥çœ‹ä¸‹é¢çš„ã€Œè¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€ç« èŠ‚</p>
<h2 id="å¯åŠ¨å®¹å™¨"><a href="#å¯åŠ¨å®¹å™¨" class="headerlink" title="å¯åŠ¨å®¹å™¨"></a>å¯åŠ¨å®¹å™¨</h2><p><strong>docker start å®¹å™¨ID/å®¹å™¨å</strong></p>
<h2 id="é‡å¯å®¹å™¨"><a href="#é‡å¯å®¹å™¨" class="headerlink" title="é‡å¯å®¹å™¨"></a>é‡å¯å®¹å™¨</h2><p><strong>docker restart å®¹å™¨ID/å®¹å™¨å</strong></p>
<h2 id="åœæ­¢å®¹å™¨"><a href="#åœæ­¢å®¹å™¨" class="headerlink" title="åœæ­¢å®¹å™¨"></a>åœæ­¢å®¹å™¨</h2><p><strong>docker stop å®¹å™¨ID/å®¹å™¨å</strong></p>
<h2 id="å¼ºåˆ¶åœæ­¢å®¹å™¨"><a href="#å¼ºåˆ¶åœæ­¢å®¹å™¨" class="headerlink" title="å¼ºåˆ¶åœæ­¢å®¹å™¨"></a>å¼ºåˆ¶åœæ­¢å®¹å™¨</h2><p><strong>docker kill å®¹å™¨ID/å®¹å™¨å</strong></p>
<h2 id="åˆ é™¤å·²åœæ­¢çš„å®¹å™¨"><a href="#åˆ é™¤å·²åœæ­¢çš„å®¹å™¨" class="headerlink" title="åˆ é™¤å·²åœæ­¢çš„å®¹å™¨"></a>åˆ é™¤å·²åœæ­¢çš„å®¹å™¨</h2><p><strong>docker rm å®¹å™¨ID</strong></p>
<p>ä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªå®¹å™¨ï¼Ÿå‰é¢å·²ç»ä½¿ç”¨äº†ä¸€ç§æ–¹å¼ï¼š<code>docker rm -f $(docker ps -aq)</code></p>
<p>è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼š<br><figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åˆ©ç”¨ linux çš„ç®¡é“ç¬¦å¯å˜å‚æ•° xargsï¼Œå°† | å‰é¢çš„å‘½ä»¤ç»“æœä½œä¸ºå‚æ•°ä½œä¸º | åé¢å‘½ä»¤çš„å…¥å‚</span></span><br><span class="line">docker ps -aq | xargs docker rm -f</span><br></pre></td></tr></table></figure></p>
<h1 id="å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹"><a href="#å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹" class="headerlink" title="å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹"></a>å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹</h1><h2 id="å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨"><a href="#å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨" class="headerlink" title="å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨"></a>å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨</h2><p><strong>docker run -d å®¹å™¨å/å®¹å™¨ID</strong></p>
<p>ä»¥å®ˆæŠ¤å¼æ–¹å¼å¯åŠ¨å®¹å™¨åæŸ¥çœ‹å®¹å™¨è¿›ç¨‹ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker run -d centos</span></span><br><span class="line">4de40688015eaec0a015f5d408117d938459828e2379dec4268ae88a298a7704</span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>
<p>å‘ç°å¹¶æ²¡æœ‰æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨è¿›ç¨‹ï¼Œä¸ºå•¥ï¼Ÿå†çœ‹ä¸€ä¸‹å®¹å™¨å†å²è¿è¡Œè®°å½•è¯•è¯•ã€‚ã€‚ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker ps -a</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">4de40688015e        centos              <span class="hljs-string">"/bin/bash"</span>         4 minutes ago       Exited (0) 4 minutes ago                       pedantic_benz</span><br></pre></td></tr></table></figure>
<p>å‘ç°åˆšåˆšä»¥ <strong>å®ˆæŠ¤å¼æ–¹å¼</strong> å¯åŠ¨çš„å®¹å™¨ï¼Œå¯åŠ¨ä¹‹åå°±ç«‹é©¬åœæ­¢äº†ï¼</p>
<blockquote>
<p>Docker å®¹å™¨åå°è¿è¡Œï¼Œå°±å¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚\<br>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¦‚æœå®¹å™¨è¿è¡Œçš„å‘½ä»¤ä¸æ˜¯é‚£äº› <strong>ä¸€ç›´æŒ‚èµ·</strong> çš„å‘½ä»¤ï¼ˆå¦‚ï¼štopã€tailï¼‰ï¼Œå®¹å™¨æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºçš„ã€‚\<br>è¿™æ˜¯ç”±äº <strong>dockerçš„æœºåˆ¶é—®é¢˜</strong>ï¼Œä¾‹å¦‚ä½¿ç”¨ nginxï¼Œå¯åŠ¨ nginx æœåŠ¡çš„å‘½ä»¤æ˜¯ï¼š<code>service nginx start</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåå°å‘½ä»¤ï¼Œåœ¨ linux ä¸­ä¼šä¸€ç›´åœ¨åå°è¿è¡Œç€ã€‚ä½†æ˜¯åœ¨ docker ä¸­ï¼Œnginxå®¹å™¨ä¸ºåå°æ¨¡å¼è¿è¡Œæ¨¡å¼ï¼Œå¯¼è‡´ docker çš„ nginx å®¹å™¨å‰å°æ²¡æœ‰è¿è¡Œçš„åº”ç”¨ã€‚æ‰€ä»¥å®¹å™¨å¯åŠ¨åä¼šç«‹å³è‡ªåŠ¨åœæ­¢ï¼Œå› ä¸ºè¿™ä¸ªå®¹å™¨è§‰å¾—è‡ªå·±æ²¡æœ‰äº‹æƒ…å¯åšï¼ğŸ˜…\<br>æœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå°†è¦è¿è¡Œçš„ç¨‹åºä»¥å‰å°çš„æ–¹å¼è¿è¡Œï¼</p>
</blockquote>
<p>é‚£ä¹ˆæ€ä¹ˆè®©å®¹å™¨ä»¥<strong>å®ˆæŠ¤å¼å®¹å™¨å¯åŠ¨</strong>ï¼Œä½†æ˜¯é¿å…å‰å°æ²¡äº‹å¯åšå¯¼è‡´å®¹å™¨è‡ªåŠ¨å…³é—­å‘¢ï¼Ÿç®€å•çš„æ–¹å¼æœ‰ï¼š<strong>è®©åå°è¿è¡Œçš„å®¹å™¨å‰å°ä¸€ç›´æ‰“å°æ—¥å¿—</strong>ï¼Œè¿™æ ·å°±é¿å…äº†å‰å°æ²¡äº‹å¯åšå¯¼è‡´å®¹å™¨é€€å‡ºğŸ˜‚ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker run -d centos /bin/bash -c "while true; do echo hello harry!; sleep 1; done"</span></span><br><span class="line">2b8e4a0014ab7cb435ecc19f171daf027c1291fa24b77ae52132ba9c225962d8</span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">2b8e4a0014ab        centos              <span class="hljs-string">"/bin/bash -c 'whileâ€¦"</span>   3 seconds ago       Up 3 seconds                            angry_aryabhata</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶å®¹å™¨æ­£åœ¨ä»¥åå°è¿è¡Œï¼Œä½†æ˜¯æ²¡æœ‰å…³é—­ã€‚è§£é‡Šä¸€ä¸‹ <code>/bin/bash</code>ï¼Œ</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœ -c é€‰é¡¹å­˜åœ¨ï¼Œå‘½ä»¤å°±ä»å­—ç¬¦ä¸²ä¸­è¯»å–ã€‚å¦‚æœå­—ç¬¦ä¸²åæœ‰å‚æ•°ï¼Œä»–ä»¬å°†ä¼šè¢«åˆ†é…åˆ°å‚æ•°çš„ä½ç½®ä¸Šï¼Œä»<span class="hljs-variable">$0</span>å¼€å§‹ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å®¹å™¨æ—¥å¿—"><a href="#æŸ¥çœ‹å®¹å™¨æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹å®¹å™¨æ—¥å¿—"></a>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</h2><p><strong>docker logs -f -t â€“tail å®¹å™¨ID</strong></p>
<p>optinsï¼š</p>
<ul>
<li>-tï¼šåŠ å…¥æ—¶é—´æˆ³</li>
<li>-fï¼šè·Ÿéšæœ€æ–°æ—¥å¿—æ‰“å°</li>
<li>â€“tail æ•°å­—ï¼šæ˜¾ç¤ºæœ€åå¤šå°‘æ¡</li>
</ul>
<p>æŸ¥çœ‹åˆšåˆšä»¥å®ˆæŠ¤å®¹å™¨è¿è¡Œçš„è¿›ç¨‹ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">04b01b87b990        centos              <span class="hljs-string">"/bin/bash -c 'whileâ€¦"</span>   5 seconds ago       Up 4 seconds                            modest_chaplygin</span><br><span class="line"><span class="hljs-comment"># docker logs -t -f --tail 10 04b01b87b990 ä»å€’æ•°ç¬¬ 10 æ¡æ—¥å¿—å¼€å§‹æŸ¥çœ‹ï¼Œä¸åœçš„è¿½åŠ ï¼Œå¹¶ä¸”æ˜¾ç¤ºæ—¥å¿—æ‰“å°çš„æ—¶é—´ã€‚</span></span><br><span class="line">2019-04-14T10:56:11.635841663Z hello harry!</span><br><span class="line">2019-04-14T10:56:12.638348360Z hello harry!</span><br><span class="line">2019-04-14T10:56:13.645537151Z hello harry!</span><br><span class="line">2019-04-14T10:56:14.651628446Z hello harry!</span><br><span class="line">2019-04-14T10:56:15.654658791Z hello harry!</span><br><span class="line">2019-04-14T10:56:16.658972279Z hello harry!</span><br><span class="line">2019-04-14T10:56:17.664596508Z hello harry!</span><br><span class="line">2019-04-14T10:56:18.668527236Z hello harry!</span><br><span class="line">2019-04-14T10:56:19.671418530Z hello harry!</span><br><span class="line">2019-04-14T10:56:20.676871204Z hello harry!</span><br><span class="line">2019-04-14T10:56:21.682418501Z hello harry!</span><br><span class="line">2019-04-14T10:56:22.683835449Z hello harry!</span><br><span class="line">2019-04-14T10:56:23.688968112Z hello harry!</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹"><a href="#æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹"></a>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</h2><p><strong>docker top å®¹å™¨ID</strong></p>
<p>æŸ¥çœ‹åˆšåˆšå®ˆæŠ¤å¼è¿è¡Œçš„å®¹å™¨çš„å†…éƒ¨è¿›ç¨‹ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker top 04b01b87b990</span></span><br><span class="line">PID                 USER                TIME                COMMAND</span><br><span class="line">8568                root                0:00                /bin/bash -c <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> hello harry!; sleep 1; <span class="hljs-keyword">done</span></span><br><span class="line">8921                root                0:00                sleep 1</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚"><a href="#æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚" class="headerlink" title="æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚"></a>æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</h2><p><strong>docker inspect å®¹å™¨ID</strong></p>
<h2 id="è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’"><a href="#è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’" class="headerlink" title="è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’"></a>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’</h2><p>å‰é¢å­¦åˆ°è¿‡ <strong>ä¸å…³é—­å®¹å™¨å¹¶é€€å‡º</strong> çš„å¿«æ·é”®æ˜¯ï¼š<code>contrl + p + q</code>ï¼Œé‚£ä¹ˆé€€å‡ºä¹‹åæ€ä¹ˆé‡æ–°è¿›å…¥å‘¢ï¼Ÿæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ã€‚</p>
<h3 id="docker-attach-å®¹å™¨ID"><a href="#docker-attach-å®¹å™¨ID" class="headerlink" title="docker attach å®¹å™¨ID"></a>docker attach å®¹å™¨ID</h3><p>ã€Œæ¼”ç¤ºã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker rm -f $(docker ps -aq) å…ˆæŠŠæ‰€æœ‰å®¹å™¨æ€æ­»</span></span><br><span class="line"><span class="hljs-comment"># docker run -it --name='my-centos' centos ä»¥äº¤äº’å¼ç»ˆç«¯å¯åŠ¨å®¹å™¨</span></span><br><span class="line">[root@b7324d8b56b9 /]<span class="hljs-comment"># pwd</span></span><br><span class="line">/</span><br><span class="line">[root@b7324d8b56b9 /]<span class="hljs-comment"># ll</span></span><br><span class="line">total 56</span><br><span class="line">-rw-r--r--   1 root root 12082 Mar  5 17:36 anaconda-post.log</span><br><span class="line">lrwxrwxrwx   1 root root     7 Mar  5 17:34 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x   5 root root   360 Apr 14 11:24 dev</span><br><span class="line">drwxr-xr-x   1 root root  4096 Apr 14 11:24 etc</span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 11  2018 home</span><br><span class="line">lrwxrwxrwx   1 root root     7 Mar  5 17:34 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx   1 root root     9 Mar  5 17:34 lib64 -&gt; usr/lib64</span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 11  2018 media</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ä½¿ç”¨å¿«æ·é”® control + p + q ä¸å…³é—­å®¹å™¨å¹¶é€€å‡º</span></span><br><span class="line">[root@b7324d8b56b9 /]<span class="hljs-comment"># %</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES</span><br><span class="line">b7324d8b56b9        centos              <span class="hljs-string">"/bin/bash"</span>         About a minute ago   Up About a minute                       my-centos</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°å®¹å™¨ä¾ç„¶åœ¨è¿è¡Œï¼Œæ‰§è¡Œå‘½ä»¤ docker attach b7324d8b56b9 é‡æ–°è¿›å…¥ã€‚</span></span><br><span class="line">[root@b7324d8b56b9 /]<span class="hljs-comment"># pwd</span></span><br><span class="line">/</span><br><span class="line">[root@b7324d8b56b9 /]<span class="hljs-comment"># ls</span></span><br><span class="line">anaconda-post.log  bin  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br></pre></td></tr></table></figure>
<h3 id="docker-exec-it-å®¹å™¨ID-bashShell"><a href="#docker-exec-it-å®¹å™¨ID-bashShell" class="headerlink" title="docker exec -it å®¹å™¨ID bashShell"></a>docker exec -it å®¹å™¨ID bashShell</h3><p>ã€Œæ¼”ç¤ºã€</p>
<p>è¿›å…¥å®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å…ˆä¸å…³é—­é€€å‡ºå®¹å™¨ control + p + q</span></span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">b7324d8b56b9        centos              <span class="hljs-string">"/bin/bash"</span>         7 minutes ago       Up 7 minutes                            my-centos</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker exec -it b7324d8b56b9 /bin/bash ä¸€æ ·è¿›å…¥äº†å®¹å™¨</span></span><br><span class="line">[root@60711933f7dd /]<span class="hljs-comment"># pwd</span></span><br><span class="line">/</span><br><span class="line">[root@60711933f7dd /]<span class="hljs-comment"># ls</span></span><br><span class="line">anaconda-post.log  bin  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æ‰§è¡Œ exit å‘½ä»¤é€€å‡ºå®¹å™¨ï¼ŒPSï¼šè¿™é‡Œå®¹å™¨ä¼šå…³é—­å—ï¼Ÿ</span></span><br><span class="line">[root@60711933f7dd /]<span class="hljs-comment"># exit</span></span><br><span class="line"><span class="hljs-built_in">exit</span></span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">60711933f7dd        centos              <span class="hljs-string">"/bin/bash"</span>         2 minutes ago       Up 2 minutes                            my-centos</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°ï¼Œä»¥ exec æ–¹å¼è¿›å…¥çš„å®¹å™¨æ‰§è¡Œ exit å¹¶ä¸ä¼šå…³é—­å®¹å™¨ã€‚</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸è¿›å…¥å®¹å™¨ï¼Œåœ¨å®¿ä¸»æœºæ‰§è¡Œå®¹å™¨å†…éƒ¨å‘½ä»¤ï¼š<br><figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker exec -it 60711933f7dd ls -l /usr</span></span><br><span class="line">total 68</span><br><span class="line">dr-xr-xr-x  2 root root 16384 Mar  5 17:36 bin</span><br><span class="line">drwxr-xr-x  2 root root  4096 Apr 11  2018 etc</span><br><span class="line">drwxr-xr-x  2 root root  4096 Apr 11  2018 games</span><br><span class="line">drwxr-xr-x  3 root root  4096 Mar  5 17:35 include</span><br><span class="line">dr-xr-xr-x 19 root root  4096 Mar  5 17:36 lib</span><br><span class="line">dr-xr-xr-x 24 root root 16384 Mar  5 17:36 lib64</span><br><span class="line">drwxr-xr-x 11 root root  4096 Mar  5 17:36 libexec</span><br><span class="line">drwxr-xr-x 12 root root  4096 Mar  5 17:34 <span class="hljs-built_in">local</span></span><br><span class="line">dr-xr-xr-x  2 root root  4096 Mar  5 17:36 sbin</span><br><span class="line">drwxr-xr-x 52 root root  4096 Mar  5 17:36 share</span><br><span class="line">drwxr-xr-x  4 root root  4096 Mar  5 17:34 src</span><br><span class="line">lrwxrwxrwx  1 root root    10 Mar  5 17:34 tmp -&gt; ../var/tmp</span><br><span class="line">harry@192  ~/Learning/docker-note</span><br><span class="line"><span class="hljs-comment"># è¿™é‡Œä»¥ linux ä¸­çš„ `ls -l /usr` å‘½ä»¤ä»£æ›¿ä¸Šé¢çš„ `/bin/bash` å‘½ä»¤æŸ¥çœ‹äº†å®¹å™¨ centos ä¸­çš„ /usr ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿”å›çš„ç»“æœç›´æ¥å±•ç¤ºåˆ°äº†å®¿ä¸»æœºä¸Šï¼ˆå³ï¼šæœ¬æœºMacOSï¼‰</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<ul>
<li>attachï¼šç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚</li>
<li>execï¼šæ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚</li>
</ul>
<h2 id="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š"><a href="#ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š" class="headerlink" title="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š"></a>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š</h2><p><strong>docker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ å®¿ä¸»æœºè·¯å¾„</strong></p>
<p>å®¹å™¨å…³é—­å…¶è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶éƒ½ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥éœ€è¦æŠŠå®¹å™¨ä¸­çš„æ•°æ®æ–‡ä»¶æ‹·è´åˆ°å®¿ä¸»æœºä¸Šã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker attach 60711933f7dd è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@60711933f7dd /]<span class="hljs-comment"># ll</span></span><br><span class="line">total 56</span><br><span class="line">-rw-r--r--   1 root root 12082 Mar  5 17:36 anaconda-post.log</span><br><span class="line"><span class="hljs-comment"># çœ‹åˆ°æœ‰ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œå°†å…¶å¤åˆ¶åˆ°å®¿ä¸»æœºï¼Œå…ˆå®¿ä¸»æœºå½“å‰æ–‡ä»¶ï¼š</span></span><br><span class="line">harry@192  ~/Learning/docker-note  ll</span><br><span class="line">total 40</span><br><span class="line">-rw-r--r--@ 1 harry  staff    17K  4 14 19:56 Dockerç¬”è®°.md</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°å½“å‰å®¿ä¸»å¥åªæœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚å°†å®¹å™¨ä¸­çš„ anaconda-post.log å¤åˆ¶åˆ°å½“å‰æ–‡ä»¶å¤¹ ~/Learning/docker-note</span></span><br><span class="line"><span class="hljs-comment"># control + p + q éœ€è¦å…ˆé€€å‡ºå®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker cp 60711933f7dd:/anaconda-post.log ./ å¤åˆ¶åˆ°å½“å‰ç›®å½•ä¸‹</span></span><br><span class="line"><span class="hljs-comment"># ll æŸ¥çœ‹å½“å‰å®¿ä¸»æœºæ–‡ä»¶</span></span><br><span class="line">total 64</span><br><span class="line">-rw-r--r--@ 1 harry  staff    17K  4 14 20:01 Dockerç¬”è®°.md</span><br><span class="line">-rw-r--r--  1 harry  staff    12K  3  6 01:36 anaconda-post.log</span><br></pre></td></tr></table></figure>
<h1 id="é•œåƒåŸç†"><a href="#é•œåƒåŸç†" class="headerlink" title="é•œåƒåŸç†"></a>é•œåƒåŸç†</h1><h2 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h2><blockquote>
<p>é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ã€‚å®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€åº“ã€ç¯å¢ƒã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
<h3 id="UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰"><a href="#UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰" class="headerlink" title="UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰"></a>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</h3><blockquote>
<p>unionFS æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒ <strong>å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ </strong>ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ã€‚\<br>è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥ç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„é•œåƒã€‚</p>
</blockquote>
<p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚è”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<h3 id="Docker-é•œåƒåŠ è½½åŸç†"><a href="#Docker-é•œåƒåŠ è½½åŸç†" class="headerlink" title="Docker é•œåƒåŠ è½½åŸç†"></a>Docker é•œåƒåŠ è½½åŸç†</h3><h3 id="ä¸ºä»€ä¹ˆ-Docker-é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„"><a href="#ä¸ºä»€ä¹ˆ-Docker-é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„" class="headerlink" title="ä¸ºä»€ä¹ˆ Docker é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„"></a>ä¸ºä»€ä¹ˆ Docker é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„</h3><p>å…±äº«èµ„æºã€‚å¦‚ï¼šæœ‰å¤šä¸ªé•œåƒéƒ½æ˜¯ä»ç›¸åŒçš„ base é•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆå®¿ä¸»æœºåªéœ€è¦åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½ base é•œåƒã€‚åŒæ—¶å†…å­˜ä¸­ä¹Ÿç¥éœ€è¦åŠ è½½ä¸€ä»½ base é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰çš„å®¹å™¨æœåŠ¡äº†ã€‚è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥å…±äº«ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>Docker é•œåƒéƒ½æ˜¯åªè¯»çš„ã€‚å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä¸ºã€Œå®¹å™¨å±‚ã€ï¼Œå®¹å™¨å±‚ä¹‹ä¸‹çš„éƒ½å«åšã€Œé•œåƒå±‚ã€ã€‚</p>
<h2 id="é•œåƒçš„-commit-æ“ä½œ"><a href="#é•œåƒçš„-commit-æ“ä½œ" class="headerlink" title="é•œåƒçš„ commit æ“ä½œ"></a>é•œåƒçš„ commit æ“ä½œ</h2><p><em>docker commit æäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ</em></p>
<p><strong>docker commit -m=â€æäº¤çš„æè¿°ä¿¡æ¯â€ -a=â€ä½œè€…â€ å®¹å™¨ID è¦åˆ›å»ºçš„é•œåƒå[:æ ‡ç­¾å]</strong></p>
<p>ã€Œæ¼”ç¤ºã€</p>
<p><strong>1. ä» DockerHub ä¸Šä¸‹è½½ tomcat é•œåƒåˆ°æœ¬åœ°å¹¶æˆåŠŸè¿è¡Œ</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker pull tomcat</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/tomcat</span><br><span class="line">e79bb959ec00: Pull complete</span><br><span class="line">d4b7902036fe: Pull complete</span><br><span class="line">1b2a72d4e030: Pull complete</span><br><span class="line">de423484a946: Pull complete</span><br><span class="line">ceaac3b844f7: Pull complete</span><br><span class="line">88f01b722a52: Pull complete</span><br><span class="line">c23be56a9ac1: Pull complete</span><br><span class="line">d852ffd6d31f: Pull complete</span><br><span class="line">11775a3d792d: Pull complete</span><br><span class="line">13fdd17462ac: Pull complete</span><br><span class="line">2092995a1e54: Pull complete</span><br><span class="line">Digest: sha256:409501d73062ab508930eab827fcb19d7d3f7e9bbe63bc6d587114c6af4bee12</span><br><span class="line">Status: Downloaded newer image <span class="hljs-keyword">for</span> tomcat:latest</span><br><span class="line"><span class="hljs-comment"># ä»¥äº¤äº’å¼ç»ˆç«¯å¹¶ã€Œæ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»æœºæŒ‡å®šç«¯å£ã€è¿è¡Œ tomcat</span></span><br><span class="line"><span class="hljs-comment"># docker run -it -p 8888:8080 --name='my-tomcat' tomcat</span></span><br><span class="line"><span class="hljs-comment"># æ—¥å¿—å¤ªå¤šä¸å±•ç¤ºäº†ï¼Œæ‰§è¡Œã€Œé€€å‡ºä¸å…³é—­å®¹å™¨ control + p + qã€ã€‚</span></span><br><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS                    NAMES</span><br><span class="line">c492f4bbce3e        tomcat              <span class="hljs-string">"catalina.sh run"</span>   About a minute ago   Up About a minute   0.0.0.0:8888-&gt;8080/tcp   my-tomcat</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°å®¹å™¨ä¸­çš„ 8080 ç«¯å£å·²ç»æ˜ å°„åˆ°äº†å®¿ä¸»æœºä¸Šçš„ 8888 ç«¯å£ï¼Œè®¿é—® http://localhost:8888 å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</span></span><br></pre></td></tr></table></figure>
<p>PSï¼šè¿è¡Œ tomcat ä¸ä»¥äº¤äº’å¼ç»ˆç«¯ <code>-it</code> ä¹Ÿå¯ä»¥ï¼Œå› ä¸ºå…¶æœ‰å‰å°è¿›ç¨‹è¿è¡Œï¼ˆæ—¥å¿—æ‰“å°ï¼‰ï¼Œæ‰€ä»¥å®¹å™¨ä¸ä¼šé€€å‡ºã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker rm -f $(docker ps -aq) å…ˆåˆ é™¤åŸæœ‰å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker run -d -p 8888:8080 --name='my-tomcat' tomcat</span></span><br><span class="line">96dad0f6272538e8a1c3359a42d0a6493814f1972c8adf86087dbd322d1033e6</span><br><span class="line"><span class="hljs-comment"># docker logs -f -t --tail 10 96dad0f62725 æŸ¥çœ‹æ—¥å¿—ï¼šé€æ¡è¿½åŠ ï¼Œæ˜¾ç¤ºæ—¥æœŸï¼Œä»å€’æ•°ç¬¬ 10 æ¡å¼€å§‹ã€‚</span></span><br><span class="line">......</span><br><span class="line">org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/<span class="hljs-built_in">local</span>/tomcat/webapps/manager] has finished <span class="hljs-keyword">in</span> [18] ms</span><br><span class="line">2019-04-14T16:44:25.733314600Z 14-Apr-2019 16:44:25.732 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [<span class="hljs-string">"http-nio-8080"</span>]</span><br><span class="line">2019-04-14T16:44:25.749280600Z 14-Apr-2019 16:44:25.748 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [<span class="hljs-string">"ajp-nio-8009"</span>]</span><br><span class="line">2019-04-14T16:44:25.754519300Z 14-Apr-2019 16:44:25.754 INFO [main] org.apache.catalina.startup.Catalina.start Server startup <span class="hljs-keyword">in</span> 889 ms</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>-P</code> å‚æ•°å°†ä¼šéšæœºåˆ†é…å®¿ä¸»æœºç«¯å£æ˜ å°„ç»™å®¹å™¨ã€‚</p>
<p><strong>2. æ•…æ„åˆ é™¤ä¸Šä¸€æ­¥é•œåƒç”Ÿäº§ tomcat å®¹å™¨çš„æ–‡æ¡£</strong></p>
<p>å…ˆè®¿é—® <a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a> æŸ¥çœ‹ document é¡µé¢ï¼š</p>
<p><img src="http://img.yuzh.xyz/docker-note/1555261778530.jpg" alt="tomcatä¸»é¡µ"></p>
<p>ç‚¹å‡» Documentationï¼Œå¯ä»¥æ­£å¸¸çœ‹åˆ°é¡µé¢:</p>
<p><img src="http://img.yuzh.xyz/docker-note/1555261916030.jpg" alt="documenté¡µé¢"></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># é‡æ–°è¿›å…¥ä¸Šé¢å¯åŠ¨çš„ tomcat å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker exec -it 96dad0f62725 /bin/bash</span></span><br><span class="line">root@96dad0f62725:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment"># pwd</span></span><br><span class="line">/usr/<span class="hljs-built_in">local</span>/tomcat</span><br><span class="line"><span class="hljs-comment"># åˆ é™¤å½“å‰ tomcat åº”ç”¨çš„ document æ–‡æ¡£é¡µé¢</span></span><br><span class="line">root@96dad0f62725:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment"># rm -rf webapps/docs/</span></span><br><span class="line">root@96dad0f62725:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment">#</span></span><br></pre></td></tr></table></figure>
<p>åˆ·æ–°æ–‡æ¡£é¡µé¢å†æ¬¡æŸ¥çœ‹ï¼š</p>
<p><img src="http://img.yuzh.xyz/docker-note/1555262087054.jpg" alt="æ–‡æ¡£é¡µé¢å·²ä¸å­˜åœ¨"></p>
<p>PSï¼šè¿™åªæ˜¯ä¿®æ”¹äº†å½“å‰å®¹å™¨çš„ tomcatï¼Œå¹¶æ²¡æœ‰ commit ä½œä¸ºä¸€ä¸ªæ–°å®¹å™¨ã€‚æ‰€ä»¥å½“å½“å‰å®¹å™¨è¢«åˆ é™¤ä¹‹åä¿®æ”¹çš„å†…å®¹ä¹Ÿéšç€è¢«åˆ é™¤äº†ï¼Œå¦‚éœ€è¦ä¿å­˜ä¿®æ”¹åçš„å†…å®¹ï¼Œå¯ä»¥ commit è¿™ä¸ªå®¹å™¨ä½œä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p>
<p><strong>3. ä¹Ÿå³å½“å‰çš„ tomcat è¿è¡Œå®ä¾‹æ˜¯ä¸€ä¸ªæ²¡æœ‰æ–‡æ¡£å†…å®¹çš„å®¹å™¨ã€‚ä»¥å®ƒä¸ºæ¨¡ç‰ˆ commit ä¸€ä¸ªæ²¡æœ‰ doc çš„ tommcat æ–°é•œåƒ my-tomcat</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker exec -it 1b498158b4ee7fc71d80d9da9ba30d890fa5cddcffb7d1edbffbbfe21b4d2317 /bin/bash</span></span><br><span class="line">root@1b498158b4ee:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment"># pwd</span></span><br><span class="line">/usr/<span class="hljs-built_in">local</span>/tomcat</span><br><span class="line">root@1b498158b4ee:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment"># rm -rf webapps/docs/</span></span><br><span class="line">root@1b498158b4ee:/usr/<span class="hljs-built_in">local</span>/tomcat<span class="hljs-comment"># exit</span></span><br><span class="line"><span class="hljs-built_in">exit</span> <span class="hljs-comment"># è¿™é‡Œåªæ˜¯é€€å‡ºæ–°å¼€çš„ç»ˆç«¯è¿›ç¨‹ï¼Œå®é™…ä¸Šæ²¡æœ‰é€€å‡º tomcat çš„è¿›ç¨‹ã€‚</span></span><br><span class="line"><span class="hljs-comment"># æ‰§è¡Œ docker commit -m="del tomcat documentation" -a="harry" 1b498158b izhiliu/tomcat2:v2</span></span><br><span class="line"><span class="hljs-comment"># é•œåƒåè§„èŒƒï¼šç»„ç»‡å/é•œåƒå:TAG</span></span><br><span class="line">sha256:cf18ff34c415b8ca05494a3d6faa276a0b1229cffb5563cffbb8f0af533b6f47</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°æ‰§è¡ŒæˆåŠŸä¹‹åè¿”å›äº†æ–°çš„é•œåƒçš„å”¯ä¸€æ ‡è¯†ï¼Œå†æŸ¥çœ‹ä¸€ä¸‹é•œåƒï¼šdocker image ls | grep tomcat</span></span><br><span class="line">izhiliu/tomcat2     v2                  cf18ff34c415        About a minute ago   465MB</span><br><span class="line">tomcat              latest              5a069ba3df4d        41 hours ago         465MB</span><br><span class="line"><span class="hljs-comment"># åˆšåˆšæ–°å»ºçš„é•œåƒå·²ç»å­˜åœ¨äº†ï¼Œå¯åŠ¨ä¸€ä¸‹çœ‹çœ‹ï¼šdocker run -d -p 8080:8080 izhiliu/tomcat2:v2</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æ–°çš„å®¹å™¨å·²ç»æ²¡æœ‰ documentation é¡µé¢äº†ã€‚</p>
<p><strong>4. å¯åŠ¨æˆ‘ä»¬ commit åçš„æ–°æ™¯è±¡å¹¶å’ŒåŸæ¥çš„å¯¹æ¯”</strong></p>
<ul>
<li>å®˜æ–¹çš„ tomcat:latest æœ‰ Documentation é¡µé¢</li>
<li>è‡ªå®šä¹‰çš„ izhiliu/tomcat:v2 æ²¡æœ‰ Documentation é¡µé¢</li>
</ul>
<h1 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h1><blockquote>
<p>Docker çš„ç†å¿µ</p>
<ul>
<li>å°†åº”ç”¨ä¸è¿è¡Œçš„ç¯å¢ƒæ‰“åŒ…å½¢æˆå®¹å™¨è¿è¡Œï¼Œè¿è¡Œå¯ä»¥ä¼´éšç€å®¹å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¹æ•°æ®çš„è¦æ±‚æ˜¯æŒä¹…åŒ–çš„ã€‚</li>
<li>å®¹å™¨ä¹‹é—´å¸Œæœ›æœ‰å¯èƒ½å…±äº«æ•°æ®</li>
</ul>
</blockquote>
<p>Docker å®¹å™¨è¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®ï¼Œå¦‚æœä¸é€šè¿‡ <code>docker commit</code> ç”Ÿæˆæ–°çš„é•œåƒï¼Œä½¿å¾—æ•°æ®ä½œä¸ºé•œåƒçš„ä¸€éƒ¨åˆ†ä¿å­˜ä¸‹æ¥ï¼Œé‚£ä¹ˆå½“å®¹å™¨åˆ é™¤åï¼Œæ•°æ®è‡ªç„¶ä¹Ÿå°±æ²¡æœ‰äº†ã€‚</p>
<p>ä¹‹å‰å­¦åˆ°è¿‡ä¸€ä¸ªå‘½ä»¤ã€Œä»å®¹å™¨æ‹·è´æ•°æ®åˆ°å®¿ä¸»æœºã€ï¼š<code>docker cp å®¹å™¨ID:å®¹å™¨è·¯å¾„ å®¿ä¸»æœºè·¯å¾„</code></p>
<p>ä½†æ˜¯è¿™åªèƒ½å®ç°å°†æ•°æ®æ‰‹åŠ¨ä¿å­˜ï¼Œå¹¶ä¸èƒ½å®ç°å®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚è§£å†³è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ <strong>docker çš„æ•°æ®å·</strong></p>
<h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>ä¸€ï¼‰å®¹å™¨æŒä¹…åŒ–</p>
<p>äºŒï¼‰å®¹å™¨é—´ç»§æ‰¿ + æ•°æ®å…±äº«</p>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><blockquote>
<p>å·å°±æ˜¯ç›®å½•æˆ–æ–‡ä»¶ï¼Œå­˜åœ¨äºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­ï¼Œç”± Docker æŒ‚è½½åˆ°å®¹å™¨ï¼Œä½†ä¸å±äºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤å¯ä»¥èƒ½å¤Ÿç»•è¿‡ UnionFS æä¾›çš„ä¸€äº›ç”¨äºæŒä¹…å­˜å‚¨æˆ–å…±äº«æ•°æ®çš„ç‰¹æ€§ã€‚\<br>å·è®¾è®¡çš„ç›®çš„å°±æ˜¯æ•°æ®çš„æŒä¹…åŒ–ï¼Œå®Œå…¨ç‹¬ç«‹äºå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤ Docker ä¸ä¼šåœ¨åˆ é™¤å®¹å™¨æ—¶åˆ é™¤å…¶æŒ‚è½½çš„æ•°æ®å·ã€‚</p>
</blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ•°æ®å·å¯åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</li>
<li>å·ä¸­çš„æ›´æ”¹å¯ä»¥ç›´æ¥ç”Ÿæ•ˆ</li>
<li>æ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­</li>
<li>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­å¤§æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢</li>
</ol>
<h2 id="ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·"><a href="#ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·" class="headerlink" title="ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·"></a>ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·</h2><p><strong>docker run -it -v /å®¿ä¸»æœºæ–‡ä»¶ç»å¯¹è·¯å¾„:/å®¹å™¨å†…è·¯å¾„ é•œåƒå</strong></p>
<p>ã€Œæ¼”ç¤ºï¼šæŸ¥çœ‹æ•°æ®å·æŒ‚è½½æ˜¯å¦æˆåŠŸã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># ä»¥æ•°æ®å·æŒ‚è½½æ–¹å¼é‡æ–°å¯åŠ¨å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># -----------------------------------------------------------------</span></span><br><span class="line"><span class="hljs-comment"># docker run -it -v ~/Learning/docker-note/host-data-volumes:/container-data-volumes centos</span></span><br><span class="line"><span class="hljs-comment"># PSï¼šä¸€å®šè¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå®¿ä¸»æœºç›®å½•å’Œå®¹å™¨ç›®å½•è‹¥ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æŸ¥çœ‹å®¿ä¸»æœºæ–‡ä»¶</span></span><br><span class="line"><span class="hljs-comment"># -----------------------------------------------------------------</span></span><br><span class="line"><span class="hljs-comment"># pwd</span></span><br><span class="line">/Users/harry/Learning/docker-note</span><br><span class="line"><span class="hljs-comment"># ll</span></span><br><span class="line">total 80</span><br><span class="line">-rw-r--r--@ 1 harry  staff    26K  4 15 21:12 README.md</span><br><span class="line">-rw-r--r--  1 harry  staff    12K  3  6 01:36 anaconda-post.log</span><br><span class="line">drwxr-xr-x  2 harry  staff    64B  4 15 21:11 host-data-volumes <span class="hljs-comment"># è¢«æ–°åˆ›å»ºçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">drwxr-xr-x  5 harry  staff   160B  4 15 01:14 img</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ–‡ä»¶</span></span><br><span class="line"><span class="hljs-comment"># -----------------------------------------------------------------</span></span><br><span class="line"><span class="hljs-comment"># pwd</span></span><br><span class="line">/</span><br><span class="line"><span class="hljs-comment"># ll</span></span><br><span class="line">total 56</span><br><span class="line">-rw-r--r--   1 root root 12082 Mar  5 17:36 anaconda-post.log</span><br><span class="line">lrwxrwxrwx   1 root root     7 Mar  5 17:34 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x   2 root root    64 Apr 15 13:11 container-data-volumes <span class="hljs-comment"># è¢«åˆ›å»ºçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">drwxr-xr-x   5 root root   360 Apr 15 13:11 dev</span><br><span class="line">drwxr-xr-x   1 root root  4096 Apr 15 13:11 etc</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<figure class="highlight gradle hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ ã€Œdocker <span class="hljs-keyword">inspect</span> å®¹å™¨IDã€ æŸ¥çœ‹å®¹å™¨æ˜¯å¦æŒ‚è½½æˆåŠŸ</span><br></pre></td></tr></table></figure>
<p><img src="http://img.yuzh.xyz/docker-note/1555334292716.jpg" alt="å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®å·å·²ç»æˆåŠŸç»‘å®šäº†ã€‚"></p>
<p>ã€Œæ¼”ç¤ºï¼šå®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´å…±äº«æ•°æ®ã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥çœ‹å®¿ä¸»æœºæ•°æ®å·ç»‘å®šæ–‡ä»¶è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line"><span class="hljs-comment"># pwd</span></span><br><span class="line">/Users/harry/Learning/docker-note/host-data-volumes</span><br><span class="line"><span class="hljs-comment"># ll</span></span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># -----------------------------------------------------</span></span><br><span class="line"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨ä¸­æ•°æ®å·ç»‘å®šæ–‡ä»¶è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line"><span class="hljs-comment"># pwd</span></span><br><span class="line">/container-data-volumes</span><br><span class="line"><span class="hljs-comment"># ll</span></span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># -----------------------------------------------------</span></span><br><span class="line"><span class="hljs-comment"># åˆ†åˆ«åœ¨å®¿ä¸»æœºå’Œå®¹å™¨æ•°æ®å·ç»‘å®šçš„ç›®å½•ä¸­åˆ›å»ºä¸åŒçš„æ–‡ä»¶ï¼Œè§‚å¯Ÿæ–‡ä»¶æ˜¯å¦åŒæ­¥è¿‡å»äº†</span></span><br><span class="line"><span class="hljs-comment"># åœ¨å®¿ä¸»æœºåˆ›å»ºæ–‡ä»¶ touch host.txt &amp;&amp; ll</span></span><br><span class="line">-rw-r--r--  1 harry  staff     0B  4 15 21:25 host.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># åœ¨å®¹å™¨ä¸­åˆ›å»ºæ–‡ä»¶ touch contianer.txt &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 15 13:26 contianer.txt <span class="hljs-comment"># å®¹å™¨åˆ›å»ºçš„</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 15 13:25 host.txt <span class="hljs-comment"># å‰é¢å®¿ä¸»æœºåˆ›å»ºçš„</span></span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶åˆ›å»ºæˆåŠŸäº†å¹¶ä¸”åˆšåˆšåœ¨å®¿ä¸»æœºåˆ›å»ºçš„æ–‡ä»¶å·²ç»åŒæ­¥åˆ°äº†å®¹å™¨ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å†è§‚å¯Ÿå®¿ä¸»æœºæœ‰æ²¡æœ‰åŒæ­¥å®¹å™¨çš„æ–‡ä»¶è¿‡æ¥ ll</span></span><br><span class="line">-rw-r--r--  1 harry  staff     0B  4 15 21:26 contianer.txt</span><br><span class="line">-rw-r--r--  1 harry  staff     0B  4 15 21:25 host.txt</span><br></pre></td></tr></table></figure>
<p>ã€Œæ¼”ç¤ºï¼šå®¹å™¨åœæ­¢åï¼Œä¸»æœºä¿®æ”¹åçš„æ•°æ®æ˜¯å¦ä¼šåŒæ­¥åˆ°å®¹å™¨ä¸­ã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åœæ­¢å®¹å™¨ / æˆ–è€…åˆ é™¤å®¹å™¨é‡æ–°å»ºç«‹æ•°æ®å·ï¼ˆå®¿ä¸»æœºçš„ç›®å½•ä¸å˜ï¼‰</span></span><br><span class="line"><span class="hljs-comment"># exit</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å®¿ä¸»æœºä¿®æ”¹æ–‡ä»¶ï¼š echo 'host update' &gt;&gt; host.txt &amp;&amp; cat host.txt</span></span><br><span class="line">host update</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å¯åŠ¨å®¹å™¨ï¼ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="hljs-comment"># docker start 30a574c0dbe1</span></span><br><span class="line"><span class="hljs-comment"># docker attach 30a574c0dbe1</span></span><br><span class="line"><span class="hljs-comment"># cd container-data-volumes/ &amp;&amp; cat host.txt</span></span><br><span class="line">host update</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°å†…å®¹ä¿®æ”¹æˆåŠŸåŒæ­¥è¿‡æ¥ï¼Œé‡æ–°åˆ›å»ºçš„å®¹å™¨æ–‡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ä¼šè¢«åŒæ­¥è¿‡æ¥ã€‚</span></span><br></pre></td></tr></table></figure>
<p>ã€Œæ¼”ç¤ºï¼šä½¿ç”¨å¸¦æƒé™çš„æŒ‚è½½å‘½ä»¤ã€</p>
<p><strong>docker run -it -v /å®¿ä¸»æœºæ–‡ä»¶ç»å¯¹è·¯å¾„:/å®¹å™¨å†…è·¯å¾„:ro é•œåƒå</strong></p>
<ul>
<li><code>:ro</code> read only</li>
</ul>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åˆ é™¤åˆšåˆšåˆ›å»ºçš„å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker rm -f $(docker ps -aq)</span></span><br><span class="line"><span class="hljs-comment"># å¸¦æƒé™çš„æŒ‚è½½æ•°æ®å·</span></span><br><span class="line"><span class="hljs-comment"># docker run -it -v ~/Learning/docker-note/host-data-volumes/:/container-data-volumes:ro centos</span></span><br><span class="line"><span class="hljs-comment"># ä¾æ—§æŸ¥çœ‹å®¿ä¸»æœºæ–‡ä»¶æ˜¯å¦åŒæ­¥åˆ°ä½</span></span><br><span class="line"><span class="hljs-comment"># cd container-data-volumes/ &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root  0 Apr 15 13:26 contianer.txt</span><br><span class="line">-rw-r--r-- 1 root root 12 Apr 15 13:32 host.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é‡ç‚¹æ¥äº†ï¼Œå®¹å™¨ä¿®æ”¹å…±äº«æ–‡ä»¶å¤¹ï¼ˆæ•°æ®å·ï¼‰çš„æ•°æ®</span></span><br><span class="line"><span class="hljs-comment"># touch modify.txt</span></span><br><span class="line">touch: cannot touch <span class="hljs-string">'modify.txt'</span>: Read-only file system</span><br></pre></td></tr></table></figure>
<p><code>:vo</code> é™åˆ¶äº†å®¹å™¨å¯¹æ•°æ®å·çš„å†™æƒé™ï¼Œä½¿å¾—å®¹å™¨åªèƒ½å¤Ÿè¯»æ•°æ®ã€‚æŸ¥çœ‹ <code>docker inspect 75b1409b8a9e</code>:</p>
<p><img src="http://img.yuzh.xyz/docker-note/1555336040258.jpg" alt></p>
<h2 id="ä½¿ç”¨äºŒï¼š-DockerFile-æŒ‚è½½æ•°æ®å·"><a href="#ä½¿ç”¨äºŒï¼š-DockerFile-æŒ‚è½½æ•°æ®å·" class="headerlink" title="ä½¿ç”¨äºŒï¼š DockerFile æŒ‚è½½æ•°æ®å·"></a>ä½¿ç”¨äºŒï¼š DockerFile æŒ‚è½½æ•°æ®å·</h2><p>DockerFile çš„æ¦‚å¿µå…ˆä¸è®¨è®ºï¼Œé‡ç‚¹åœ¨äºæ€ä¹ˆä½¿ç”¨ DockerFile å®ç°å®¿ä¸»æœºä¸å®¹å™¨ä¹‹é—´çš„ç›®å½•æŒ‚è½½ã€‚</p>
<p>ã€Œæ­¥éª¤ã€</p>
<p><strong>1ï¼‰åˆ›å»º DockerFile æ‰€å±ç›®å½•</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir dockerfile-volumes &amp;&amp; ll</span><br><span class="line">total 88</span><br><span class="line">-rw-r--r--@ 1 harry  staff    29K  4 17 23:46 README.md</span><br><span class="line">-rw-r--r--  1 harry  staff    12K  3  6 01:36 anaconda-post.log</span><br><span class="line">drwxr-xr-x  2 harry  staff    64B  4 17 23:48 dockerfile-volumes <span class="hljs-comment"># å­˜æ”¾ DockerFile çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">drwxr-xr-x  4 harry  staff   128B  4 17 23:22 host-data-volumes</span><br><span class="line">drwxr-xr-x  7 harry  staff   224B  4 15 21:47 img</span><br></pre></td></tr></table></figure>
<p><strong>2ï¼‰ ç¼–å†™ Dockerfile æ–‡ä»¶ï¼Œåœ¨ DockerFile ä¸­é€šè¿‡ <code>VOLUME</code> æŒ‡ä»¤ç»™é•œåƒæ·»åŠ ã€Œä¸€ä¸ªæˆ–å¤šä¸ªã€æ•°æ®å·ã€‚</strong></p>
<figure class="highlight avrasm hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-symbol">PS:</span> ä»¥å‘½ä»¤æ–¹å¼åªèƒ½æŒ‚è½½ä¸€ä¸ªæ•°æ®å·</span><br></pre></td></tr></table></figure>
<p>cd dockerfile-volumes &amp;&amp; touch Dockerfile</p>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹<br><figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># Volume Dockerfile æ–¹å¼æŒ‚è½½æ•°æ®å·æµ‹è¯•</span></span><br><span class="line">FROM centos</span><br><span class="line"><span class="hljs-comment"># æŒ‚è½½å‘½ä»¤</span></span><br><span class="line">VOLUME [<span class="hljs-string">"/data-volumes-container1"</span>,<span class="hljs-string">"/data-volumes-container2"</span>]</span><br><span class="line">CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">"image is building..."</span></span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure></p>
<p>PSï¼šVOLUMEå‘½ä»¤æŒ‡å®šäº†åˆ†åˆ«åœ¨å®¹å™¨ä¸ŠæŒ‚è½½ä¸¤ä¸ªç›®å½•ï¼š<code>/data-volumes-container1</code> / <code>/data-volumes-container2</code>ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šå®¿ä¸»æœºç›®å½•ã€‚è¿™æ˜¯å› ä¸ºä¸€ä¸ªé•œåƒä¼šè¢«ä¸åŒçš„å®¿ä¸»æœºè¿è¡Œï¼Œä½†æ˜¯å®¿ä¸»æœºè·¯å¾„ä¸æ˜¯æ¯ä¸ªæ‰§è¡Œé•œåƒçš„å®¿ä¸»æœºéƒ½æ˜¯ç›¸åŒçš„ã€‚<strong>é€šè¿‡ DockerFile æŒ‚è½½çš„æ•°æ®å·å®¿ä¸»æœºç›®å½•ä¼šè¢«é»˜è®¤åˆ†é…ã€‚</strong></p>
<p><strong>3ï¼‰æ‰§è¡Œæ„å»ºå‘½ä»¤ docker build -f /Dockerfileåï¼ˆè·¯å¾„ï¼‰ -t é•œåƒå:TAG .</strong></p>
<ul>
<li><code>-f</code>ï¼šæŒ‡å®š Dockerfile åï¼ˆè·¯å¾„ï¼‰ï¼Œå¦‚æœå°±åœ¨å½“å‰ç›®å½•æ‰§è¡Œå¯ä»¥ä¸åŠ ã€‚</li>
<li><code>-t</code>ï¼šæŒ‡å®šé•œåƒå</li>
</ul>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker build -f ~/Learning/docker-note/dockerfile-volumes/Dockerfile -t yuzh/centos:v1 .</span></span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/4 : FROM centos</span><br><span class="line"> ---&gt; 9f38484d220f</span><br><span class="line">Step 2/4 : VOLUME [<span class="hljs-string">'/data-volumes-container1'</span>,<span class="hljs-string">'data-volumes-container2'</span>] <span class="hljs-comment"># æŒ‚è½½å‘½ä»¤</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 0ad66b7ad4f9</span><br><span class="line">Removing intermediate container 0ad66b7ad4f9</span><br><span class="line"> ---&gt; 1fad13e698d5</span><br><span class="line">Step 3/4 : CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">"image is building..."</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 2a90e6187e24</span><br><span class="line">Removing intermediate container 2a90e6187e24</span><br><span class="line"> ---&gt; fc3713190c97</span><br><span class="line">Step 4/4 : CMD /bin/bash</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 2a361cb58947</span><br><span class="line">Removing intermediate container 2a361cb58947</span><br><span class="line"> ---&gt; 31f766043abf</span><br><span class="line">Successfully built 31f766043abf</span><br><span class="line">Successfully tagged yuzh/centos:v1</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker image ls</span></span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">yuzh/centos          v1                  31f766043abf        33 seconds ago      202MB</span><br><span class="line">izhiliu/tomcat2      v2                  cf18ff34c415        2 days ago          465MB</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker run -it yuzh/centos:v1 è¿è¡Œæ„å»ºçš„é•œåƒæŸ¥çœ‹æ•°æ®å·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="hljs-comment"># ll</span></span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 17 16:24 data-volumes-container1</span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 17 16:24 data-volumes-container2</span><br></pre></td></tr></table></figure>
<p><strong>4ï¼‰<code>docker inspect å®¹å™¨ID</code> æŸ¥çœ‹å®¿ä¸»æœºä½ç½®ï¼ŒéªŒè¯æ•°æ®å…±äº«</strong></p>
<p><img src="http://img.yuzh.xyz/docker-note/WX20190418-003627@2x.png" alt></p>
<h2 id="ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«"><a href="#ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«" class="headerlink" title="ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«"></a>ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«</h2><p>å®ç°å®¹å™¨é—´æ•°æ®å…±äº«çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p>
<p><strong>docker run -it â€“volumes-from çˆ¶å®¹å™¨ID é•œåƒID</strong></p>
<p>ã€Œæ¼”ç¤ºã€</p>
<p>æ²¿ç”¨ä¹‹å‰é€šè¿‡ Dockerfile åˆ›å»ºçš„é•œåƒ</p>
<p><strong>ä¸€ï¼‰ç»§æ‰¿ä¸è¢«ç»§æ‰¿å®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ï¼š</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å¯åŠ¨ç¬¬ä¸€ä¸ªå®¹å™¨ï¼Œä½œä¸ºçˆ¶å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker run -it --name container01 yuzh/centos:v1</span></span><br><span class="line"><span class="hljs-comment"># ll è‡ªç„¶è€Œç„¶çš„å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ•°æ®å·æ–‡ä»¶</span></span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 18 16:19 data-volumes-container1</span><br><span class="line">drwxr-xr-x   2 root root  4096 Apr 18 16:19 data-volumes-container2</span><br><span class="line"><span class="hljs-comment"># è¿›å» data-volumes-container1ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="hljs-comment"># touch container01.txt &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:21 container01.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ä¸åœæ­¢é€€å‡ºï¼Œåˆ›å»ºç¬¬äºŒä¸ªå®¹å™¨ï¼Œç»§æ‰¿ç¬¬ä¸€ä¸ªå®¹å™¨ä½œä¸ºæ•°æ®å·å®¹å™¨</span></span><br><span class="line"><span class="hljs-comment"># docker run -it --name container02 --volumes-from container01 yuzh/centos:v1</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:21 container01.txt</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°å®¹å™¨1åˆ›å»ºçš„æ–‡ä»¶åŒæ­¥è¿‡æ¥äº†ï¼Œåœ¨å®¹å™¨2åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè§‚å¯Ÿå®¹å™¨1æ˜¯å¦åŒæ­¥ï¼š</span></span><br><span class="line"><span class="hljs-comment"># touch container01.txt</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker attach container01</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br></pre></td></tr></table></figure>
<p><strong>äºŒï¼‰ç›¸åŒçˆ¶å®¹å™¨çš„ä¸åŒå­å®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åˆ›å»ºç¬¬ä¸‰ä¸ªå®¹å™¨ï¼Œç»§æ‰¿å®¹å™¨1ï¼Œæ“ä½œå®¹å™¨3ï¼Œè§‚å¯Ÿå®¹å™¨1ã€2æ˜¯å¦éƒ½æœ‰æ•°æ®</span></span><br><span class="line"><span class="hljs-comment"># docker run -it --name container03 --volumes-from container01 yuzh/centos:v1</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br><span class="line"><span class="hljs-comment"># è‡ªç„¶çš„çœ‹åˆ°äº†å®¹å™¨1ã€2ä¹‹é—´å…±äº«çš„æ•°æ®ï¼Œåœ¨å®¹å™¨3åˆ›å»ºæ–‡ä»¶ï¼š</span></span><br><span class="line"><span class="hljs-comment"># touch container03.txt</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å®¹å™¨1è‚¯å®šæ˜¯æœ‰æ­¤æ–‡ä»¶çš„ï¼Œå› ä¸ºå®¹å™¨3æ˜¯æŒ‚è½½åœ¨å®¹å™¨1ä¹‹ä¸Šçš„ã€‚</span></span><br><span class="line"><span class="hljs-comment"># docker attach container01</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:34 container03.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é—®é¢˜æ¥äº†ï¼šå®¹å™¨2ä¼šæœ‰ container03.txt å—ï¼Ÿ</span></span><br><span class="line"><span class="hljs-comment"># docker attach container02</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:34 container03.txt</span><br><span class="line"><span class="hljs-comment"># ä¹Ÿæ˜¯æœ‰çš„</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¸‰ï¼‰åˆ é™¤çˆ¶å®¹å™¨ï¼Œä¸¤ä¸ªå­å®¹å™¨ä¹‹é—´çš„æ•°æ®è¿˜ä¼šå…±äº«å—ï¼Ÿ</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker ps</span></span><br><span class="line">0bce4751cdf2        yuzh/centos:v1      <span class="hljs-string">"/bin/sh -c /bin/bash"</span>   7 minutes ago       Up 7 minutes                            container03</span><br><span class="line">98d3db76ca2c        yuzh/centos:v1      <span class="hljs-string">"/bin/sh -c /bin/bash"</span>   16 minutes ago      Up 16 minutes                           container02</span><br><span class="line">fb12544f689b        yuzh/centos:v1      <span class="hljs-string">"/bin/sh -c /bin/bash"</span>   21 minutes ago      Up 21 minutes                           container0</span><br><span class="line"><span class="hljs-comment"># docker rm -f 0bce4751cdf2</span></span><br><span class="line">0bce4751cdf2</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># è¿›å…¥å®¹å™¨2ï¼Œä¿®æ”¹æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="hljs-comment"># docker attach container02</span></span><br><span class="line"><span class="hljs-comment"># touch container02-update.txt &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:42 container02-update.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:34 container03.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># okï¼Œè¿›å…¥å®¹å™¨3ï¼Œè§‚å¯Ÿæ˜¯å¦æœ‰ container02-update.txt</span></span><br><span class="line"><span class="hljs-comment"># [control + p + q]</span></span><br><span class="line"><span class="hljs-comment"># docker exec -it fb12544f689b /bin/bash</span></span><br><span class="line"><span class="hljs-comment"># cd data-volumes-container1 &amp;&amp; ll</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container01.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:42 container02-update.txt <span class="hljs-comment"># å®¹å™¨2åˆ›å»ºçš„</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:27 container02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Apr 18 16:34 container03.txt</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å—¯ï¼Œæœ‰ç‚¹ä¸œè¥¿ï½</span></span><br><span class="line"><span class="hljs-comment"># å®¹å™¨3ä¿®æ”¹æ–‡ä»¶è¿›å»å®¹å™¨2æŸ¥çœ‹ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ä¼šè¢«åŒæ­¥ï¼Œä¸é‡å¤äº†ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure>
<p><strong>ç»“è®ºï¼šå®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢ã€‚</strong></p>
<h1 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h1><blockquote>
<p>DockerFile æ˜¯ç”¨æ¥æ„å»º Docker é•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€ç³»åˆ—å‚æ•°å’Œå‘½ä»¤æ„æˆçš„è„šæœ¬ã€‚</p>
</blockquote>
<p><strong>DockerFile è§„åˆ™</strong></p>
<ul>
<li>æ¯æ¡ä¿ç•™å­—æŒ‡ä»¤éƒ½å¿…é¡»ä¸ºå¤§å†™å­—æ¯ä¸”åé¢è¦è‡³å°‘åŒ…å«ä¸€ä¸ªå‚æ•°</li>
<li>æŒ‡ä»¤æŒ‰ç…§ä»ä¸Šå¾€ä¸‹ï¼Œé¡ºåºæ‰§è¡Œã€‚</li>
<li>æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œå¹¶å¯¹é•œåƒè¿›è¡Œæäº¤ã€‚</li>
</ul>
<p><strong>DockerFile æ‰§è¡Œæµç¨‹</strong></p>
<ol>
<li>docker ä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li>
<li>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤å¹¶å¯¹å®¹å™¨ä½œå‡ºä¿®æ”¹</li>
<li>æ‰§è¡Œç±»ä¼¼äº docker commit çš„æ“ä½œæäº¤ä¸€ä¸ªæ–°é•œåƒå±‚</li>
<li>docker å†åŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨</li>
<li>æ‰§è¡Œ dockerfile ä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ç›´åˆ°æ‰€æœ‰æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæˆ</li>
</ol>
<blockquote>
<p>ä»åº”ç”¨è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒDockerFileã€Docker é•œåƒã€Docker å®¹å™¨åˆ†åˆ«ä»£è¡¨è½¯ä»¶çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ</p>
<ul>
<li>DockerFile æ˜¯è½¯ä»¶çš„åŸææ–™ </li>
<li>Docker é•œåƒæ—¶è½¯ä»¶çš„äº¤ä»˜å“ </li>
<li>Docker å®¹å™¨åˆ™å¯ä»¥è®¤ä¸ºæ˜¯è½¯ä»¶çš„è¿è¡Œæ€ </li>
</ul>
<p>DockerFile é¢å‘å¼€å‘ï¼ŒDocker é•œåƒæˆä¸ºäº¤ä»˜æ ‡å‡†ï¼ŒDocker å®¹å™¨è®¾è®¡éƒ¨ç½²ä¸è¿ç»´ã€‚ä¸‰è€…ç¼ºä¸€ä¸å¯ï¼ŒåˆåŠ›å……å½“ Docker ä½“ç³»çš„åŸºçŸ³ã€‚</p>
</blockquote>
<h2 id="DockerFile-æŒ‡ä»¤"><a href="#DockerFile-æŒ‡ä»¤" class="headerlink" title="DockerFile æŒ‡ä»¤"></a>DockerFile æŒ‡ä»¤</h2><p><strong>FROM</strong></p>
<p>åŸºç¡€é•œåƒï¼Œå½“å‰æ–°é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒçš„ã€‚</p>
<p><strong>MAINTAINER</strong></p>
<p>é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</p>
<p><strong>RUN</strong></p>
<p>å®¹å™¨æ„å»ºæ—¶éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</p>
<p><strong>EXPOSE</strong></p>
<p>å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²çš„ç«¯å£å·</p>
<p><strong>WORKDIR</strong></p>
<p>æŒ‡å®šåœ¨å®¹å™¨åˆ›å»ºåï¼Œç»ˆç«¯ç™»é™†è¿›æ¥åé»˜è®¤çš„å·¥ä½œç›®å½•ï¼Œä¸€ä¸ªè½è„šç‚¹ã€‚</p>
<p><strong>ENV</strong></p>
<p>åœ¨æ„å»ºæ—¶è®¾ç½®ç¯å¢ƒå˜é‡</p>
<figure class="highlight dockerfile hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">ENV</span> MY_PATH /usr/mytest</span><br><span class="line">è¿™ä¸ªç¯å¢ƒå˜é‡å¯ä»¥åœ¨åç»­çš„ä»»ä½• <span class="hljs-keyword">RUN</span><span class="hljs-bash"> æŒ‡ä»¤ä¸­ä½¿ç”¨ï¼Œå¦‚åŒåœ¨å‘½ä»¤å‰é¢æŒ‡å®šäº†ç¯å¢ƒå˜é‡å‰ç¼€ä¸€æ ·ã€‚</span></span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥åœ¨å…¶ä»–æŒ‡ä»¤ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå¦‚ï¼š</span><br><span class="line"><span class="hljs-keyword">WORKDIR</span><span class="hljs-bash"> <span class="hljs-variable">$&#123;MY_PATH&#125;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>ADD</strong></p>
<p>å°†å®¿ä¸»æœºä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸” ADD å‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç† URL å’Œè§£å‹ tar å‹ç¼©åŒ…</p>
<p><strong>COPY</strong></p>
<p>ç±»ä¼¼äº ADDï¼Œæ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒä¸­ã€‚</p>
<p>å°†ä»ã€Œæ„å»ºä¸Šä¸‹æ–‡ã€ç›®å½•ä¸­çš„æ–‡ä»¶/ç›®å½•ï¼Œå¤åˆ¶åˆ°æ–°çš„ä¸€å±‚é•œåƒçš„ç›®å½•ä¸­</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY <span class="hljs-built_in">source</span> target       <span class="hljs-comment"># shell æ ¼å¼</span></span><br><span class="line">COPY [<span class="hljs-string">'source'</span>,<span class="hljs-string">'target'</span>] <span class="hljs-comment"># exec æ ¼å¼</span></span><br></pre></td></tr></table></figure>
<p><strong>VOLUME</strong></p>
<p>å®¹å™¨æ•°æ®å·ï¼Œç”¨äºæ•°æ®ä¿å­˜å’ŒæŒä¹…åŒ–ã€‚</p>
<p><strong>CMD</strong></p>
<p>æŒ‡å®šä¸€ä¸ªå®¹å™¨ã€Œå¯åŠ¨ã€æ—¶è¦è¿è¡Œçš„å‘½ä»¤</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CMD &lt;å‘½ä»¤&gt;                            <span class="hljs-comment"># shell</span></span><br><span class="line">CMD [<span class="hljs-string">'å¯æ‰§è¡Œæ–‡ä»¶'</span>,<span class="hljs-string">'å‚æ•°1'</span>,<span class="hljs-string">'å‚æ•°2'</span>...]   <span class="hljs-comment"># exec</span></span><br></pre></td></tr></table></figure>
<p>DockerFile ä¸­å¯ä»¥æœ‰å¤šä¸ª CMD å‘½ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚CMD ä¼šè¢« <code>docker run</code> ä¹‹åçš„å‚æ•°æ›¿æ¢ã€‚</p>
<p><strong>ENTERPOINT</strong></p>
<p>æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼ŒENTRYPOINT çš„ç›®çš„å’Œ CMD ä¸€æ ·ï¼Œéƒ½æ˜¯æŒ‡å®šå®¹å™¨å¯åŠ¨å‘½ä»¤å’Œå‚æ•°ã€‚</p>
<p>ENTRYPOINT ä¸ CMD çš„åŒºåˆ«åœ¨äºï¼š<strong>è‹¥å­˜åœ¨å¤šä¸ª CMD æŒ‡ä»¤ï¼Œdocker build æ—¶åªä¼šä»¥æœ€åä¸€æ¡ CMD ä¸ºå‡†ï¼Œè€Œ ENTRYPOINT åˆ™æ˜¯è¿½åŠ ã€‚</strong></p>
<p><strong>ONBUILD</strong></p>
<p>å¦‚æœå½“å‰é•œåƒæ˜¯ä¸€ä¸ªçˆ¶é•œåƒï¼Œå¹¶ä¸” DockerFile ä¸­å­˜åœ¨ ONBUILD æŒ‡ä»¤ï¼Œé‚£ä¹ˆå­é•œåƒ build åä¼šã€Œè§¦å‘ã€çˆ¶é•œåƒçš„ ONBUILD æŒ‡ä»¤ï¼Œç›¸å½“äºçˆ¶é•œåƒæ‰§è¡Œä¸€äº›å­é•œåƒæ„å»ºä¹‹åçš„æ”¶å°¾æ“ä½œã€‚</p>
<h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="Baseé•œåƒï¼ˆscratchï¼‰"><a href="#Baseé•œåƒï¼ˆscratchï¼‰" class="headerlink" title="Baseé•œåƒï¼ˆscratchï¼‰"></a>Baseé•œåƒï¼ˆscratchï¼‰</h3><p>Docker Hub ä¸­ 99% çš„é•œåƒéƒ½æ˜¯é€šè¿‡åœ¨ base é•œåƒä¸­å®‰è£…å’Œé…ç½®éœ€è¦çš„è½¯ä»¶æ„å»ºå‡ºæ¥çš„ã€‚</p>
<h3 id="è‡ªå®šä¹‰é•œåƒ-my-centos"><a href="#è‡ªå®šä¹‰é•œåƒ-my-centos" class="headerlink" title="è‡ªå®šä¹‰é•œåƒ my-centos"></a>è‡ªå®šä¹‰é•œåƒ my-centos</h3><p>ç›®çš„ï¼šç»ƒä¹ åŸºç¡€æŒ‡ä»¤</p>
<p>éœ€æ±‚ï¼šè¿›å…¥ centos é•œåƒä¸­ï¼Œä¼šå‘ç°ï¼š</p>
<ul>
<li>å·¥ä½œç›®å½•æ˜¯ <code>/</code> æ ¹ç›®å½•</li>
<li>ä¸æ”¯æŒ <code>vim</code> å‘½ä»¤</li>
<li>ä¸æ”¯æŒ <code>ifconfig</code> å‘½ä»¤</li>
</ul>
<p>è¿™æ˜¯å› ä¸º centos é•œåƒæ˜¯ä¸€ä¸ªæœ€åŸºç¡€çš„é•œåƒï¼Œå…±ç”¨æœ¬æœºç³»ç»Ÿå†…æ ¸ï¼Œå»é™¤äº†ä¸æ˜¯å¿…é¡»çš„ä¸€äº›è½¯ä»¶åŠå‘½ä»¤æˆ–åŠŸèƒ½ã€‚æˆ‘ä»¬çš„éœ€æ±‚æ˜¯è‡ªå·±æ„å»ºä¸€ä¸ª centos é•œåƒï¼Œä½¿å…¶é»˜è®¤è¿›å…¥æˆ‘ä»¬æŒ‡å®šçš„å·¥ä½œç›®å½•ï¼Œå¹¶æ”¯æŒä»¥ä¸Šä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># pwd</span></span><br><span class="line">/Users/harry/Learning/docker-note/docker-file</span><br><span class="line"><span class="hljs-comment"># touch DockerFile &amp;&amp; ll</span></span><br><span class="line">-rw-r--r--  1 harry  staff     0B  4 24 00:33 DockerFile</span><br></pre></td></tr></table></figure>
<p><strong>ã€Œç¼–å†™ DockerFileã€</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># vim DockerFile</span></span><br><span class="line">FROM centos  <span class="hljs-comment"># æŒ‡å®šåŸºç¡€é•œåƒ</span></span><br><span class="line">MAINTAINER harry&lt;yuzh233@gmail.com&gt; <span class="hljs-comment"># è®¾ç½®é•œåƒæ„å»ºè€…ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">ENV MY_PATH /usr/<span class="hljs-built_in">local</span> <span class="hljs-comment"># è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡</span></span><br><span class="line">WORKDIR <span class="hljs-variable">$MY_PATH</span> <span class="hljs-comment"># æŒ‡å®šå·¥ä½œç›®å½•ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡</span></span><br><span class="line"></span><br><span class="line">RUN yum -y install vim <span class="hljs-comment"># æ‰§è¡Œå‘½ä»¤ï¼šå®‰è£… vim</span></span><br><span class="line">RUN yum -y install net-tools <span class="hljs-comment"># æ‰§è¡Œå‘½ä»¤ï¼šå®‰è£… net-tools</span></span><br><span class="line"></span><br><span class="line">EXPOSE 8088 <span class="hljs-comment"># æš´éœ²ç«¯å£</span></span><br><span class="line"></span><br><span class="line">CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">'my workdir is $MY_PATH'</span> <span class="hljs-comment"># å®¹å™¨å¯åŠ¨æ‰§è¡Œï¼šæ‰“å°å­—ç¬¦ä¸²</span></span><br><span class="line">CMD /bin/bash <span class="hljs-comment"># å®¹å™¨å¯åŠ¨çœŸæ­£æ‰§è¡Œçš„å‘½ä»¤</span></span><br></pre></td></tr></table></figure>
<p><strong>ã€Œæ‰§è¡Œæ„å»ºã€</strong></p>
<p><strong>docker build -f è·¯å¾„ -t é•œåƒå:TAG .</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker build -f DockerFile -t izhiliu/centos:v1 .</span></span><br><span class="line"><span class="hljs-comment"># DockerFile å°±åœ¨å½“å‰è·¯å¾„ä¸‹ï¼Œä¸ç”¨æŒ‡å®šç›®å½•</span></span><br><span class="line"></span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°ï¼Œæœ‰å‡ è¡Œ DockerFile å°±æ„å»ºå‡ å±‚é•œåƒã€‚</span></span><br><span class="line">Step 1/9 : FROM centos</span><br><span class="line"> ---&gt; 9f38484d220f</span><br><span class="line">Step 2/9 : MAINTAINER harry&lt;yuzh233@gmail.com&gt;</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 4966da40f5e8</span><br><span class="line">Removing intermediate container 4966da40f5e8</span><br><span class="line"> ---&gt; 32eb4f4c77ba</span><br><span class="line">Step 3/9 : ENV MY_PATH /usr/<span class="hljs-built_in">local</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 8b4d372d1404</span><br><span class="line">Removing intermediate container 8b4d372d1404</span><br><span class="line"> ---&gt; b412c79d5a02</span><br><span class="line">Step 4/9 : WORKDIR <span class="hljs-variable">$MY_PATH</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 42d2d2df5804</span><br><span class="line">Removing intermediate container 42d2d2df5804</span><br><span class="line"> ---&gt; 082bb5098dbf</span><br><span class="line">Step 5/9 : RUN yum -y install vim</span><br><span class="line"><span class="hljs-comment"># ......å¼€å§‹å®‰è£… vim v......</span></span><br><span class="line">Complete!</span><br><span class="line">Removing intermediate container 3536627f1160</span><br><span class="line"> ---&gt; 58f9bbd23b2e</span><br><span class="line">Step 6/9 : RUN yum -y install net-tools</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 3a6d39924e48</span><br><span class="line"><span class="hljs-comment">#  ...... å¼€å§‹å®‰è£… net-tools ......</span></span><br><span class="line">Complete!</span><br><span class="line">Removing intermediate container 3a6d39924e48</span><br><span class="line"> ---&gt; 2065a365b531</span><br><span class="line">Step 7/9 : EXPOSE 8088</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> b836df8bcfb6</span><br><span class="line">Removing intermediate container b836df8bcfb6</span><br><span class="line"> ---&gt; 190f68eeb2d8</span><br><span class="line">Step 8/9 : CMD <span class="hljs-built_in">echo</span> <span class="hljs-string">'my workdir is $MY_PATH'</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> cadea312695e</span><br><span class="line">Removing intermediate container cadea312695e</span><br><span class="line"> ---&gt; 8d6c248e24c9</span><br><span class="line">Step 9/9 : CMD /bin/bash </span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> e5ff383a4407</span><br><span class="line">Removing intermediate container e5ff383a4407</span><br><span class="line"> ---&gt; a8a7bed31bd7</span><br><span class="line"><span class="hljs-comment"># å‡ºç°ä¸‹é¢ä¸¤è¡Œä»£è¡¨æ„å»ºæˆåŠŸ</span></span><br><span class="line">Successfully built a8a7bed31bd7</span><br><span class="line">Successfully tagged izhiliu/centos:v1</span><br></pre></td></tr></table></figure>
<p><strong>ã€ŒéªŒè¯æ–°é•œåƒã€</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker images</span></span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">izhiliu/centos       v1                  87ebc03d1d90        32 seconds ago      425MB</span><br><span class="line"><span class="hljs-comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; é•œåƒæ„å»ºæˆåŠŸï¼</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker run -it 87ebc03d1d90</span></span><br><span class="line">[root@1bd54814f9c5 <span class="hljs-built_in">local</span>]<span class="hljs-comment"># pwd</span></span><br><span class="line">/usr/<span class="hljs-built_in">local</span></span><br><span class="line"><span class="hljs-comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; æ ¹ç›®å½•æŒ‡å®šæˆåŠŸï¼</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># touch file</span></span><br><span class="line"><span class="hljs-comment"># vim file -&gt; æœ‰æ•ˆ</span></span><br><span class="line"><span class="hljs-comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; vim å®‰è£…æˆåŠŸï¼</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:ac:11:00:02  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 12  bytes 968 (968.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"><span class="hljs-comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; net-tools å®‰è£…æˆåŠŸï¼</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker history izhiliu/centos:v1</span></span><br><span class="line"><span class="hljs-comment"># æ‰§è¡Œè¿™æ¡å‘½ä»¤å¯ä»¥çœ‹åˆ°æŸä¸ªé•œåƒçš„æ„å»ºè¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°é•œåƒä»å¤´åˆ°å°¾æ„å»ºï¼Œæ˜¾ç¤ºæ ¹æ®æ„å»ºæ—¶é—´å€’åºå±•ç¤ºã€‚</span></span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">87ebc03d1d90        14 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop)  CMD ["/bin/sh" "-c" "/binâ€¦   0B</span></span><br><span class="line">ddc2e1121ff8        14 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop)  CMD ["/bin/sh" "-c" "echoâ€¦   0B</span></span><br><span class="line">a1010b933008        14 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop)  EXPOSE 8088                  0B</span></span><br><span class="line">670892d19e9f        14 minutes ago      /bin/sh -c yum -y install net-tools             84.1MB</span><br><span class="line">fb03334297ef        14 minutes ago      /bin/sh -c yum -y install vim                   139MB</span><br><span class="line">daceee7c426b        15 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop) WORKDIR /usr/local            0B</span></span><br><span class="line">f39af63b22d3        15 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop)  ENV MY_PATH=/usr/local       0B</span></span><br><span class="line">ef7f5536cec3        15 minutes ago      /bin/sh -c <span class="hljs-comment">#(nop)  MAINTAINER harry&lt;yuzh233@â€¦   0B</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker inspect izhiliu/centos:v1 æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</span></span><br><span class="line">......</span><br><span class="line"><span class="hljs-string">"Author"</span>: <span class="hljs-string">"harry&lt;yuzh233@gmail.com&gt;"</span>,</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="CMD-ENTERPOINT-é•œåƒæ¡ˆä¾‹"><a href="#CMD-ENTERPOINT-é•œåƒæ¡ˆä¾‹" class="headerlink" title="CMD/ENTERPOINT é•œåƒæ¡ˆä¾‹"></a>CMD/ENTERPOINT é•œåƒæ¡ˆä¾‹</h3><p><strong>ä¸€ï¼‰DockerFile ä¸­å¯ä»¥æœ‰ä¸å¤šä¸ª <code>CMD</code> æŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚å¹¶ä¸”æœ€åä¸€ä¸ª CMD æŒ‡ä»¤ä¼šè¢« <code>docker run</code> ä¹‹åçš„å‚æ•°æ›¿æ¢ï¼ˆå¦‚æœæœ‰ï¼‰</strong></p>
<p>ã€Œæ¼”ç¤ºã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥çœ‹ tomcat å®˜æ–¹ DockerFileï¼Œæœ€åä¸€è¡Œï¼š</span></span><br><span class="line">CMD [<span class="hljs-string">"catalina.sh"</span>, <span class="hljs-string">"run"</span>] </span><br><span class="line"><span class="hljs-comment"># tomcat å®¹å™¨å°±æ˜¯é€šè¿‡è¿™è¡Œå‘½ä»¤å¯åŠ¨èµ·æ¥çš„ï¼Œæˆ‘ä»¬è¯•ç€åœ¨å¯åŠ¨æ—¶æŒ‡å®šå…¶ä»–å‘½ä»¤ï¼š</span></span><br><span class="line">docker run -it --name cat -p 7070:8080 tomcat ls -l</span><br><span class="line"><span class="hljs-comment"># æˆ‘ä»¬ç”¨ ls -l å‘½ä»¤æ›¿æ¢æ‰äº† ["catalina.sh", "run"]</span></span><br><span class="line">total 152</span><br><span class="line">-rw-r--r-- 1 root root  19539 Apr 10 14:33 BUILDING.txt</span><br><span class="line">-rw-r--r-- 1 root root   6090 Apr 10 14:33 CONTRIBUTING.md</span><br><span class="line">-rw-r--r-- 1 root root  57092 Apr 10 14:33 LICENSE</span><br><span class="line">-rw-r--r-- 1 root root   1726 Apr 10 14:33 NOTICE</span><br><span class="line">-rw-r--r-- 1 root root   3255 Apr 10 14:33 README.md</span><br><span class="line">-rw-r--r-- 1 root root   7139 Apr 10 14:33 RELEASE-NOTES</span><br><span class="line">-rw-r--r-- 1 root root  16262 Apr 10 14:33 RUNNING.txt</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 13 00:10 bin</span><br><span class="line">drwxr-sr-x 2 root root   4096 Apr 10 14:33 conf</span><br><span class="line">drwxr-sr-x 2 root staff  4096 Apr 13 00:10 include</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 13 00:09 lib</span><br><span class="line">drwxrwxrwx 2 root root   4096 Apr 10 14:31 logs</span><br><span class="line">drwxr-sr-x 3 root staff  4096 Apr 13 00:10 native-jni-lib</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 13 00:09 temp</span><br><span class="line">drwxr-xr-x 7 root root   4096 Apr 10 14:31 webapps</span><br><span class="line">drwxrwxrwx 2 root root   4096 Apr 10 14:31 work</span><br><span class="line"><span class="hljs-comment"># å¯ä»¥çœ‹åˆ°æœ€åä¸€è¡Œå‘½ä»¤æ‰§è¡ŒæˆåŠŸäº†ï¼ŒæŸ¥çœ‹å®¹å™¨è¿›ç¨‹ï¼šdocker ps -a</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                          PORTS               NAMES</span><br><span class="line">202be91cd7ec        tomcat              <span class="hljs-string">"ls -l"</span>             About a minute ago   Exited (0) About a minute ago                       cat</span><br><span class="line"><span class="hljs-comment"># tomcat æ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼ŒåŸå› æ˜¯æˆ‘ä»¬ç”¨ ls -a å‘½ä»¤ä»£æ›¿äº†å¯åŠ¨ tomcat çš„å‘½ä»¤</span></span><br></pre></td></tr></table></figure>
<p><strong>äºŒï¼‰docker run ä¹‹åçš„å‚æ•°ä¼šè¢«å½“ä½œå‚æ•°ä¼ é€’ç»™ ENTRYPOINTï¼Œå½¢æˆæ–°çš„å‘½ä»¤ç»„åˆã€‚</strong></p>
<p>å®šåˆ¶ä¸€ä¸ªæŸ¥çœ‹å½“å‰ ip ä¿¡æ¯çš„å®¹å™¨ï¼ŒDockerFileå¦‚ä¸‹ï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å®‰è£… curl å·¥å…·ï¼Œå‘èµ·è¯·æ±‚åˆ°æŸ¥ipçš„ç½‘ç«™æŸ¥è¯¢è¿”å›ä¿¡æ¯</span></span><br><span class="line"><span class="hljs-comment"># curl å‘½ä»¤å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸‹è½½ã€å‘é€å„ç§ HTTP è¯·æ±‚ï¼ŒæŒ‡å®š HTTP å¤´éƒ¨ç­‰æ“ä½œã€‚</span></span><br><span class="line">FROM centos</span><br><span class="line">RUN yum install -y curl <span class="hljs-comment"># æ‰§è¡Œå®‰è£…</span></span><br><span class="line">CMD [<span class="hljs-string">"curl"</span>,<span class="hljs-string">"-s"</span>,<span class="hljs-string">"http://ip.cn"</span>]</span><br><span class="line"><span class="hljs-comment"># æ‰§è¡Œæ„å»º</span></span><br><span class="line">docker build -f DockerFile2 -t show-ip .</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨å®¹å™¨ï¼Œä¼šçœ‹åˆ° <a href="http://ip.cn" target="_blank" rel="noopener">http://ip.cn</a> çš„ç›¸åº”ä¿¡æ¯å±•ç¤ºåˆ°äº†æ§åˆ¶å°ï¼Œ<code>curl -s xxx</code> å‘½ä»¤æ‰§è¡ŒæˆåŠŸã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦åœ¨å®¹å™¨å¯åŠ¨æ—¶å˜æ›´å¯åŠ¨ä¸­çš„å‚æ•°æ—¶ï¼ŒCMDå°±ä¸èµ·ä½œç”¨äº†ã€‚</p>
<p>å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨å®¹å™¨è¿è¡Œæ—¶ç»™ <code>curl -s http://ip.cn</code> åŠ ä¸€ä¸ª <code>-i</code> å‚æ•°ç”¨æ¥æ˜¾ç¤ºå®Œæ•´çš„ç›¸åº”å¤´ä¿¡æ¯ï¼Œæ­¤æ—¶ä¼šæŠ¥é”™è¯´æ‰¾ä¸åˆ°å‘½ä»¤ï¼ŒåŸå› æ˜¯å°† -i å½“ä½œä¸€ä¸ªå‘½ä»¤å»æ›¿æ¢æ‰äº† curl -s <a href="http://ip.cn" target="_blank" rel="noopener">http://ip.cn</a> å‘½ä»¤ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ã€‚</p>
<p>è¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨ ENTRYPOINTï¼Œåªéœ€åœ¨ DockerFile ä¸­æ›¿æ¢ CMD æŒ‡ä»¤ä¸º ENTRYPOINT å³å¯ã€‚<code>ENTRYPOINT [&quot;curl&quot;,&quot;-s&quot;,&quot;xxxx&quot;]</code>ï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨å®¹å™¨å¯åŠ¨æ—¶æŒ‡å®šçš„å‚æ•°ä¼šä»¥å‚æ•°çš„å½¢å¼è¿½åŠ åˆ° curl -s <a href="http://ip.cn" target="_blank" rel="noopener">http://ip.cn</a> åé¢è€Œä¸æ˜¯æ›¿æ¢åŸæ¥å‘½ä»¤äº†ã€‚</p>
<h3 id="è‡ªå®šä¹‰é•œåƒ-Tomcat"><a href="#è‡ªå®šä¹‰é•œåƒ-Tomcat" class="headerlink" title="è‡ªå®šä¹‰é•œåƒ Tomcat"></a>è‡ªå®šä¹‰é•œåƒ Tomcat</h3><p>è‡ªå®šä¹‰ä¸€ä¸ª tomcat çš„é•œåƒï¼Œä½¿å…¶å¯åŠ¨å°±æ˜¯è¿è¡Œäº†ä¸€ä¸ª tomcatï¼Œå®é™…ä¸Šå°±æ˜¯ä»¥ centos ä¸ºåŸºç¡€é•œåƒå®‰è£…äº† jdk å’Œ tomcat çš„ç¯å¢ƒï¼Œå¹¶è®¾ç½®ä¸ºå¯åŠ¨è€Œå·²ã€‚</p>
<p>ã€Œæ­¥éª¤ã€</p>
<ol>
<li>åˆ›å»º DockerFile æ‰€åœ¨ç›®å½•ï¼Œå‡†å¤‡é•œåƒæ‰€éœ€è¦çš„ jdk å’Œ tomcat å®‰è£…åŒ…ã€‚</li>
</ol>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» <span class="hljs-built_in">pwd</span> &amp;&amp; ll                                         harry@192</span><br><span class="line">/Users/harry/Learning/docker-note/docker-file/my-tomcat</span><br><span class="line">total 375368</span><br><span class="line">-rw-r--r--  1 harry  staff     0B  5  2 21:35 Dockerfile</span><br><span class="line">-rwxr-xr-x@ 1 harry  staff   8.5M  6  5  2018 apache-tomcat-7.0.75.tar.gz</span><br><span class="line">-rwxr-xr-x@ 1 harry  staff   175M  6  5  2018 jdk-8u121-linux-x64.tar.gz</span><br><span class="line">------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ç¼–å†™ DockerFile</li>
</ol>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">~/Learning/docker-note/docker-file(master*) Â» <span class="hljs-built_in">cd</span> my-tomcat                                                harry@192</span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER harry&lt;yuzh233@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">ADD apache-tomcat-7.0.75.tar.gz /usr/<span class="hljs-built_in">local</span></span><br><span class="line">ADD jdk-8u121-linux-x64.tar.gz /usr/<span class="hljs-built_in">local</span></span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">ENV WORK_PATH /usr/<span class="hljs-built_in">local</span></span><br><span class="line">WORKDIR <span class="hljs-variable">$WORK_PATH</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># è®¾ç½® java ç¯å¢ƒç›®å½•ï¼Œæ­¤æ–‡ä»¶å¤¹åå¯ä»¥åœ¨æœ¬åœ°å°† jdk-8u121-linux-x64.tar.gz å¾—åˆ°</span></span><br><span class="line">ENV JAVA_HOME /usr/<span class="hljs-built_in">local</span>/jdk1.8.0_121</span><br><span class="line">ENV CLASSPATH <span class="hljs-variable">$JAVA_HOME</span>/lib/dt.jar:<span class="hljs-variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"></span><br><span class="line">ENV CATALINA_HOME /usr/<span class="hljs-built_in">local</span>/apache-tomcat-7.0.75</span><br><span class="line">ENV CATALINA_BASE /usr/<span class="hljs-built_in">local</span>/apache-tomcat-7.0.75</span><br><span class="line"></span><br><span class="line">ENV PATH <span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$CATALINA_HOME</span>/lib:<span class="hljs-variable">$CATALINA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ENTRYPOINT ["/usr/local/apache-tomcat-7.0.75/bin/startup.sh"]</span></span><br><span class="line"><span class="hljs-comment"># CMD ["/usr/local/apache-tomcat-7.0.75/bin/startup.sh","run"]</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># tail å‘½ä»¤ï¼šæŸ¥çœ‹æ–‡ä»¶æœ€åæŒ‡å®šè¡Œï¼Œ-f å‚æ•°ä¸åœçš„è¯»å–ã€‚</span></span><br><span class="line">CMD /usr/<span class="hljs-built_in">local</span>/apache-tomcat-7.0.75/bin/startup.sh \</span><br><span class="line">    &amp;&amp; tail -f /usr/<span class="hljs-built_in">local</span>/c/logs/catalina.out</span><br></pre></td></tr></table></figure>
<p>PSï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤åŠ ä¸Š <code>tail</code> æ˜¯ä½¿å…¶è¾“å‡ºæ—¥å¿—ä»¥å…ä»¥ -d åå°è¿è¡Œæ—¶ç”±äºå‰å°è¿›ç¨‹æ— äº‹å¯åšè‡ªåŠ¨åœæ­¢å®¹å™¨ã€‚</p>
<ol start="3">
<li>æ„å»ºé•œåƒ</li>
</ol>
<p><strong>docker build -f Dockerfile -t yuzh/lovely-cat .</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">Sending build context to Docker daemon  192.2MB</span><br><span class="line">Step 1/14 : FROM centos</span><br><span class="line"> ---&gt; 9f38484d220f</span><br><span class="line">Step 2/14 : MAINTAINER harry&lt;yuzh233@gmail.com&gt;</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; ef7f5536cec3</span><br><span class="line">Step 3/14 : ADD apache-tomcat-7.0.75.tar.gz /usr/<span class="hljs-built_in">local</span></span><br><span class="line"> ---&gt; ce38ea3cc5bf</span><br><span class="line">Step 4/14 : ADD jdk-8u121-linux-x64.tar.gz /usr/<span class="hljs-built_in">local</span></span><br><span class="line"> ---&gt; 9bb44d59445f</span><br><span class="line">Step 5/14 : RUN yum -y install vim</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 4e44d91a2a47</span><br><span class="line"><span class="hljs-comment"># ......</span></span><br><span class="line">Complete!</span><br><span class="line">Removing intermediate container 4e44d91a2a47</span><br><span class="line"> ---&gt; 5dfdd1d562ee</span><br><span class="line">Step 6/14 : ENV WORK_PATH /usr/<span class="hljs-built_in">local</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 11087250850a</span><br><span class="line">Removing intermediate container 11087250850a</span><br><span class="line"> ---&gt; 81440053e1c9</span><br><span class="line">Step 7/14 : WORKDIR <span class="hljs-variable">$WORK_PATH</span></span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> dbc004146319</span><br><span class="line">Removing intermediate container dbc004146319</span><br><span class="line"> ---&gt; 240cc0a13f09</span><br><span class="line">Step 8/14 : ENV JAVA_HOME /usr/<span class="hljs-built_in">local</span>/jdk1.8.0_121</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 9c1f3a418a1f</span><br><span class="line">Removing intermediate container 9c1f3a418a1f</span><br><span class="line"> ---&gt; 1a27a3df60ab</span><br><span class="line">Step 9/14 : ENV CLASSPATH <span class="hljs-variable">$JAVA_HOME</span>/lib/dt.jar:<span class="hljs-variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 0f8cc5d9ea9c</span><br><span class="line">Removing intermediate container 0f8cc5d9ea9c</span><br><span class="line"> ---&gt; 35126d06a7ca</span><br><span class="line">Step 10/14 : ENV CATALINA_HOME /usr/<span class="hljs-built_in">local</span>/apache-tomcat-7.0.75</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 0e015a7542f0</span><br><span class="line">Removing intermediate container 0e015a7542f0</span><br><span class="line"> ---&gt; 22af3e7209e9</span><br><span class="line">Step 11/14 : ENV CATALINA_BASE /usr/<span class="hljs-built_in">local</span>/apache-tomcat-7.0.75</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 0dc6317ab454</span><br><span class="line">Removing intermediate container 0dc6317ab454</span><br><span class="line"> ---&gt; cfd95a85a2d3</span><br><span class="line">Step 12/14 : ENV PATH <span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$CATALINA_HOME</span>/lib:<span class="hljs-variable">$CATALINA_HOME</span>/bin</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> b1b9a6a3e859</span><br><span class="line">Removing intermediate container b1b9a6a3e859</span><br><span class="line"> ---&gt; f03c22aef15d</span><br><span class="line">Step 13/14 : EXPOSE 8080</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 61a077e13bde</span><br><span class="line">Removing intermediate container 61a077e13bde</span><br><span class="line"> ---&gt; afc175ba3243</span><br><span class="line">Step 14/14 : ENTRYPOINT [<span class="hljs-string">"/usr/local/apache-tomcat-7.0.75/bin/startup.sh"</span>]</span><br><span class="line"> ---&gt; Running <span class="hljs-keyword">in</span> 753701ca8f2b</span><br><span class="line">Removing intermediate container 753701ca8f2b</span><br><span class="line"> ---&gt; 9a7ad3e1deb1</span><br><span class="line">Successfully built 9a7ad3e1deb1</span><br><span class="line">Successfully tagged yuzh/lovely-cat:latest</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">4. è¿è¡Œæ–°å»ºçš„å®¹å™¨</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» docker image ls                                                                harry@192</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">yuzh/lovely-cat      latest              4d2b3d59f957        2 minutes ago       731MB</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» docker run -d -p 8080:8080 4d2b3d59f957                                        harry@192</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» docker ps                                                                      harry@192</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">e3b5a9979497        4d2b3d59f957        <span class="hljs-string">"/bin/sh -c '/usr/loâ€¦"</span>   5 minutes ago       Up 5 minutes        0.0.0.0:8080-&gt;8080/tcp   sleepy_hopper</span><br><span class="line">------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>éªŒè¯</li>
</ol>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» docker <span class="hljs-built_in">exec</span> -it e3b5a9979497 /bin/bash                                         harry@192</span><br><span class="line"><span class="hljs-comment"># éªŒè¯ï¼šå·¥ä½œç›®å½•</span></span><br><span class="line"><span class="hljs-comment"># [root@e3b5a9979497 local] # pwd</span></span><br><span class="line">/usr/<span class="hljs-built_in">local</span></span><br><span class="line"><span class="hljs-comment"># éªŒè¯ï¼švim</span></span><br><span class="line"><span class="hljs-comment"># [root@e3b5a9979497 local]# vim apache-tomcat-7.0.75/logs/catalina.out</span></span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">INFO: Server version:        Apache Tomcat/7.0.75</span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">INFO: Server built:          Jan 18 2017 20:54:42 UTC</span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">INFO: Server number:         7.0.75.0</span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">INFO: OS Name:               Linux</span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">INFO: OS Version:            4.9.125-linuxkit</span><br><span class="line">May 02, 2019 2:21:19 PM org.apache.catalina.startup.VersionLoggerListener <span class="hljs-built_in">log</span></span><br><span class="line">......</span><br><span class="line"><span class="hljs-comment"># éªŒè¯ jdk</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/docker-file/my-tomcat(master*) Â» docker <span class="hljs-built_in">exec</span> -it e3b5a9979497 java -version                                     harry@192</span><br><span class="line">java version <span class="hljs-string">"1.8.0_121"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_121-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)</span><br><span class="line">------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p><img src="http://img.yuzh.xyz/docker-note/1556807500784.jpg" alt></p>
<ol start="6">
<li>å‘å¸ƒ Web åº”ç”¨</li>
</ol>
<p>æŒ‚è½½æ•°æ®å·ï¼Œé‡æ–°å¯åŠ¨å®¹å™¨ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸ç”¨è¿›å…¥å®¹å™¨æŸ¥çœ‹æ—¥å¿—ï¼Œç›´æ¥æŸ¥çœ‹ä¸»æœºä¸å®¹å™¨å…±äº«çš„æ–‡ä»¶ã€‚å‘å¸ƒ web åº”ç”¨åªéœ€è¦åœ¨æœ¬åœ°å°† war åŒ…æ”¾åˆ°å…±äº«æ–‡ä»¶å¤¹ï¼Œé‡å¯å®¹å™¨å³å¯ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># docker run -it -p 8888:8080 \</span></span><br><span class="line"><span class="hljs-comment"># -v ~/Learning/docker-note/docker-file/my-tomcat/webapp:/usr/local/apache-tomcat-7.0.75/webapps \</span></span><br><span class="line"><span class="hljs-comment"># -v ~/Learning/docker-note/docker-file/my-tomcat/logs:/usr/local/apache-tomcat-7.0.75/logs \</span></span><br><span class="line"><span class="hljs-comment"># 4d2b3d59f957</span></span><br></pre></td></tr></table></figure>
<p>æ–°å»º web é¡¹ç›®ï¼Œå°† web åŒ…å¤åˆ¶åˆ°å®¹å™¨çš„  webapp ç›®å½•ä¸‹ã€‚å®¹å™¨ tomcat å³å¯ã€‚</p>
<p><img src="http://img.yuzh.xyz/docker-note/1556809298656.jpg" alt></p>
<h2 id="å®‰è£…-MySql"><a href="#å®‰è£…-MySql" class="headerlink" title="å®‰è£… MySql"></a>å®‰è£… MySql</h2><p><a href="https://hub.docker.com/_/mysql?tab=description" target="_blank" rel="noopener">Mysql DockerHub å®˜æ–¹æ–‡æ¡£</a></p>
<p>ã€Œæ€»ä½“æ­¥éª¤ã€</p>
<ol>
<li>docker search â€“filter=stars=30 mysql</li>
<li>docker pull mysql:latest</li>
<li><strong>docker run  -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</strong></li>
<li>è¿›å…¥åˆ°äº† mysql å®¹å™¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œè¿æ¥åˆ° mysql å®¢æˆ·ç«¯ï¼šmysql -u root -p</li>
<li>â€¦â€¦ ã€Œè¾“å…¥å¯†ç ã€ â€¦â€¦</li>
<li>æ•°æ®åº“æ“ä½œï¼ˆshow databases; use mysql; show tables; select * from user; â€¦â€¦ï¼‰</li>
</ol>
<p><strong>ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶ï¼š</strong></p>
<p>Mysql é»˜è®¤çš„é…ç½®æ–‡ä»¶åœ¨ï¼š<code>/etc/mysql/my.cnf</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨å¯åŠ¨æ—¶ä»¥æ•°æ®å·çš„æ–¹å¼æŒ‚è½½è‡ªå·±çš„é…ç½®æ–‡ä»¶åˆ°å®¹å™¨ä¸Šï¼š</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å‡å¦‚ /my/custom  æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</span></span><br><span class="line">docker run  -v /my/custom:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span><br></pre></td></tr></table></figure>
<p>è¿™å°†ä¼šä»¥ <code>/etc/mysql/my.cnf</code> å’Œ <code>/my/custom</code> ç»„åˆé…ç½®çš„æ–¹å¼æ–°å¯åŠ¨ä¸€ä¸ªå®¹å™¨å®ä¾‹ï¼Œåè€…ä¼˜å…ˆçº§å¤§äºå‰è€…ã€‚</p>
<p><strong>ä¸ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤å‚æ•°é…ç½® Mysql</strong></p>
<p>é€šè¿‡å‘½ä»¤æ ‡å¿—çš„å½¢å¼ä¼ é€’ç»™ mysqldï¼Œå¯ä»¥ä½¿æˆ‘ä»¬æ›´åŠ çµæ´»çš„é…ç½® mysql è€Œä¸éœ€è¦é…ç½®æ–‡ä»¶ã€‚å¦‚ï¼šä¿®æ”¹æ‰€æœ‰è¡¨çš„ç¼–ç æ–¹å¼åªéœ€åœ¨å®¹å™¨å¯åŠ¨æ—¶æ·»åŠ ä»¥ä¸‹å‚æ•°</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>
<p><strong>å­˜å‚¨æ•°æ®</strong></p>
<p>æœ‰ä¸¤ç§æ–¹å¼å­˜å‚¨åº”ç”¨ç¨‹åºåœ¨ Docker å®¹å™¨è¿è¡Œä¸­äº§ç”Ÿçš„æ•°æ®ã€‚</p>
<ol>
<li>è®© Docker ä½¿ç”¨è‡ªå·±çš„æ•°æ®å·ç®¡ç†æ–¹å¼å­˜å‚¨å°†æ•°æ®åº“æ–‡ä»¶å†™å…¥åˆ°ä¸»æœºï¼Œè¿™ç§æ–¹å¼æœ€æ–¹ä¾¿å¿«æ·ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯æ•°æ®æ–‡ä»¶ä¸æ–¹ä¾¿æ‰¾åˆ°å’Œç®¡ç†ã€‚</li>
<li>è‡ªå·±åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œä½¿å…¶æŒ‚è½½åˆ° mysql çš„æ•°æ®æ–‡ä»¶ã€‚</li>
</ol>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v /my/own/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span><br></pre></td></tr></table></figure>
<p><strong>å¤‡ä»½æ•°æ®</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="hljs-built_in">exec</span> some-mysql sh -c <span class="hljs-string">'exec mysqldump --all-databases -uroot -p"$MYSQL_ROOT_PASSWORD"'</span> &amp;gt; /some/path/on/your/host/all-databases.sql</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…-Redis"><a href="#å®‰è£…-Redis" class="headerlink" title="å®‰è£… Redis"></a>å®‰è£… Redis</h2><p><a href="https://hub.docker.com/_/redis" target="_blank" rel="noopener">Redis DockerHub å®˜æ–¹æ–‡æ¡£</a></p>
<p><a href="http://doc.redisfans.com/index.html" target="_blank" rel="noopener">redis å‘½ä»¤æ‰‹å†Œ</a></p>
<ol>
<li><p>docker pull redis</p>
</li>
<li><p>å¯åŠ¨ redis æœåŠ¡ç«¯ï¼š<strong>docker run -d -p 6379:6379 -v ~/Learning/docker-note/redis/data:/data redis redis-server â€“appendonly yes</strong><br>æš´éœ²ç«¯å£ï¼ŒæŒ‚è½½æœ¬åœ°æ–‡ä»¶åˆ° redis çš„æŒä¹…åŒ–æ–‡ä»¶ã€‚é¿å…å®¹å™¨åˆ é™¤ key ä¸¢å¤±ã€‚</p>
</li>
</ol>
<p>ä¸Šé¢åªæ˜¯å¯åŠ¨äº†æœåŠ¡ç«¯ï¼Œå®¹å™¨è¿è¡Œåéœ€è¦æˆ‘ä»¬è¿›å…¥å®¹å™¨æ‰‹åŠ¨å¯åŠ¨ redis å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ã€‚</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¦‚ä½•æ‰¾åˆ° redis å‘½ä»¤åœ°å€ï¼Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹ DockerHub ä¸Š Redis çš„ DockerFileæ–‡ä»¶å¾—çŸ¥åœ¨ï¼š`/usr/<span class="hljs-built_in">local</span>/bin/`ã€‚</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span>/bin/ &amp;&amp; ./redis-cli</span><br><span class="line"><span class="hljs-comment"># exec redis commend ......</span></span><br></pre></td></tr></table></figure>
<p>ã€Œæµ‹è¯•æŒä¹…åŒ–ã€</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># åœ¨å½“å‰å®¹å™¨è®¾ç½®äº†ä¸‰ä¸ª key</span></span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="hljs-string">"k2"</span></span><br><span class="line">2) <span class="hljs-string">"k1"</span></span><br><span class="line">3) <span class="hljs-string">"k3"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æŸ¥çœ‹å®¿ä¸»æœºæŒä¹…åŒ–æ–‡ä»¶ï¼š</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/redis/data(master*) Â» <span class="hljs-built_in">pwd</span>                                                                                                                 harry@192</span><br><span class="line">/Users/harry/Learning/docker-note/redis/data</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">~/Learning/docker-note/redis/data(master*) Â» cat appendonly.aof                                                                                                  harry@192</span><br><span class="line">*2</span><br><span class="line"><span class="hljs-variable">$6</span></span><br><span class="line">SELECT</span><br><span class="line"><span class="hljs-variable">$1</span></span><br><span class="line">0</span><br><span class="line">*3</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p><em>è¯æ˜æ˜¯æŒ‚è½½æˆåŠŸçš„ï¼Œç„¶ååˆ é™¤å®¹å™¨ï¼Œé‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°å®¹å™¨ï¼Œçœ‹æ•°æ®æ˜¯å¦åŒæ­¥è¿‡å»äº†ã€‚</em></p>
<p><img src="http://img.yuzh.xyz/docker-note/1556880581267.jpg" alt></p>
<p>å®¿ä¸»æœºè¿æ¥ docker ä¸­çš„ redisï¼š</p>
<p><img src="http://img.yuzh.xyz/docker-note/1556880819448.jpg" alt></p>
<p><strong>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</strong></p>
<ol>
<li><p>å®šåˆ¶ DockerFile çš„å½¢å¼</p>
 <figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM redis</span><br><span class="line">COPY redis.conf /usr/<span class="hljs-built_in">local</span>/etc/redis/redis.conf</span><br><span class="line">CMD [ <span class="hljs-string">"redis-server"</span>, <span class="hljs-string">"/usr/local/etc/redis/redis.conf"</span> ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šï¼Œçµæ´»ï¼Œæ¨èã€‚</p>
 <figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v /myredis/conf/redis.conf:/usr/<span class="hljs-built_in">local</span>/etc/redis/redis.conf redis redis-server /usr/<span class="hljs-built_in">local</span>/etc/redis/redis.conf</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="ç»ƒä¹ ï¼šSpring-Boot-å•ä½“åº”ç”¨å®¹å™¨åŒ–"><a href="#ç»ƒä¹ ï¼šSpring-Boot-å•ä½“åº”ç”¨å®¹å™¨åŒ–" class="headerlink" title="ç»ƒä¹ ï¼šSpring Boot å•ä½“åº”ç”¨å®¹å™¨åŒ–"></a>ç»ƒä¹ ï¼šSpring Boot å•ä½“åº”ç”¨å®¹å™¨åŒ–</h2><p>ä½¿ç”¨ä¸Šé¢çš„ <code>test-dockerfile</code>  é¡¹ç›®ï¼Œæ„å»ºä¸€ä¸ªé•œåƒï¼Œé€šè¿‡å®¹å™¨è¿è¡Œå¹¶è®¿é—®ã€‚</p>
<p>æ·»åŠ ä¸€ä¸ªæœ€ç®€å•çš„ Dockerfile</p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM tomcat:latest</span><br><span class="line">ENV WORK_PATH /usr/<span class="hljs-built_in">local</span>/tomcat</span><br><span class="line">ADD /target/<span class="hljs-built_in">test</span>-dockerfile-0.0.1-SNAPSHOT.jar <span class="hljs-variable">$&#123;WORK_PATH&#125;</span>/webapps/<span class="hljs-built_in">test</span>-dockerfile-0.0.1-SNAPSHOT.jar</span><br><span class="line">EXPOSE 8081</span><br><span class="line"><span class="hljs-comment"># PSï¼šENTRYPOINT ["","$&#123;WORK_PATH&#125;"] è¿™ç§æ–¹å¼æ˜¯ exec çš„å½¢å¼æ‰§è¡Œï¼Œä¸ä¼šè§£æç¯å¢ƒå˜é‡ã€‚é™¤éä½¿ç”¨ shell çš„æ–¹å¼ã€‚</span></span><br><span class="line">ENTRYPOINT java -jar <span class="hljs-variable">$&#123;WORK_PATH&#125;</span>/webapps/<span class="hljs-built_in">test</span>-dockerfile-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸‹æ‰§è¡Œï¼š<code>docker build -f Dockerfile -t my-webapp:latest .</code></p>
<p>è¿è¡Œï¼š<code>docker run -it -p 8081:8080 my-webapp:latest</code></p>
<p>è®¿é—®ï¼š<a href="http://localhost:8081/api/hello-docker" target="_blank" rel="noopener">http://localhost:8081/api/hello-docker</a></p>
<p><img src="http://img.yuzh.xyz/docker-note/1556892499795.jpg" alt></p>
<p><em>PSï¼šIDEA 2019 ç‰ˆé›†æˆäº† Docker å·¥å…·ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯ä½¿ç”¨å‘½ä»¤å§ğŸ˜‚ã€‚</em></p>
<p><img src="http://img.yuzh.xyz/docker-note/1556892760857.jpg" alt></p>
<h1 id="ä»“åº“"><a href="#ä»“åº“" class="headerlink" title="ä»“åº“"></a>ä»“åº“</h1><p>å­¦ä¼šä½¿ç”¨<a href="https://help.aliyun.com/product/60716.html?spm=a2c4g.11186623.6.540.10823864peBl6O" target="_blank" rel="noopener">ã€Œå®¹å™¨é•œåƒæœåŠ¡ã€</a>ï¼Œå®˜æ–¹æœ‰è¯¦ç»†æ–‡æ¡£è¯´æ˜ï¼Œè¿™é‡Œåªè®°å½•ä¸»è¦æ­¥éª¤åŠé—®é¢˜ã€‚</p>
<p><strong>1ï¼‰åˆ›å»ºé•œåƒä»“åº“ï¼ŒæŒ‡å®šä»£ç æº</strong></p>
<p><img src="http://img.yuzh.xyz/docker-note/1556888180808.jpg" alt="åˆ›å»ºé˜¿é‡Œäº‘ code é¡¹ç›®"></p>
<p><img src="http://img.yuzh.xyz/docker-note/1556888080869.jpg" alt="åˆ›å»ºé•œåƒä»“åº“"></p>
<p><strong>2) ç™»é™†ç§æœ‰é•œåƒä»“åº“</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login --username=yuzh233 registry.cn-hangzhou.aliyuncs.com</span><br></pre></td></tr></table></figure>
<p><em>PSï¼šä¿®æ”¹å¯†ç å…¥å£ï¼šå®¹å™¨æœåŠ¡é¦–é¡µ -&gt; è®¿é—®å‡­è¯</em></p>
<p><strong>3ï¼‰ ä¸Šä¼ é•œåƒåˆ°ç§æœ‰ä»“åº“</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker login --username=yuzh233 registry.cn-hangzhou.aliyuncs.com</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/yuzh/test-dockerfile:[é•œåƒç‰ˆæœ¬å·]</span></span><br><span class="line"><span class="hljs-comment"># ImageId å°±æ˜¯æœ¬åœ°æ„å»ºå¥½éœ€è¦ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“çš„é•œåƒID</span></span><br><span class="line">docker tag fccdeb7abef7  registry.cn-hangzhou.aliyuncs.com/yuzh/<span class="hljs-built_in">test</span>-dockerfile:latest</span><br><span class="line"></span><br><span class="line">docker push registry.cn-hangzhou.aliyuncs.com/yuzh/<span class="hljs-built_in">test</span>-dockerfile:[é•œåƒç‰ˆæœ¬å·]</span><br></pre></td></tr></table></figure>
<p><strong>4ï¼‰ ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ</strong></p>
<figure class="highlight sh hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/yuzh/<span class="hljs-built_in">test</span>-dockerfile:[é•œåƒç‰ˆæœ¬å·]</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªåŠ¨æ„å»º"><a href="#è‡ªåŠ¨æ„å»º" class="headerlink" title="è‡ªåŠ¨æ„å»º"></a>è‡ªåŠ¨æ„å»º</h2>
        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/docker/">docker</a>, <a class="has-link-grey -link" href="/tags/å¾®æœåŠ¡/">å¾®æœåŠ¡</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2018/11/08/æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘/">
                <span class="level-item">æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="valine-thread" class="content"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#valine-thread' ,
        notify: true,
        verify: true,
        app_id: 'IaNb4n1EqHakKzNDh6jR1qYJ-gzGzoHsz',
        app_key: 'Hg7CxatEfuCfhqOsl7XYtEOv',
        placeholder: 'more than just code.'
    });
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="image is-128x128 has-mb-6">
                            <img class="is-rounded" src="/images/tou.jpg" alt="harry.zh">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        harry.zh
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        more than just code.
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Changsha, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        32
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        4
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        28
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="http://github.com/yuzh233/" target="_blank">
                Follow</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="http://github.com/yuzh233/">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="/">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="/">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="/">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
<!-- <div class="card widget column-left is-sticky" id="toc"> -->
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catalogue
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ">
        <span class="has-mr-6">1</span>
        <span>é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</span>
        </a></li><li>
        <a class="is-flex" href="#å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤">
        <span class="has-mr-6">2</span>
        <span>å­¦ä¼šä½¿ç”¨å¸®åŠ©å‘½ä»¤</span>
        </a></li><li>
        <a class="is-flex" href="#é•œåƒ">
        <span class="has-mr-6">3</span>
        <span>é•œåƒ</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#æŸ¥çœ‹æœ¬åœ°é•œåƒ">
        <span class="has-mr-6">3.1</span>
        <span>æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
        </a></li><li>
        <a class="is-flex" href="#ä»-Docker-Hub-æŸ¥è¯¢é•œåƒ">
        <span class="has-mr-6">3.2</span>
        <span>ä» Docker Hub æŸ¥è¯¢é•œåƒ</span>
        </a></li><li>
        <a class="is-flex" href="#æ‹‰å–é•œåƒ">
        <span class="has-mr-6">3.3</span>
        <span>æ‹‰å–é•œåƒ</span>
        </a></li><li>
        <a class="is-flex" href="#åˆ é™¤æœ¬åœ°é•œåƒ">
        <span class="has-mr-6">3.4</span>
        <span>åˆ é™¤æœ¬åœ°é•œåƒ</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®¹å™¨">
        <span class="has-mr-6">4</span>
        <span>å®¹å™¨</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨">
        <span class="has-mr-6">4.1</span>
        <span>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨">
        <span class="has-mr-6">4.2</span>
        <span>æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#é€€å‡ºå®¹å™¨">
        <span class="has-mr-6">4.3</span>
        <span>é€€å‡ºå®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#å¯åŠ¨å®¹å™¨">
        <span class="has-mr-6">4.4</span>
        <span>å¯åŠ¨å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#é‡å¯å®¹å™¨">
        <span class="has-mr-6">4.5</span>
        <span>é‡å¯å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#åœæ­¢å®¹å™¨">
        <span class="has-mr-6">4.6</span>
        <span>åœæ­¢å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#å¼ºåˆ¶åœæ­¢å®¹å™¨">
        <span class="has-mr-6">4.7</span>
        <span>å¼ºåˆ¶åœæ­¢å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#åˆ é™¤å·²åœæ­¢çš„å®¹å™¨">
        <span class="has-mr-6">4.8</span>
        <span>åˆ é™¤å·²åœæ­¢çš„å®¹å™¨</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹">
        <span class="has-mr-6">5</span>
        <span>å®¹å™¨é‡è¦çŸ¥è¯†ç‚¹</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨">
        <span class="has-mr-6">5.1</span>
        <span>å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨</span>
        </a></li><li>
        <a class="is-flex" href="#æŸ¥çœ‹å®¹å™¨æ—¥å¿—">
        <span class="has-mr-6">5.2</span>
        <span>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
        </a></li><li>
        <a class="is-flex" href="#æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹">
        <span class="has-mr-6">5.3</span>
        <span>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</span>
        </a></li><li>
        <a class="is-flex" href="#æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚">
        <span class="has-mr-6">5.4</span>
        <span>æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</span>
        </a></li><li>
        <a class="is-flex" href="#è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’">
        <span class="has-mr-6">5.5</span>
        <span>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#docker-attach-å®¹å™¨ID">
        <span class="has-mr-6">5.5.1</span>
        <span>docker attach å®¹å™¨ID</span>
        </a></li><li>
        <a class="is-flex" href="#docker-exec-it-å®¹å™¨ID-bashShell">
        <span class="has-mr-6">5.5.2</span>
        <span>docker exec -it å®¹å™¨ID bashShell</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š">
        <span class="has-mr-6">5.6</span>
        <span>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#é•œåƒåŸç†">
        <span class="has-mr-6">6</span>
        <span>é•œåƒåŸç†</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#æ˜¯ä»€ä¹ˆ">
        <span class="has-mr-6">6.1</span>
        <span>æ˜¯ä»€ä¹ˆ</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰">
        <span class="has-mr-6">6.1.1</span>
        <span>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</span>
        </a></li><li>
        <a class="is-flex" href="#Docker-é•œåƒåŠ è½½åŸç†">
        <span class="has-mr-6">6.1.2</span>
        <span>Docker é•œåƒåŠ è½½åŸç†</span>
        </a></li><li>
        <a class="is-flex" href="#ä¸ºä»€ä¹ˆ-Docker-é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„">
        <span class="has-mr-6">6.1.3</span>
        <span>ä¸ºä»€ä¹ˆ Docker é•œåƒè¦é‡‡ç”¨åˆ†å±‚çš„ç»“æ„</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#ç‰¹ç‚¹">
        <span class="has-mr-6">6.2</span>
        <span>ç‰¹ç‚¹</span>
        </a></li><li>
        <a class="is-flex" href="#é•œåƒçš„-commit-æ“ä½œ">
        <span class="has-mr-6">6.3</span>
        <span>é•œåƒçš„ commit æ“ä½œ</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®¹å™¨æ•°æ®å·">
        <span class="has-mr-6">7</span>
        <span>å®¹å™¨æ•°æ®å·</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#ä½œç”¨">
        <span class="has-mr-6">7.1</span>
        <span>ä½œç”¨</span>
        </a></li><li>
        <a class="is-flex" href="#æ¦‚å¿µ">
        <span class="has-mr-6">7.2</span>
        <span>æ¦‚å¿µ</span>
        </a></li><li>
        <a class="is-flex" href="#ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·">
        <span class="has-mr-6">7.3</span>
        <span>ä½¿ç”¨ä¸€ï¼šå‘½ä»¤æ–¹å¼æŒ‚è½½æ•°æ®å·</span>
        </a></li><li>
        <a class="is-flex" href="#ä½¿ç”¨äºŒï¼š-DockerFile-æŒ‚è½½æ•°æ®å·">
        <span class="has-mr-6">7.4</span>
        <span>ä½¿ç”¨äºŒï¼š DockerFile æŒ‚è½½æ•°æ®å·</span>
        </a></li><li>
        <a class="is-flex" href="#ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«">
        <span class="has-mr-6">7.5</span>
        <span>ä½¿ç”¨ä¸‰ï¼šä½¿ç”¨æ•°æ®å·å®¹å™¨å®ç°æ•°æ®å…±äº«</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#DockerFile">
        <span class="has-mr-6">8</span>
        <span>DockerFile</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#DockerFile-æŒ‡ä»¤">
        <span class="has-mr-6">8.1</span>
        <span>DockerFile æŒ‡ä»¤</span>
        </a></li><li>
        <a class="is-flex" href="#æ¡ˆä¾‹">
        <span class="has-mr-6">8.2</span>
        <span>æ¡ˆä¾‹</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Baseé•œåƒï¼ˆscratchï¼‰">
        <span class="has-mr-6">8.2.1</span>
        <span>Baseé•œåƒï¼ˆscratchï¼‰</span>
        </a></li><li>
        <a class="is-flex" href="#è‡ªå®šä¹‰é•œåƒ-my-centos">
        <span class="has-mr-6">8.2.2</span>
        <span>è‡ªå®šä¹‰é•œåƒ my-centos</span>
        </a></li><li>
        <a class="is-flex" href="#CMD-ENTERPOINT-é•œåƒæ¡ˆä¾‹">
        <span class="has-mr-6">8.2.3</span>
        <span>CMD/ENTERPOINT é•œåƒæ¡ˆä¾‹</span>
        </a></li><li>
        <a class="is-flex" href="#è‡ªå®šä¹‰é•œåƒ-Tomcat">
        <span class="has-mr-6">8.2.4</span>
        <span>è‡ªå®šä¹‰é•œåƒ Tomcat</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#å®‰è£…-MySql">
        <span class="has-mr-6">8.3</span>
        <span>å®‰è£… MySql</span>
        </a></li><li>
        <a class="is-flex" href="#å®‰è£…-Redis">
        <span class="has-mr-6">8.4</span>
        <span>å®‰è£… Redis</span>
        </a></li><li>
        <a class="is-flex" href="#ç»ƒä¹ ï¼šSpring-Boot-å•ä½“åº”ç”¨å®¹å™¨åŒ–">
        <span class="has-mr-6">8.5</span>
        <span>ç»ƒä¹ ï¼šSpring Boot å•ä½“åº”ç”¨å®¹å™¨åŒ–</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#ä»“åº“">
        <span class="has-mr-6">9</span>
        <span>ä»“åº“</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#è‡ªåŠ¨æ„å»º">
        <span class="has-mr-6">9.1</span>
        <span>è‡ªåŠ¨æ„å»º</span>
        </a></li></ul></li></ul>
        </div>
    </div>
</div>

    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/bug-fix/">
            <span class="level-start">
                <span class="level-item">bug-fix</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/docker/">
            <span class="level-start">
                <span class="level-item">docker</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/interview/">
            <span class="level-start">
                <span class="level-item">interview</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/spring-boot/">
            <span class="level-start">
                <span class="level-item">spring-boot</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/aop/" style="font-size: 12.5px;">aop</a> <a href="/tags/cokie/" style="font-size: 10px;">cokie</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/dubbo/" style="font-size: 10px;">dubbo</a> <a href="/tags/freeMarker/" style="font-size: 10px;">freeMarker</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/jms/" style="font-size: 10px;">jms</a> <a href="/tags/jsonp/" style="font-size: 10px;">jsonp</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nio/" style="font-size: 10px;">nio</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/sso/" style="font-size: 10px;">sso</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/åˆ†å¸ƒå¼/" style="font-size: 20px;">åˆ†å¸ƒå¼</a> <a href="/tags/å¾®æœåŠ¡/" style="font-size: 10px;">å¾®æœåŠ¡</a> <a href="/tags/æ•°æ®ç»“æ„/" style="font-size: 17.5px;">æ•°æ®ç»“æ„</a> <a href="/tags/æ— å…³ä»£ç /" style="font-size: 10px;">æ— å…³ä»£ç </a> <a href="/tags/ç®—æ³•/" style="font-size: 17.5px;">ç®—æ³•</a> <a href="/tags/çº¿ç¨‹/" style="font-size: 10px;">çº¿ç¨‹</a> <a href="/tags/é›†ç¾¤/" style="font-size: 10px;">é›†ç¾¤</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/05/11/Dockerè¡¥æ•‘æŒ‡å—/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="http://img.yuzh.xyz/docker-note/wallhaven-263173.jpg" alt="Docker è¡¥æ•‘æŒ‡å—">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-10T16:00:00.000Z">2019-05-11</time></div>
                    <a href="/2019/05/11/Dockerè¡¥æ•‘æŒ‡å—/" class="has-link-black-ter is-size-6">Docker è¡¥æ•‘æŒ‡å—</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/docker/">docker</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-282224.jpg" alt="æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T12:53:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘/" class="has-link-black-ter is-size-6">æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/æ ‘çš„ä¸‰ç§éå†æ–¹å¼/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-204334.jpg" alt="æ ‘çš„ä¸‰ç§éå†æ–¹å¼">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:46:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/æ ‘çš„ä¸‰ç§éå†æ–¹å¼/" class="has-link-black-ter is-size-6">æ ‘çš„ä¸‰ç§éå†æ–¹å¼</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/06/æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-252102.jpg" alt="æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-06T07:53:00.000Z">2018-11-06</time></div>
                    <a href="/2018/11/06/æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜/" class="has-link-black-ter is-size-6">æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/04/æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/jay-wennington-2250-unsplash.jpg" alt="æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T16:26:00.000Z">2018-11-04</time></div>
                    <a href="/2018/11/04/æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«/" class="has-link-black-ter is-size-6">æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">May 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aliyun/">
                        <span class="tag">aliyun</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aop/">
                        <span class="tag">aop</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cokie/">
                        <span class="tag">cokie</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/dubbo/">
                        <span class="tag">dubbo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/freeMarker/">
                        <span class="tag">freeMarker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/idea/">
                        <span class="tag">idea</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jms/">
                        <span class="tag">jms</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jsonp/">
                        <span class="tag">jsonp</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nio/">
                        <span class="tag">nio</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/redis/">
                        <span class="tag">redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/solr/">
                        <span class="tag">solr</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">spring</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">springboot</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sso/">
                        <span class="tag">sso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tomcat/">
                        <span class="tag">tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/åˆ†å¸ƒå¼/">
                        <span class="tag">åˆ†å¸ƒå¼</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/å¾®æœåŠ¡/">
                        <span class="tag">å¾®æœåŠ¡</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/æ•°æ®ç»“æ„/">
                        <span class="tag">æ•°æ®ç»“æ„</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/æ— å…³ä»£ç /">
                        <span class="tag">æ— å…³ä»£ç </span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ç®—æ³•/">
                        <span class="tag">ç®—æ³•</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/çº¿ç¨‹/">
                        <span class="tag">çº¿ç¨‹</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/é›†ç¾¤/">
                        <span class="tag">é›†ç¾¤</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/05/11/Dockerè¡¥æ•‘æŒ‡å—/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="http://img.yuzh.xyz/docker-note/wallhaven-263173.jpg" alt="Docker è¡¥æ•‘æŒ‡å—">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-10T16:00:00.000Z">2019-05-11</time></div>
                    <a href="/2019/05/11/Dockerè¡¥æ•‘æŒ‡å—/" class="has-link-black-ter is-size-6">Docker è¡¥æ•‘æŒ‡å—</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/docker/">docker</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-282224.jpg" alt="æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T12:53:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘/" class="has-link-black-ter is-size-6">æ ¹æ®æ ‘çš„å‰åºå’Œååºè¡¨è¾¾å¼æ„é€ å”¯ä¸€æ ‘</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/æ ‘çš„ä¸‰ç§éå†æ–¹å¼/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-204334.jpg" alt="æ ‘çš„ä¸‰ç§éå†æ–¹å¼">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:46:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/æ ‘çš„ä¸‰ç§éå†æ–¹å¼/" class="has-link-black-ter is-size-6">æ ‘çš„ä¸‰ç§éå†æ–¹å¼</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/06/æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-252102.jpg" alt="æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-06T07:53:00.000Z">2018-11-06</time></div>
                    <a href="/2018/11/06/æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜/" class="has-link-black-ter is-size-6">æºç è§’åº¦åˆ†æ CharacterEncodingFilter è§£å†³ Post è¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/04/æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/jay-wennington-2250-unsplash.jpg" alt="æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T16:26:00.000Z">2018-11-04</time></div>
                    <a href="/2018/11/04/æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«/" class="has-link-black-ter is-size-6">æ•°æ®åº“å¸¸ç”¨äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸éš”ç¦»çº§åˆ«</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">May 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aliyun/">
                        <span class="tag">aliyun</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aop/">
                        <span class="tag">aop</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cokie/">
                        <span class="tag">cokie</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/docker/">
                        <span class="tag">docker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/dubbo/">
                        <span class="tag">dubbo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/freeMarker/">
                        <span class="tag">freeMarker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/idea/">
                        <span class="tag">idea</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jms/">
                        <span class="tag">jms</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jsonp/">
                        <span class="tag">jsonp</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nio/">
                        <span class="tag">nio</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/redis/">
                        <span class="tag">redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/solr/">
                        <span class="tag">solr</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">spring</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">springboot</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sso/">
                        <span class="tag">sso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tomcat/">
                        <span class="tag">tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/åˆ†å¸ƒå¼/">
                        <span class="tag">åˆ†å¸ƒå¼</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/å¾®æœåŠ¡/">
                        <span class="tag">å¾®æœåŠ¡</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/æ•°æ®ç»“æ„/">
                        <span class="tag">æ•°æ®ç»“æ„</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/æ— å…³ä»£ç /">
                        <span class="tag">æ— å…³ä»£ç </span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ç®—æ³•/">
                        <span class="tag">ç®—æ³•</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/çº¿ç¨‹/">
                        <span class="tag">çº¿ç¨‹</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/é›†ç¾¤/">
                        <span class="tag">é›†ç¾¤</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/star.png" alt="Docker è¡¥æ•‘æŒ‡å—" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 å¼  ç‘œ&nbsp;
                Powered by Hexo & Icarus<br>
                <a href="http://www.miitbeian.gov.cn/" target="_blank">æ¹˜ICPå¤‡ 18020713å·</a>
                </p>
                
                <p></p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/yuzh233">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>