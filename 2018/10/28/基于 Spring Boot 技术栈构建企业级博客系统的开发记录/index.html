<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>基于 Spring Boot 技术栈构建企业级博客系统的开发记录 - harry&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="基于 Spring Boot 技术栈构建企业级博客系统的开发记录- 该项目构建基于 Gradle，目的在于通过博客系统的开发了解企业级开发的完整流程，学习掌握 Spring Boot 及其周边前沿技术。- preview：http://blog.yuzh.xyz">
<meta name="keywords" content="springboot">
<meta property="og:type" content="article">
<meta property="og:title" content="基于 Spring Boot 技术栈构建企业级博客系统的开发记录">
<meta property="og:url" content="http://yoursite.com/2018/10/28/基于 Spring Boot 技术栈构建企业级博客系统的开发记录/index.html">
<meta property="og:site_name" content="harry&#39;s blog">
<meta property="og:description" content="基于 Spring Boot 技术栈构建企业级博客系统的开发记录- 该项目构建基于 Gradle，目的在于通过博客系统的开发了解企业级开发的完整流程，学习掌握 Spring Boot 及其周边前沿技术。- preview：http://blog.yuzh.xyz">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/img/random/96.jpg">
<meta property="og:updated_time" content="2018-11-05T10:55:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="基于 Spring Boot 技术栈构建企业级博客系统的开发记录">
<meta name="twitter:description" content="基于 Spring Boot 技术栈构建企业级博客系统的开发记录- 该项目构建基于 Gradle，目的在于通过博客系统的开发了解企业级开发的完整流程，学习掌握 Spring Boot 及其周边前沿技术。- preview：http://blog.yuzh.xyz">
<meta name="twitter:image" content="http://yoursite.com/img/random/96.jpg">







<link rel="icon" href="/images/star.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/star.png" alt="基于 Spring Boot 技术栈构建企业级博客系统的开发记录" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/yuzh233">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catálogo" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="/img/random/96.jpg" alt="基于 Spring Boot 技术栈构建企业级博客系统的开发记录">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-28T15:45:00.000Z">2018-10-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/spring-boot/">spring-boot</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    an hour read (About 8528 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                基于 Spring Boot 技术栈构建企业级博客系统的开发记录
            
        </h1>
        <div class="content">
            <p><img src="/post_image/blog-img/image_39.png" alt="博客首页"></p>
<blockquote>
<p><strong>基于 Spring Boot 技术栈构建企业级博客系统的开发记录</strong><br>- 该项目构建基于 Gradle，目的在于通过博客系统的开发了解企业级开发的完整流程，学习掌握 Spring Boot 及其周边前沿技术。<br>- preview：<a href="http://blog.yuzh.xyz" target="_blank" rel="noopener">http://blog.yuzh.xyz</a><br><a id="more"></a></p>
</blockquote>
<table>
<thead>
<tr>
<th>前端</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>BootStrap</td>
<td>样式框架</td>
</tr>
<tr>
<td>Thymeleaf</td>
<td>模板引擎</td>
</tr>
<tr>
<td>JQuery</td>
<td>js 函数库</td>
</tr>
<tr>
<td>HTML5</td>
<td>页面结构</td>
</tr>
<tr>
<td>JavaScript</td>
<td>脚本</td>
</tr>
<tr>
<td>CSS</td>
<td>样式</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>后端</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Spring</td>
<td>解耦合</td>
</tr>
<tr>
<td>Spring MVC</td>
<td>控制层框架</td>
</tr>
<tr>
<td>Spring Boot</td>
<td>快捷开发，整合 Spring 全家桶</td>
</tr>
<tr>
<td>Spring Data</td>
<td>持久层框架，简化数据库操作</td>
</tr>
<tr>
<td>Spring Security</td>
<td>安全权限控制</td>
</tr>
<tr>
<td>Hibernate</td>
<td>遵循 JPA 规范的持久层实现</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>数据存储</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>MySql</td>
<td>关系型数据库</td>
</tr>
<tr>
<td>H2</td>
<td>内存数据库</td>
</tr>
<tr>
<td>MongoDB</td>
<td>文件存储</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>其他</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Elastic Search</td>
<td>全文检索</td>
</tr>
<tr>
<td>Gradle</td>
<td>项目构建</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>插件</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>catalog-generator.js</td>
<td>博客目录生成插件</td>
</tr>
<tr>
<td>tether.js</td>
<td>下拉框插件</td>
</tr>
<tr>
<td>thinker-md.vendor.js</td>
<td>markdown 编辑器</td>
</tr>
<tr>
<td>toastr.min.js</td>
<td>提示框</td>
</tr>
<tr>
<td>cropbox.js</td>
<td>图片裁剪</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<h2 id="一、-使用-Gradle-Spring-Initializer-搭建-Spring-Boot-运行环境"><a href="#一、-使用-Gradle-Spring-Initializer-搭建-Spring-Boot-运行环境" class="headerlink" title="一、 使用 Gradle / Spring Initializer 搭建 Spring Boot 运行环境"></a>一、 使用 Gradle / Spring Initializer 搭建 Spring Boot 运行环境</h2><h3 id="1-1-安装-Gradle-环境"><a href="#1-1-安装-Gradle-环境" class="headerlink" title="1.1 安装 Gradle 环境"></a>1.1 安装 Gradle 环境</h3><p>下载 gradle <a href="https://gradle.org/releases/" target="_blank" rel="noopener">二进制文件</a>，解压到指定目录；</p>
<p>配置 <code>GRADLE_HOME</code> 环境变量，值为解压路径；</p>
<p>添加 <code>%GRADLE_HOME%/bin</code> 到 Path 变量。</p>
<p>命令行 <code>gradle -v</code> 查看版本：</p>
<p><img src="/post_image/blog-img/image_5.png" alt></p>
<h3 id="1-2-使用-Spring-Initializer-快速生成-Spring-Boot-应用"><a href="#1-2-使用-Spring-Initializer-快速生成-Spring-Boot-应用" class="headerlink" title="1.2 使用 Spring Initializer 快速生成 Spring Boot 应用"></a>1.2 使用 Spring Initializer 快速生成 Spring Boot 应用</h3><p>使用 Spring 快速开始<a href="https://start.spring.io/" target="_blank" rel="noopener">向导</a>，创建一个项目并下载到本地。  </p>
<p><img src="/post_image/blog-img\image_6.png" alt></p>
<p>使用 gradle 编译项目，进入根目录执行：</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle build</span><br></pre></td></tr></table></figure>
<p>编译完成之后会在目录生成一个 build 文件夹，里面存放着编译后的文件以及安装的jar。</p>
<p><img src="/post_image/blog-img/image_8.png" alt></p>
<p>运行这个 jar ：</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-blog-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p><img src="/post_image/blog-img/image_10.png" alt></p>
<p>一个简单的 spring  boot 应用启动起来了，接下来可以正常访问。</p>
<h3 id="1-3-项目结构"><a href="#1-3-项目结构" class="headerlink" title="1.3 项目结构"></a>1.3 项目结构</h3><p><img src="/post_image/blog-img/image_11.png" alt></p>
<ul>
<li><code>.gradle</code>  gradle 运行时相关配置文件，不用多说了。</li>
<li><code>文件夹 build</code> 项目编译后路径</li>
<li><code>文件夹 gradle</code> <ul>
<li><code>文件夹 wrapper</code> 统一管理 gradle 版本，优点是即使没有装 gradle 环境可以运行里面的 jar 直接构建项目。</li>
</ul>
</li>
<li><code>build.gradle</code> gradle的用户配置文件（构建脚本），相当于 maven 的 pom.xml.</li>
<li><code>gradlew</code> gradle 环境搭建的脚本（linux）</li>
<li><code>gradlew.bat</code> gradle 环境搭建的脚本（windows）</li>
<li><code>settings.gradle</code> 其他用户配置</li>
</ul>
<h3 id="1-4-自定义存储仓库"><a href="#1-4-自定义存储仓库" class="headerlink" title="1.4 自定义存储仓库"></a>1.4 自定义存储仓库</h3><p>更改 build.gradle 配置文件：</p>
<figure class="highlight xml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">// buildscript 代码块中脚本优先执行</span><br><span class="line">buildscript &#123;</span><br><span class="line"></span><br><span class="line">    // ext 用于定义动态属性</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion = '1.5.17.BUILD-SNAPSHOT'</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 使用了 Maven 的中央仓库（也可以指定其他仓库）</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">        maven &#123; url "https://repo.spring.io/snapshot" &#125;</span><br><span class="line">        maven &#123; url "https://repo.spring.io/milestone" &#125;</span><br><span class="line">        // 使用 aliyun 镜像仓库</span><br><span class="line">//        maven &#123; url 'http://maven.aliyun.com/nexus/content/groups/public/' &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 依赖关系</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        // classpath 声明说明了在执行其余的脚本时，ClassLoader 可以使用这些依赖项</span><br><span class="line">        classpath("org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;")</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用插件</span><br><span class="line">apply plugin: 'java'</span><br><span class="line">apply plugin: 'eclipse'</span><br><span class="line">apply plugin: 'org.springframework.boot'</span><br><span class="line"></span><br><span class="line">group = 'xyz.yuzh.spring.boot.blog'</span><br><span class="line"></span><br><span class="line">// 打包的类型为 jar，并指定了生成的打包的文件名称和版本</span><br><span class="line">jar &#123;</span><br><span class="line">    baseName = 'hello-world'</span><br><span class="line">    version = '0.0.1-SNAPSHOT'</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">version = '0.0.1-SNAPSHOT'</span><br><span class="line">// 指定编译 .java 文件的 JDK 版本</span><br><span class="line">sourceCompatibility = 1.8</span><br><span class="line"></span><br><span class="line">// 默认使用了 Maven 的中央仓库。</span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">    maven &#123; url "https://repo.spring.io/snapshot" &#125;</span><br><span class="line">    maven &#123; url "https://repo.spring.io/milestone" &#125;</span><br><span class="line">//    maven &#123; url 'http://maven.aliyun.com/nexus/content/groups/public/' &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 依赖关系</span><br><span class="line">dependencies &#123;</span><br><span class="line">    // 该依赖对于编译发行是必须的</span><br><span class="line">    compile('org.springframework.boot:spring-boot-starter-web')</span><br><span class="line">    // 该依赖对于编译测试是必须的，默认包含编译产品依赖和编译时依</span><br><span class="line">    testCompile('org.springframework.boot:spring-boot-starter-test')</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-5-编写程序代码及测试用例"><a href="#1-5-编写程序代码及测试用例" class="headerlink" title="1.5 编写程序代码及测试用例"></a>1.5 编写程序代码及测试用例</h3><p>控制层：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@RestController</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="hljs-meta">@RequestMapping</span>(value = <span class="hljs-string">"/hello"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">"hello gradle!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用例代码：使用了 Spring Mvc 单元测试类 MockMVC，<a href="https://blog.csdn.net/kqzhu/article/details/78836275" target="_blank" rel="noopener">详解参考</a></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="hljs-meta">@SpringBootTest</span></span><br><span class="line"><span class="hljs-meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringBootBlogApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-keyword">private</span> MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Test</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testHello</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ResultActions actions = mockMvc.perform(MockMvcRequestBuilders.get(<span class="hljs-string">"/hello"</span>).</span><br><span class="line">                accept(MediaType.APPLICATION_JSON)); <span class="hljs-comment">// 指定客户端能够接收的内容类型</span></span><br><span class="line"></span><br><span class="line">        actions.andExpect(status().isOk()); <span class="hljs-comment">// 添加断言, 添加ResultMatcher验证规则，验证控制器执行完成后结果是否正确.</span></span><br><span class="line">        actions.andExpect(content().string(equalTo(<span class="hljs-string">"hello gradle!"</span>))); <span class="hljs-comment">// 添加断言,返回结果内容是否是指定的.</span></span><br><span class="line">        actions.andDo(MockMvcResultHandlers.print()); <span class="hljs-comment">// 添加一个结果处理器，输出整个响应结果信息.</span></span><br><span class="line">        actions.andReturn(); <span class="hljs-comment">// 执行完毕返回相应的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-6-以-Gradle-Wrapper-编译项目"><a href="#1-6-以-Gradle-Wrapper-编译项目" class="headerlink" title="1.6 以 Gradle / Wrapper 编译项目"></a>1.6 以 Gradle / Wrapper 编译项目</h3><p>当本地没有装 gradle 环境时，可以通过 wrapper 构建项目，只需在根目录执行即可打包：</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradlew build</span><br></pre></td></tr></table></figure>
<p><img src="/post_image/blog-img/image_12.png" alt></p>
<p>运行：</p>
<p><img src="/post_image/blog-img/image_13.png" alt></p>
<h3 id="1-7-Gradle-项目运行的三种方式"><a href="#1-7-Gradle-项目运行的三种方式" class="headerlink" title="1.7 Gradle 项目运行的三种方式"></a>1.7 Gradle 项目运行的三种方式</h3><p>1). 使用 java  -jar </p>
<p>2). 通过 SpringApplication.run()</p>
<p>3). 使用 Spring Boot Gradle 插件</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle bootRun / gradlew bootRun (wrapper 方式)</span><br></pre></td></tr></table></figure>
<p><img src="/post_image/blog-img/image_14.png" alt></p>
<h2 id="二、-Thymeleaf-模板引擎"><a href="#二、-Thymeleaf-模板引擎" class="headerlink" title="二、 Thymeleaf 模板引擎"></a>二、 Thymeleaf 模板引擎</h2><h3 id="2-1-Thymeleaf"><a href="#2-1-Thymeleaf" class="headerlink" title="2.1 Thymeleaf"></a>2.1 Thymeleaf</h3><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#introducing-thymeleaf" target="_blank" rel="noopener">官方文档</a></p>
<p>Java 模板引擎。能够处理 Html / XML / JavaScript / CSS / 甚至纯文本 。类似于 JSP / FreeMarker</p>
<p>自然模板。原型即页面</p>
<p>语法优雅易懂。支持 OGNL / SpringEL</p>
<p>遵从 Web 标准。支持 HTML5</p>
<h3 id="2-2-标准方言（语法）"><a href="#2-2-标准方言（语法）" class="headerlink" title="2.2 标准方言（语法）"></a>2.2 标准方言（语法）</h3><p><strong>名称空间</strong></p>
<pre><code>&lt;span th:text=&quot;…&quot;&gt;
需要引入命名空间:
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
</code></pre><p>或</p>
<pre><code>&lt;span data-th-text=&quot;…&quot;&gt;
符合html5标准，不需要引入命名空间
</code></pre><p><strong>变量表达式 - ${…}</strong></p>
<pre><code>&lt;span th:text=&quot;${book.author.name}&quot;&gt;
</code></pre><p><strong>消息表达式（i8n / 国际化）- #{…}</strong></p>
<pre><code>&lt;th th:text=&quot;#{header.address.city}&quot;&gt;…&lt;/th&gt;
&lt;th th:text=&quot;#{header.address.country}&quot;&gt;…&lt;/th&gt;
</code></pre><p><strong>选择表达式 - <code>*{…}</code></strong></p>
<pre><code>&lt;div th:object=&quot;${book}&quot;&gt;
    ...
    &lt;span th:text=&quot;*{title}&quot;&gt;...&lt;/span&gt;
    ...
&lt;/div&gt;
</code></pre><p>与变量表达式的区别：它是在当前选择的对象而不是整个上下文变量映射上执行。<code>${book}</code>  取的是整个上下文中的变量，而 <code>*{title}</code> 是在当前 <code>${book}</code>  里边的变量。因此变量表达式一定程度上提高了效率。</p>
<p><strong>链接表达式 - @{…}</strong></p>
<p>链接表达式可以是相对的，在这种情况下，应用程序上下文将不会作为 URL 的前缀</p>
<pre><code>&lt;a th:href=&quot;@{../documents/report}&quot;&gt;…&lt;/a&gt;
</code></pre><p>也可以是服务器相对的，同样也没有应用程序上下文前缀</p>
<pre><code>&lt;a th:href=&quot;@{~/contents/main}&quot;&gt;…&lt;/a&gt;
</code></pre><p>协议相对的（类似绝对 URL，但浏览器将使用在显示的页面中使用的相同的 HTTP 或 HTTPS 协议）</p>
<pre><code>&lt;a th:href=&quot;@{//static.mycompany.com/res/initial}&quot;&gt;…&lt;/a&gt;
</code></pre><p>也可以是绝对的</p>
<pre><code>&lt;a th:href=&quot;@{http://static.mycompany.com/main}&quot;&gt;…&lt;/a&gt;
</code></pre><p><strong>模板布局</strong></p>
<p><code>th:insert</code> 将公共片段整个插入到声明引入的元素中</p>
<p><code>th:replace</code> 将声明引入的元素替换为公共片段</p>
<p><code>th:include</code> 将被引入的片段的内容包含进这个标签</p>
<pre><code>&lt;footer th:fragment=&quot;copy&quot;&gt;
    &amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/footer&gt;

引入方式
&lt;div th:insert=&quot;footer :: copy&quot;&gt;&lt;/div&gt;
&lt;div th:replace=&quot;footer :: copy&quot;&gt;&lt;/div&gt;
&lt;div th:include=&quot;footer :: copy&quot;&gt;&lt;/div&gt;

效果
&lt;div&gt;
    &lt;footer&gt;
        &amp;copy; 2011 The Good Thymes Virtual Grocery
    &lt;/footer&gt;
&lt;/div&gt;

&lt;footer&gt;
    &amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/footer&gt;

&lt;div&gt;
    &amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/div&gt;
</code></pre><p>也可以使用指定的 id 来替代 <code>th:fragment=&quot;copy&quot;</code> 引用时指定 <code>#id</code></p>
<p><strong>字面量</strong></p>
<p>文本 <code>&lt;span th:text=&quot;&#39;web application&#39;&quot;&gt;</code> 单引号包裹</p>
<p>数字 <code>&lt;span th:text=&quot;2015&quot;&gt; or &lt;span th:text=&quot;2980 + 3&quot;&gt;</code></p>
<p>布尔：<code>&lt;span th:if=&quot;${user.isAdmin()} == false&quot;&gt;</code> or  <code>&lt;span th:if=&quot;${user.name} == null</code></p>
<p>算术操作 (+ 、-、*、/、%)：<code>&lt;span th:with=&quot;isEven=(${prodStat.count} % 2 == 0)&quot;&gt;</code></p>
<p>比较和等价：<code>&gt; 、&lt; 、&gt;= 、 &lt;= （gt、lt、ge、le）</code></p>
<p>等价： <code>== 、 != (eq、ne)</code></p>
<p><strong>条件运算</strong></p>
<pre><code>&lt;span th:class=&quot;${row.even} ? ‘even&apos; : ‘odd&apos; &quot;&gt;&lt;/span&gt;
</code></pre><p><strong>无操作 - __</strong></p>
<pre><code>&lt;span th:text=&quot;${user.name} ? : __&quot;&gt;no user authenticated&lt;/span&gt;
</code></pre><p>用户名不存在取无操作运算符，保留原始文本值。</p>
<p><strong>设置属性值</strong></p>
<p>设置任意属性值 <code>th:attr</code></p>
<pre><code>th:attr=&quot;action=@{/subsctibe}&quot; 设置action属性值
</code></pre><p>设置指定属性值，比如:  <code>th:action / th:value  / th:text</code></p>
<p>固定布尔属性， <code>th:checked=&quot;${user.active}&quot;</code> 如果结果为 true 设置为选中状态</p>
<p><strong>迭代器</strong></p>
<p>基本迭代 th:each</p>
<pre><code>&lt;li th:each=“book : ${books}” th:text=“${book.title}”&gt;En las Orillas del Sar&lt;/li&gt;
</code></pre><p>状态变量：<code>index（0开始）、count（1开始）、size、current、even/odd、first、last</code></p>
<p><strong>条件语句</strong></p>
<p>th:if / th:unless （成立时 / 不成立时）</p>
<p>th:switch</p>
<pre><code>&lt;div th:switch=&quot;${user.role}&quot;&gt;
    &lt;p th:case=&quot;&apos;admin&apos;&quot;&gt;user is an administrator&lt;/p&gt;
    &lt;p th:case=&quot;${roles.manager}&quot;&gt;user is an manager&lt;/p&gt;
    &lt;p th:case=&quot;*&quot;&gt;user is some other thing&lt;/p&gt;
&lt;/div&gt;
</code></pre><p><strong>注释</strong></p>
<p>1). 标准的 html 注释 <code>&lt;!-- --&gt;</code></p>
<p>2). thymeleaf 解析器注释块 <code>&lt;!--/*  */--&gt;</code></p>
<pre><code>删除 &lt;!--/* 和 */--&gt; 之间的所有内容

&lt;!--/*--&gt; 
  &lt;div&gt;you can see me only before thymeleaf processes me!&lt;/div&gt;
&lt;!--*/--&gt;
</code></pre><p>3). 原型注释块：当模板静态打开时（比如原型设计），原型注释块所注释的代码将被注释，而在模板执行时，这些注释的代码，会被显示出来。</p>
<p>原型设计代码：</p>
<pre><code>&lt;span&gt;hello&lt;/span&gt;
&lt;!--/*/ 
    &lt;div th:th:text=&quot;${...}&quot;&gt;
        ...
    &lt;/div&gt;
/*/--&gt;
&lt;span&gt;goodbye!&lt;/span&gt;
</code></pre><p>模板渲染执行后：</p>
<pre><code>&lt;span&gt;hello&lt;/span&gt;
    &lt;div th:th:text=&quot;${...}&quot;&gt;
        ...
    &lt;/div&gt;
&lt;span&gt;goodbye!&lt;/span&gt;
</code></pre><p><strong>内联表达式</strong></p>
<p>[[…]] 或 [(…)] 分别对应于 th:text（会转译特殊字符） 和 th:utext（不会转译特殊字符）</p>
<p>禁用内联：<code>th:inline=&quot;none&quot;</code></p>
<p>Javascript 内联：<code>th:inline=&quot;JavaScript&quot;</code></p>
<p>CSS 内联：<code>th:inline=&quot;css&quot;</code></p>
<h3 id="2-3-表达式基本对象"><a href="#2-3-表达式基本对象" class="headerlink" title="2.3 表达式基本对象"></a>2.3 表达式基本对象</h3><p><code>#ctx</code>：上下文对象。是 <code>org.thymeleaf.context.IContext</code> 或者 <code>org.thymeleaf.context.IWebContext</code> 的实现。</p>
<p><code>#locale</code>： 直接访问与 <code>java.util.Locale</code> 关联的当前的请求。</p>
<pre><code>${#ctx.locale}
${#ctx.bariableNames}

${#ctx.request}
${#ctx.response}
${#ctx.session}
${#ctx.servletContext}

${#locale}
</code></pre><p><strong>Request/session 等属性</strong></p>
<p>param：用于检索请求参数</p>
<p>session：用于检索session属性</p>
<p>application：用于检索application/servlet上下文属性</p>
<pre><code>${#param.foo}
${#param.size()}
${#param.isEmpty()}
${#param.containsKey(&apos;foo&apos;)}

${#session.foo}
${#session.size()}
${#session.isEmpty()}
${#session.containsKey(&apos;foo&apos;)}

${#application.foo}
${#application.size()}
${#application.isEmpty()}
${#application.containsKey(&apos;foo&apos;)}
</code></pre><p><strong>Web上下文对象</strong></p>
<p><code>#request</code>：直接访问与当前请求关联的 HttpServletRequest 对象</p>
<p><code>#session</code>：直接访问与当前请求关联的 HttpSession 对象</p>
<p><code>#servletContext</code>：直接访问与当前请求关联的 servletContext 对象</p>
<pre><code>${#request.getAttribute(&apos;foo&apos;)}
${#request.getParameter(&apos;foo&apos;)}
${#request.getContextPath()}
${#request.getRequestName())}

${#session.getAttribute(&apos;foo&apos;)}
${#session.id}
${#session.lastAccessedTime}

${#servletContext.getAttribute(&apos;foo&apos;)}
${#servletContext.contextPath}
</code></pre><h3 id="2-4-集成-Spring-Boot"><a href="#2-4-集成-Spring-Boot" class="headerlink" title="2.4 集成 Spring Boot"></a>2.4 集成 Spring Boot</h3><p>修改 buid.gradle。添加对 Thymeleaf 的依赖，自定义 Thymeleaf 和 Thyme leaf Layout Dialect 的版本。</p>
<figure class="highlight xml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    // ext 用于定义动态属性（统一管理版本）</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion = '1.5.17.BUILD-SNAPSHOT'</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 指定 Thymeleaf 和 Thymeleaf Layout Dialect 的版本</span><br><span class="line">    ext['thymeleaf.version'] = '3.0.3.RELEASE'</span><br><span class="line">    ext['thymeleaf-layout-dialect.version'] = '2.2.0'</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">// 依赖关系</span><br><span class="line">dependencies &#123;</span><br><span class="line">   ......</span><br><span class="line">    // 添加 Thymeleaf 依赖</span><br><span class="line">    testCompile('org.springframework.boot:spring-boot-starter-thymeleaf')</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改 Spring Boot 的 application.properties（或 application.yml ）</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">spring:</span></span><br><span class="line"><span class="hljs-attr">  thymeleaf:</span></span><br><span class="line"><span class="hljs-attr">    encoding:</span> <span class="hljs-string">UTF-8</span></span><br><span class="line"><span class="hljs-attr">    cache:</span> <span class="hljs-literal">false</span></span><br><span class="line">    <span class="hljs-comment"># 使用 HTML5 标准</span></span><br><span class="line"><span class="hljs-attr">    mode:</span> <span class="hljs-string">HTML5</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-Thymeleaf-实战"><a href="#2-5-Thymeleaf-实战" class="headerlink" title="2.5 Thymeleaf 实战"></a>2.5 Thymeleaf 实战</h3><p><strong>接口设计</strong></p>
<table>
<thead>
<tr>
<th>接口</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET /users</td>
<td>返回用于展示用户列表的 list.html</td>
</tr>
<tr>
<td>GET /users/{id}</td>
<td>返回用于展示用户的 view.html</td>
</tr>
<tr>
<td>GET /users/form</td>
<td>返回用于新增或者修改用户的 form.html</td>
</tr>
<tr>
<td>POST /users</td>
<td>新增或修改用户，成功后重定向到 list.html</td>
</tr>
<tr>
<td>GET /users/delete/{id}</td>
<td>根据 id 删除相应的用户数据，成功后重定向到 list.html</td>
</tr>
<tr>
<td>GET /users/modify/{id}</td>
<td>根据 id 获取相应的用户数据，并返回 form.html 用来执行修改</td>
</tr>
</tbody>
</table>
<p><strong>后台编码</strong></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Repository</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepositoryImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserRepository</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 累加器</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> AtomicLong counter = <span class="hljs-keyword">new</span> AtomicLong();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 暂存数据</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    ConcurrentMap&lt;Long, User&gt; userMap = <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">saveOrUpdateUser</span><span class="hljs-params">(User user)</span> </span>&#123;</span><br><span class="line">        Long id = user.getId();</span><br><span class="line">        <span class="hljs-keyword">if</span> (id &lt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="line">            id = counter.incrementAndGet();</span><br><span class="line">            user.setId(id);</span><br><span class="line">        &#125;</span><br><span class="line">        userMap.put(id, user);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(Long id)</span> </span>&#123;</span><br><span class="line">        userMap.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUserById</span><span class="hljs-params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> userMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">listUser</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(userMap.values());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@RestController</span></span><br><span class="line"><span class="hljs-meta">@RequestMapping</span>(value = <span class="hljs-string">"/users"</span>)</span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getUserList</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> userRepository.listUser();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询所有用户 [ GET /users ]</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@GetMapping</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">list</span><span class="hljs-params">(ModelMap map)</span> </span>&#123;</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"users"</span>, getUserList());</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"title"</span>, <span class="hljs-string">"用户管理"</span>);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"users/list"</span>, <span class="hljs-string">"userModel"</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据 id 查询用户 [ GET /users/&#123;id&#125; ]</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">getUserById</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> Long id, ModelMap map) </span>&#123;</span><br><span class="line">        User user = userRepository.getUserById(id);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"user"</span>, user);</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"title"</span>, <span class="hljs-string">"查看用户"</span>);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"users/view"</span>, <span class="hljs-string">"userModel"</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 跳转到新建用户 [ GET /users/form ]</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"/form"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">createForm</span><span class="hljs-params">(ModelMap map)</span> </span>&#123;</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"user"</span>, <span class="hljs-keyword">new</span> User());</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"title"</span>, <span class="hljs-string">"创建用户"</span>);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"users/form"</span>, <span class="hljs-string">"userModel"</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 新建及修改 [ POST /users ]</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@PostMapping</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">create</span><span class="hljs-params">(User user)</span> </span>&#123;</span><br><span class="line">        userRepository.saveOrUpdateUser(user);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"redirect:/users"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 删除用户 [ GET /users/delete/&#123;id&#125; ]</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"delete/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">delete</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> Long id, ModelMap map) </span>&#123;</span><br><span class="line">        userRepository.deleteUser(id);</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"users"</span>, getUserList());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"redirect:/users"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 跳转修改页面 [ GET /users/modify/&#123;id&#125; ]</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"modify/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">update</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> Long id, ModelMap map) </span>&#123;</span><br><span class="line">        User user = userRepository.getUserById(id);</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"user"</span>, user);</span><br><span class="line">        map.addAttribute(<span class="hljs-string">"title"</span>, <span class="hljs-string">"修改用户"</span>);</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView(<span class="hljs-string">"users/form"</span>, <span class="hljs-string">"userModel"</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>前台设计</strong></p>
<p>fragment/header.html：共用的头部页面</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span> <span class="hljs-attr">xmlns:layout</span>=<span class="hljs-string">"http://www.ultraq.net.nz/thymeleaf/layout"</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Thymeleaf in action<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">"header"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Thymeleaf in action<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;~/users&#125;"</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;~/users/form&#125;"</span>&gt;</span>新增<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>fragment/footer.html：共用的底部页面</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">"footer"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;http://blog.yuzh.xyz&#125;"</span>&gt;</span>welcome to blog.yuzh.xyz<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>users/form.html 新增/修改</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span> <span class="hljs-attr">xmlns:layout</span>=<span class="hljs-string">"http://www.ultraq.net.nz/thymeleaf/layout"</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Thymeleaf in action<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/header::header&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;userModel.title&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@&#123;~/users&#125;"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;userModel!=null&#125;?$&#123;userModel.user.name&#125;"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"name"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;userModel!=null&#125;?$&#123;userModel.user.email&#125;"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"email"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;userModel!=null&#125;?$&#123;userModel.user.age&#125;"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"age"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;userModel.title=='创建用户'&#125; ? 'register' : 'modify'"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">"$&#123;userModel.title=='修改用户'&#125;"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"$&#123;userModel.user.id&#125;"</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/footer::footer&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>users/list.html 列表展示</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span> <span class="hljs-attr">xmlns:layout</span>=<span class="hljs-string">"http://www.ultraq.net.nz/thymeleaf/layout"</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Thymeleaf in action<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/header :: header&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;userModel!=null&#125;?$&#123;userModel.title&#125;"</span>&gt;</span>yuzh<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">"1"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>ID<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Age<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>操作<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">"$&#123;userModel.users.size()&#125;==0"</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"5"</span>&gt;</span>没有用户信息！<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"user:$&#123;userModel.users&#125;"</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;user.id&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;user.email&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;user.name&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"$&#123;user.age&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;~/users/&#125;+$&#123;user.id&#125;"</span>&gt;</span>修改<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;~/users/delete/&#125;+$&#123;user.id&#125;"</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line">        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/footer::footer&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>users/view 查看用户</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span> <span class="hljs-attr">xmlns:layout</span>=<span class="hljs-string">"http://www.ultraq.net.nz/thymeleaf/layout"</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Thymeleaf in action<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/header :: header&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>[[$&#123;userModel.title&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@&#123;~/users/modify/&#125;+$&#123;userModel.user.id&#125;"</span>&gt;</span>修改信息<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ID：[[$&#123;userModel.user.id&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name：[[$&#123;userModel.user.name&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Email：[[$&#123;userModel.user.email&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Age：[[$&#123;userModel.user.age&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">"~&#123;fragments/footer :: footer&#125;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="三、-Spring-Data-JPA-数据持久化"><a href="#三、-Spring-Data-JPA-数据持久化" class="headerlink" title="三、 Spring Data JPA 数据持久化"></a>三、 Spring Data JPA 数据持久化</h2><h3 id="3-1-JPA-简介"><a href="#3-1-JPA-简介" class="headerlink" title="3.1 JPA 简介"></a>3.1 JPA 简介</h3><p>JPA (Java Persistence API) 是用于管理 JavaEE 和 JavaSE环境中的持久化，以及对象/关系映射的 Java API。</p>
<p>JPA 是用于处理数据持久化的接口（规范），基于 JPA 规范的实现有 EclipiseLink、Hibernate、Apache OpenJPA</p>
<h3 id="3-2-JPA-核心概念"><a href="#3-2-JPA-核心概念" class="headerlink" title="3.2 JPA 核心概念"></a>3.2 JPA 核心概念</h3><p>理解 jpa 的核心概念，才能更好的使用 jpa 持久化。没有符合任意一项都不能成功完成持久化！</p>
<p><strong>实体</strong></p>
<ul>
<li>实体表示关系型数据库中表</li>
<li>每个实体实例对应于表中的行</li>
<li>类必须使用 javax.persistence.Entity 注解</li>
<li>类必须有一个 public 或 protected 的无参数构造器</li>
<li>实体实例被当作以分离对象方式进行传递（例如通过会话 bean 的远程业务接口），则该类必须实现 Serializable 接口</li>
<li>必须要有唯一的对象标识符：简单主键（javax.persistence.Id）、复合主键（javax.persistence.Embeddedld 和 javax.persistence.IdClass）</li>
</ul>
<p><strong>关系</strong></p>
<ul>
<li>一对一：@OneToOne</li>
<li>一对多：@OneToMany</li>
<li>多对一：@ManyToOne</li>
<li>多对多：@ManyToMany</li>
</ul>
<p><strong>EntityManager (管理实体的接口</strong></p>
<p><em>管理实体的接口</em></p>
<ul>
<li>定义用于与持久化上下文进行交互的方法</li>
<li>创建和删除持久实体实例，通过实体的主键查找实体</li>
<li>允许在实体上运行查询</li>
</ul>
<p><em>获取 EntityManager 实例</em></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@PersistenceUnit</span> </span><br><span class="line">EntityManagerFactory emf; <span class="hljs-comment">// 用于创建 EntityManager 的工厂类</span></span><br><span class="line">EntityManager em;</span><br><span class="line"><span class="hljs-meta">@Resource</span></span><br><span class="line">UserTransaction utx; <span class="hljs-comment">// 事务</span></span><br><span class="line">...</span><br><span class="line">em = emf.createEmtityManager(); <span class="hljs-comment">// 创建 EntityManager </span></span><br><span class="line"><span class="hljs-keyword">try</span>&#123;</span><br><span class="line">    utx.begin(); <span class="hljs-comment">// 事务开始</span></span><br><span class="line">    em.persist(SomeEntity); <span class="hljs-comment">// 通过实体管理器持久化一个实体对象</span></span><br><span class="line">    em.merge(AnotherEntity); <span class="hljs-comment">// 通过实体管理器合并一个实体对象</span></span><br><span class="line">    em.remove(ThirdEntity); <span class="hljs-comment">// 通过实体管理器移除一个实体对象</span></span><br><span class="line">    utx.commit(); <span class="hljs-comment">// 事务提交</span></span><br><span class="line">&#125; <span class="hljs-keyword">catch</span> (Exception e)&#123;</span><br><span class="line">    utx.rollback(); <span class="hljs-comment">// 回滚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>查找实体</em></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@PersistenceContext</span></span><br><span class="line">EntityManager em;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">enterOrder</span><span class="hljs-params">(<span class="hljs-keyword">int</span> custID, CustomerOrder newOrder)</span></span>&#123;</span><br><span class="line">    Customer cust = em.find(Customer.class, custID); <span class="hljs-comment">// 通过实体管理器查找指定类型的实体</span></span><br><span class="line">    cust.getOrders().add(newOrder);</span><br><span class="line">    newOrder.setCustomer(cust);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-Spring-Data-JPA-使用概括"><a href="#3-3-Spring-Data-JPA-使用概括" class="headerlink" title="3.3 Spring Data JPA 使用概括"></a>3.3 Spring Data JPA 使用概括</h3><p><strong>什么是 Spring Data JPA：</strong></p>
<ul>
<li>Spring Data 家族的一部分</li>
<li>对基于 JPA 的数据访问层的增强支持</li>
<li>更容易构建基于使用 Spring 的数据访问技术栈的应用程序</li>
</ul>
<p><strong>常用接口：</strong></p>
<ul>
<li>CrudRepository 定义了一些增删改查的通用接口</li>
<li><p>PagingAndSortingRepository 用于分页和排序的接口，扩展于 CrudRepository</p>
</li>
<li><p>自定义接口：继承 Repository 及子类</p>
</li>
</ul>
<h3 id="3-4-Spring-Data-JPA-Hibernate-Spring-Boot-集成"><a href="#3-4-Spring-Data-JPA-Hibernate-Spring-Boot-集成" class="headerlink" title="3.4. Spring Data JPA / Hibernate / Spring Boot 集成"></a>3.4. Spring Data JPA / Hibernate / Spring Boot 集成</h3><p>修改 build.gradle </p>
<figure class="highlight gradle hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">buildscript</span> &#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="hljs-comment">// 自定义  Hibernate 的版本</span></span><br><span class="line">    ext[<span class="hljs-string">'hibernate.version'</span>] = <span class="hljs-string">'5.2.8.Final'</span></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// 依赖关系</span></span><br><span class="line"><span class="hljs-keyword">dependencies</span> &#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="hljs-comment">// 添加 Spring Data JPA 的依赖</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-jpa'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// 添加 MySQL连接驱动 的依赖</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'mysql:mysql-connector-java:6.0.5'</span>)</span><br><span class="line">    </span><br><span class="line">     <span class="hljs-comment">// 添加 H2 的依赖 内存数据库</span></span><br><span class="line">    <span class="hljs-keyword">runtime</span>(<span class="hljs-string">'com.h2database:h2:1.4.193'</span>)</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-5-数据持久化实战"><a href="#3-5-数据持久化实战" class="headerlink" title="3.5 数据持久化实战"></a>3.5 数据持久化实战</h3><h4 id="3-5-1-H2-内存数据库"><a href="#3-5-1-H2-内存数据库" class="headerlink" title="3.5.1 H2 内存数据库"></a>3.5.1 H2 内存数据库</h4><p><strong>后台编码</strong></p>
<ul>
<li>实体 User</li>
<li>资源库 UserRepository</li>
<li>控制器 UserController</li>
</ul>
<p>修改实体：实现 <code>Serializable</code> 接口、添加 <code>@Entity</code> 、设置主键 <code>@Id</code> 和自增策略 <code>@GeneratedValue</code></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Entity</span> <span class="hljs-comment">// 实体</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Id</span> <span class="hljs-comment">// 主键</span></span><br><span class="line">    <span class="hljs-meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY) <span class="hljs-comment">// 自增策略</span></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> id;</span><br><span class="line">    <span class="hljs-keyword">private</span> String name;</span><br><span class="line">    <span class="hljs-keyword">private</span> String email;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">// JPA 的规范要求无参构造函数；设为 protected 防止直接使用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">long</span> id, String name, String email, <span class="hljs-keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">        <span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">        <span class="hljs-keyword">this</span>.email = email;</span><br><span class="line">        <span class="hljs-keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-string">"User&#123;"</span> +</span><br><span class="line">                <span class="hljs-string">"id="</span> + id +</span><br><span class="line">                <span class="hljs-string">", name='"</span> + name + <span class="hljs-string">'\''</span> +</span><br><span class="line">                <span class="hljs-string">", email='"</span> + email + <span class="hljs-string">'\''</span> +</span><br><span class="line">                <span class="hljs-string">", age="</span> + age +</span><br><span class="line">                <span class="hljs-string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改资源库：删除自己的实现、继承 JPA 的 <code>@Repository</code> 接口</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> yu.zh [yuzh233@gmail.com] 2018/09/25 21:57</span></span><br><span class="line"><span class="hljs-comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="hljs-comment"> * CrudRepository 提供了常用接口，自己无需编写接口。</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span>&lt;<span class="hljs-title">User</span>, <span class="hljs-title">Long</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改控制器：将自己的实现方法的调用改为 JPA 的常用 api，如：<code>findAll()</code> /  <code>findOne(id)</code> /  <code>save(user)</code> /  <code>delete(id)</code> </p>
<p><strong>访问与验证数据</strong></p>
<p>能正常访问与操作，数据存储在了 <code>内存数据库 H2</code> ,使用 h2 的 <code>控制台</code> 访问数据。</p>
<p>设置显示 h2 控制台：</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">spring:</span></span><br><span class="line">  <span class="hljs-comment"># 使用 H2 控制台</span></span><br><span class="line">  <span class="hljs-string">h2.console.enabled:</span> <span class="hljs-literal">true</span></span><br></pre></td></tr></table></figure>
<p>访问控制台： <a href="http://localhost:8080/h2-console/" target="_blank" rel="noopener">http://localhost:8080/h2-console/</a></p>
<p><img src="/post_image/blog-img/image_15.png" alt></p>
<p>注意：JDBC URL 需要手动更改为 <code>jdbc:h2:mem:testdb</code> 才能正常访问，否则看不到保存的表。接着点击 <code>connect</code> </p>
<p><img src="/post_image/blog-img/image_17.png" alt></p>
<p>可以看到 JPA 在内存型数据中自动保存了一张 <code>USER</code> 表，就是 User 实体所映射的表，并且根据主键关系与实体属性映射了添加的数据，我们可以与使用关系型数据库一样的方式对内存型数据库执行 SQL 操作。</p>
<h4 id="3-5-2-MySql-物理数据库"><a href="#3-5-2-MySql-物理数据库" class="headerlink" title="3.5.2 MySql 物理数据库"></a>3.5.2 MySql 物理数据库</h4><p>修改配置文件：</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">spring:</span></span><br><span class="line">  <span class="hljs-comment"># 模板引擎</span></span><br><span class="line"><span class="hljs-attr">  thymeleaf:</span></span><br><span class="line"><span class="hljs-attr">    encoding:</span> <span class="hljs-string">UTF-8</span></span><br><span class="line"><span class="hljs-attr">    cache:</span> <span class="hljs-literal">false</span></span><br><span class="line"><span class="hljs-attr">    mode:</span> <span class="hljs-string">HTML5</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment"># 使用 H2 控制台</span></span><br><span class="line">  <span class="hljs-string">h2.console.enabled:</span> <span class="hljs-literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment"># 数据源</span></span><br><span class="line"><span class="hljs-attr">  datasource:</span></span><br><span class="line"><span class="hljs-attr">    url:</span> <span class="hljs-attr">jdbc:mysql://localhost/blog?characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="hljs-attr">    username:</span> <span class="hljs-string">root</span></span><br><span class="line"><span class="hljs-attr">    password:</span> <span class="hljs-string">admin</span></span><br><span class="line"><span class="hljs-attr">    driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment"># JPA</span></span><br><span class="line"><span class="hljs-attr">  jpa:</span></span><br><span class="line"><span class="hljs-attr">    show-sql:</span> <span class="hljs-literal">true</span></span><br><span class="line"><span class="hljs-attr">    hibernate:</span></span><br><span class="line">      <span class="hljs-comment"># 每次启动都会删除之前的表结构和数据并重新生成新的表结构</span></span><br><span class="line"><span class="hljs-attr">      ddl-auto:</span> <span class="hljs-string">create-drop</span></span><br></pre></td></tr></table></figure>
<p>启动项目，可以看到 hibernate 自动创建了表结构，字段和实体属性一一对应。</p>
<p><img src="/post_image/blog-img/image_18.png" alt></p>
<p>浏览器存入了两条数据之后，查看数据库：</p>
<p><img src="/post_image/blog-img/image_19.png" alt></p>
<p>数据成功存入，并且 h2 数据库没有存入，说明指定了 mysql 作为数据源， h2 的配置可有可无了。</p>
<p><strong>在实际场景中使用 MySql 这种大型数据库，在开发测试过程中建议使用 H2 这种内存数据库，提高开发效率。</strong></p>
<h2 id="四、Elastic-Search-全文搜索"><a href="#四、Elastic-Search-全文搜索" class="headerlink" title="四、Elastic Search 全文搜索"></a>四、Elastic Search 全文搜索</h2><p><strong>概念</strong>：全文搜索是一种将文件中所有文本与搜索项匹配的文字资料检索方法</p>
<p><strong>实现原理</strong>：</p>
<ul>
<li><p>建立文本库：搜索的数据源</p>
</li>
<li><p>建立索引：提取规律，以便快速查找。</p>
</li>
<li><p>执行搜索：用户请求</p>
</li>
<li><p>过滤结果：对搜索结果处理</p>
</li>
</ul>
<p><strong>Elastic Search 是什么</strong>：</p>
<ul>
<li><p>高度可扩展的开源全文搜索和分析引擎</p>
</li>
<li><p>快速、近实时地对大数据进行存储、搜索和分析</p>
</li>
<li><p>用来支持又复杂的数据搜索需求的企业级应用</p>
</li>
</ul>
<p><strong>Elastic Search 特点</strong>：</p>
<ul>
<li><p>分布式</p>
</li>
<li><p>高可用</p>
</li>
<li><p>多 API</p>
</li>
<li><p>面向文档</p>
</li>
<li><p>异步写入</p>
</li>
<li><p>近实时</p>
</li>
<li><p>基于 Lucene 搜索引擎</p>
</li>
<li><p>遵循 Apache 协议</p>
</li>
</ul>
<p><strong>Elastic Search 核心概念</strong>：</p>
<ul>
<li><p>近实时：根据刷新策略定期刷新索引到索引库，在存入索引库和读取索引库数据效率之间折中。</p>
</li>
<li><p>集群：一个或多个的节点的集合，用于保存应用的全部数据并提供基于全部节点的集成式搜索功能。</p>
</li>
<li><p>节点：集群中的单台服务器，用来保存数据并参与集群保存和搜索数据的操作。</p>
</li>
<li><p>索引：用于加快搜索速度，在 ES 中，索引是相似文档的集合。</p>
</li>
<li><p>类型：对索引中包含文档的细分，区分不同类型的索引。</p>
</li>
<li><p>文档：进行索引的基本单位，与索引中的类型是相对应的。每一个具体的索引有一个文档与之对应，使用 json 格式表示。文档的实例就是对应关系型数据中的实体（具体的数据）。</p>
</li>
<li><p>分片：当索引超出单个节点所能承受的范围，可以使用分片来存储索引的部分数据，ES 会自动处理索引的分片与聚合。</p>
</li>
<li><p>副本：分片的副本，有利于提高搜索效率和吞吐量。默认 ES 为每个索引分配 5 个分片和一个副本。</p>
</li>
</ul>
<h3 id="4-1-集成-Spring-Boot"><a href="#4-1-集成-Spring-Boot" class="headerlink" title="4.1 集成 Spring Boot"></a>4.1 集成 Spring Boot</h3><p>环境：</p>
<ul>
<li><p>Elastic Search 2.4.4</p>
</li>
<li><p>Spring Data Elastic Search 2.1.4.RELEASE – Spring Boot 对 ES 的支持模块</p>
</li>
<li><p>JNA 4.3.0 – ES 依赖模块</p>
</li>
</ul>
<p>依赖：</p>
<figure class="highlight gradle hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="hljs-comment">// 添加  Spring Data Elasticsearch 的依赖</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-elasticsearch'</span>)</span><br><span class="line">    <span class="hljs-comment">// 添加  JNA 的依赖</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'net.java.dev.jna:jna:4.3.0'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">spring:</span></span><br><span class="line"><span class="hljs-attr">  data:</span></span><br><span class="line"><span class="hljs-attr">    elasticsearch:</span></span><br><span class="line">      <span class="hljs-comment"># 服务地址</span></span><br><span class="line"><span class="hljs-attr">      cluster-nodes:</span> <span class="hljs-attr">localhost:9300</span></span><br><span class="line"></span><br><span class="line">      <span class="hljs-comment"># 连接超时时间</span></span><br><span class="line"><span class="hljs-attr">      properties:</span></span><br><span class="line"><span class="hljs-attr">        transport:</span></span><br><span class="line"><span class="hljs-attr">          tcp:</span></span><br><span class="line">            <span class="hljs-string">connect_timeout：120</span></span><br></pre></td></tr></table></figure>
<p>开启 Elastic Search：</p>
<ul>
<li><p>下载二进制文件：<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">官网</a></p>
</li>
<li><p>解压到指定目录</p>
</li>
<li><p>进入 bin，根据系统平台执行 elasticsearch 命令</p>
</li>
</ul>
<p>后台编码：</p>
<ul>
<li><p>索引库实体：EsBlog</p>
</li>
<li><p>资源库：EsBlogRepository</p>
</li>
<li><p>测试用例：EsBlogRepositoryTest</p>
</li>
<li><p>控制器：BlogController</p>
</li>
</ul>
<p>文档库实体：<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Document</span>(indexName = <span class="hljs-string">"blog"</span>, type = <span class="hljs-string">"blog"</span>) <span class="hljs-comment">// 标注为文档实体类</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EsBlog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Id</span></span><br><span class="line">    <span class="hljs-keyword">private</span> String id;</span><br><span class="line">    <span class="hljs-keyword">private</span> String title;</span><br><span class="line">    <span class="hljs-keyword">private</span> String summary; <span class="hljs-comment">// 关键字</span></span><br><span class="line">    <span class="hljs-keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// 遵循 JPA 规范</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">EsBlog</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>资源库：<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">EsBlogRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ElasticsearchRepository</span>&lt;<span class="hljs-title">EsBlog</span>, <span class="hljs-title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 分页查询博客（去重）</span></span><br><span class="line"><span class="hljs-comment">     * JPA 自动根据方法名执行查询</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function">Page&lt;EsBlog&gt; <span class="hljs-title">findDistinctEsBlogByTitleContainingOrSummaryContainingOrContentContaining</span><span class="hljs-params">(</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">        String title,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">        String summary,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">        String content,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">        Pageable pageable)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>测试用例：<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="hljs-meta">@SpringBootTest</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestEsBlogRepository</span> </span>&#123;</span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-keyword">private</span> EsBlogRepository esBlogRepository;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 测试文档库之前存入数据</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@Before</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initEsBlogRepository</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        esBlogRepository.deleteAll();</span><br><span class="line">        esBlogRepository.save(<span class="hljs-keyword">new</span> EsBlog(<span class="hljs-string">"登鹤雀楼"</span>, <span class="hljs-string">"王之涣的登鹤雀楼"</span>,</span><br><span class="line">                <span class="hljs-string">"白日依山尽，黄河入海流。欲穷千里目，更上一层楼。"</span>));</span><br><span class="line">        esBlogRepository.save(<span class="hljs-keyword">new</span> EsBlog(<span class="hljs-string">"相思"</span>, <span class="hljs-string">"王维的相思"</span>,</span><br><span class="line">                <span class="hljs-string">"红豆生南国，春来发几枝。愿君多采颉，此物最相思。"</span>));</span><br><span class="line">        esBlogRepository.save(<span class="hljs-keyword">new</span> EsBlog(<span class="hljs-string">"静夜思"</span>, <span class="hljs-string">"李白的静夜思"</span>,</span><br><span class="line">                <span class="hljs-string">"床前明月光，疑是地上霜。举头望明月，低头思故乡。"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Test</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testFindDistinctEsBlogByTitleContainingOrSummaryContainingOrContentContaining</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Pageable pageRequest = <span class="hljs-keyword">new</span> PageRequest(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>);</span><br><span class="line">        <span class="hljs-comment">// 搜索条件</span></span><br><span class="line">        String title = <span class="hljs-string">"思"</span>;</span><br><span class="line">        String summary = <span class="hljs-string">"思"</span>;</span><br><span class="line">        String content = <span class="hljs-string">"相思"</span>;</span><br><span class="line">        Page&lt;EsBlog&gt; page = esBlogRepository.findDistinctEsBlogByTitleContainingOrSummaryContainingOrContentContaining(</span><br><span class="line">                title, summary, content, pageRequest);</span><br><span class="line">        <span class="hljs-comment">// 断言根据指定的 title、summary、content 来搜索 记录有两条</span></span><br><span class="line">        assertThat(page.getTotalElements()).isEqualTo(<span class="hljs-number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// 打印结果</span></span><br><span class="line">        <span class="hljs-keyword">for</span> (EsBlog blog : page.getContent())&#123;</span><br><span class="line">            System.out.println(blog);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>控制器：<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@RestController</span></span><br><span class="line"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/"</span>)</span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-keyword">private</span> EsBlogRepository esBlogRepository;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@RequestMapping</span>(value = <span class="hljs-string">"/blogs"</span>)</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;EsBlog&gt; <span class="hljs-title">list</span><span class="hljs-params">(@RequestParam(value = <span class="hljs-string">"title"</span>)</span> String title,</span></span><br><span class="line"><span class="hljs-function">                             @<span class="hljs-title">RequestParam</span><span class="hljs-params">(value = <span class="hljs-string">"summary"</span>)</span> String summary,</span></span><br><span class="line"><span class="hljs-function">                             @<span class="hljs-title">RequestParam</span><span class="hljs-params">(value = <span class="hljs-string">"content"</span>)</span> String content,</span></span><br><span class="line"><span class="hljs-function">                             @<span class="hljs-title">RequestParam</span><span class="hljs-params">(value = <span class="hljs-string">"pageIndex"</span>, defaultValue = <span class="hljs-string">"0"</span>)</span> <span class="hljs-keyword">int</span> pageIndex,</span></span><br><span class="line"><span class="hljs-function">                             @<span class="hljs-title">RequestParam</span><span class="hljs-params">(value = <span class="hljs-string">"pageSize"</span>, defaultValue = <span class="hljs-string">"10"</span>)</span> <span class="hljs-keyword">int</span> pageSize</span></span><br><span class="line"><span class="hljs-function">    ) </span>&#123;</span><br><span class="line">        Pageable pageable = <span class="hljs-keyword">new</span> PageRequest(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>);</span><br><span class="line">        Page&lt;EsBlog&gt; page = esBlogRepository.findDistinctEsBlogByTitleContainingOrSummaryContainingOrContentContaining(</span><br><span class="line">                title, summary, content, pageable);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> page.getContent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>访问：</p>
<p><img src="/post_image/blog-img/image_7.png" alt></p>
<h2 id="五、集成-BootStrap"><a href="#五、集成-BootStrap" class="headerlink" title="五、集成 BootStrap"></a>五、集成 BootStrap</h2><p><strong>是什么</strong>：</p>
<ul>
<li><p>基于 HTML、CSS、JavaScript</p>
</li>
<li><p>响应式布局</p>
</li>
<li><p>移动设备优先</p>
</li>
</ul>
<p><strong>如何实现</strong>：</p>
<ul>
<li><p>文档必须是 HTML5</p>
</li>
<li><p>设置响应式的 meta 标签</p>
<pre><code>&lt;meta bane=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
</code></pre></li>
<li><p>通过 Normalize.css 达到浏览器一致性适配</p>
<ul>
<li><p>使用 Normalize 建立跨浏览器的一致性</p>
</li>
<li><p>额外支持的 Reboot </p>
</li>
</ul>
</li>
</ul>
<p><strong>核心概念</strong>：</p>
<p>移动设备优先策略</p>
<ul>
<li><p>基础的 CSS 是移动优先。优先设计更小的宽度</p>
</li>
<li><p>媒体查询。针对平板电脑、台式电脑再做宽屏适配</p>
</li>
<li><p>渐进增强。随着屏幕大小的增加而添加元素</p>
</li>
</ul>
<p>网格系统</p>
<p>响应式：viewport 尺寸的增加，系统会自动分为最多 12 格：</p>
<p><img src="/post_image/blog-img/image_9.png" alt></p>
<p><img src="/post_image/blog-img/image_22.png" alt></p>
<p>实例：<br><figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">&lt;!-- 此为一行，该行中有两列 --&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span></span><br><span class="line">    <span class="hljs-comment">&lt;!-- 此为一列：移动设备下占满 12 格，中型PC下占 8 格 --&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-12 col-md-8"</span>&gt;</span>.col-xs-12 col-md-8 .col-xs-12 col-md-8<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6 col-md-4"</span>&gt;</span>.col-xs-6 .col-md-4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- 一行中有三列 --&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span></span><br><span class="line">    <span class="hljs-comment">&lt;!-- 三列各占网格的 4 格刚好占满一行 --&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6 col-md-4"</span>&gt;</span>.col-xs-6 .col-md-4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6 col-md-4"</span>&gt;</span>.col-xs-6 .col-md-4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6 col-md-4"</span>&gt;</span>.col-xs-6 .col-md-4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- 一行中有两列 --&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span></span><br><span class="line">    <span class="hljs-comment">&lt;!-- 该行中有两列，每列占 6 格刚好占满一行 --&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6"</span>&gt;</span>.col-xs-6<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-xs-6"</span>&gt;</span>.col-xs-6<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-comment">&lt;!--  --&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>效果：</p>
<p><img src="/post_image/blog-img/image_23.png" alt></p>
<p><strong>常用组件、样式</strong></p>
<ul>
<li><p>Typography 处理印刷</p>
</li>
<li><p>Table</p>
</li>
<li><p>Form</p>
</li>
<li><p>Button</p>
</li>
<li><p>Dropdown 下拉框</p>
</li>
<li><p>ButtonGroup </p>
</li>
<li><p>InputGroup</p>
</li>
<li><p>Bavbar</p>
</li>
<li><p>Pagination 分页</p>
</li>
<li><p>Tag</p>
</li>
<li><p>Alert 提示框</p>
</li>
<li><p>Modal Dialog 模态框</p>
</li>
<li><p>Progress Bar 进度条</p>
</li>
<li><p>List Group 列表</p>
</li>
<li><p>Card 卡片</p>
</li>
<li><p>Tooltip 提示</p>
</li>
</ul>
<h2 id="六、Spring-Security-安全权限框架"><a href="#六、Spring-Security-安全权限框架" class="headerlink" title="六、Spring Security 安全权限框架"></a>六、Spring Security 安全权限框架</h2><p><strong>角色</strong></p>
<ul>
<li><p>代表一系列行为或责任的实体</p>
</li>
<li><p>限定能做什么、不能做什么</p>
</li>
<li><p>用户账号往往与角色相关联</p>
</li>
</ul>
<p><strong>RBAC</strong></p>
<ul>
<li><p>基于角色的访问控制（Role-Base Access Control）</p>
</li>
<li><p>隐式访问控制：与角色关联的访问控制</p>
</li>
<li><p>显式访问控制：与权限关联的访问控制（更灵活）</p>
</li>
</ul>
<p><strong>安全领域核心概念</strong></p>
<ul>
<li><p>认证（authentication）：“认证”是建立主体（principal）的过程。“主体”通常是指可以在您的应用程序中执行操作的用户、设备或其他系统。</p>
</li>
<li><p>授权（authorization）：或称为：“访问控制（access-control）”，“授权”是指决定是否允许主体在应用程序中执行操作。</p>
</li>
</ul>
<p><strong>支持的身份验证功能</strong></p>
<ul>
<li><p>HTTP BASIC</p>
</li>
<li><p>HTTP Digest</p>
</li>
<li><p>HTTP X.509</p>
</li>
<li><p>LDAP</p>
</li>
<li><p>基于表单的认证</p>
</li>
<li><p>OpenID</p>
</li>
<li><p>单点登陆</p>
</li>
<li><p>Remmenber-Me</p>
</li>
<li><p>匿名身份验证</p>
</li>
<li><p>Run-ad</p>
</li>
<li><p>JAAS</p>
</li>
<li><p>JavaEE 容器认证</p>
</li>
</ul>
<p><strong>提供的模块</strong></p>
<ul>
<li><p>Core - Spring-security-core.jar —— 核心模块</p>
</li>
<li><p>Remoting - spring-security-remoting.jar —— 与 Spring Remoting 整合包</p>
</li>
<li><p>Web - spring-security-web.jar —— web 支持</p>
</li>
<li><p>Config - spring-security-config.jar —— 安全配置</p>
</li>
<li><p>LDAP - spring-security-idap.jar —— 用于 LDAP 认证及配置</p>
</li>
<li><p>ACL - spring-secutiry-acl.jar —— 访问控制列表的实现，对特定对象的实例进行安全配置</p>
</li>
<li><p>CAS - spring-secutiry-cas.jar —— 可作为单点登陆服务器</p>
</li>
<li><p>OpenID - spring-secutiry-openid.jar</p>
</li>
<li><p>Test - spring-secutiry-test.jar</p>
</li>
</ul>
<p><strong>与 Spring Boot 集成</strong></p>
<p>环境：</p>
<ul>
<li><p>Spring Secutiry 4.2.2.RELEASE</p>
</li>
<li><p>Thymeleaf Spring Secutiry 3.0.2.RELEASE</p>
</li>
</ul>
<p>依赖：</p>
<figure class="highlight gradle hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="hljs-comment">// 添加  Spring Security 依赖</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'org.springframework.boot:spring-boot-starter-security'</span>)</span><br><span class="line">    <span class="hljs-comment">// 添加   Thymeleaf Spring Security 依赖，与 Thymeleaf 版本一致都是 3.x</span></span><br><span class="line">    <span class="hljs-keyword">compile</span>(<span class="hljs-string">'org.thymeleaf.extras:thymeleaf-extras-springsecurity4:3.0.2.RELEASE'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后台编码：</p>
<ul>
<li><p>安全配置类</p>
</li>
<li><p>控制器</p>
</li>
</ul>
<p>前台编码：</p>
<ul>
<li><p>index.html</p>
</li>
<li><p>header.html</p>
</li>
<li><p>login.html</p>
</li>
</ul>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@EnableWebSecurity</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringSecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 自定义配置</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                    .antMatchers(<span class="hljs-string">"/css/**"</span>, <span class="hljs-string">"/js/**"</span>, <span class="hljs-string">"/fonts/**"</span>, <span class="hljs-string">"/index"</span>).permitAll() <span class="hljs-comment">// 都可以访问</span></span><br><span class="line">                    .antMatchers(<span class="hljs-string">"/users/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>) <span class="hljs-comment">// 需要相应的角色才能访问</span></span><br><span class="line">                    .and()</span><br><span class="line">                .formLogin()   <span class="hljs-comment">// 基于 Form 表单登录验证</span></span><br><span class="line">                    .loginPage(<span class="hljs-string">"/login"</span>) <span class="hljs-comment">// 跳转到登陆地址</span></span><br><span class="line">                    .failureUrl(<span class="hljs-string">"/login-error"</span>); <span class="hljs-comment">// 登陆失败跳转地址</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 认证信息管理</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> auth</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configureGlobal</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.inMemoryAuthentication() <span class="hljs-comment">// 认证信息存储内存中</span></span><br><span class="line">                .withUser(<span class="hljs-string">"yuzh"</span>).password(<span class="hljs-string">"admin"</span>).roles(<span class="hljs-string">"ADMIN"</span>); <span class="hljs-comment">// 硬编码测试</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、用户管理"><a href="#七、用户管理" class="headerlink" title="七、用户管理"></a>七、用户管理</h2><p><strong>需求/核心功能</strong></p>
<p><img src="/post_image/blog-img/image_24.png" alt></p>
<p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_25.png" alt></p>
<p>注册</p>
<ul>
<li><p><code>/register</code>：[GET] 获取注册页面</p>
</li>
<li><p><code>/register</code>：[POST] 注册成功，跳转登陆页面</p>
<ul>
<li>User 用户对象</li>
</ul>
</li>
</ul>
<p>登陆:</p>
<ul>
<li><p><code>/login</code>: [get] 获取登陆页面</p>
</li>
<li><p><code>/login</code>: [post] 登陆</p>
<ul>
<li>username</li>
<li>password</li>
<li>remember-me 是否记住我</li>
</ul>
</li>
</ul>
<p>用户管理</p>
<ul>
<li><p><code>/users</code>: [get] 用户列表</p>
<ul>
<li>async</li>
<li>pageIndex</li>
<li>pageSize</li>
<li>name 用户名称关键字</li>
</ul>
</li>
<li><p><code>/users/add</code>: [get] 获取添加用户页面</p>
</li>
<li><p><code>/users/add</code>: [post] 保存添加的用户</p>
<ul>
<li>User</li>
<li>authorityId 角色ID</li>
</ul>
</li>
<li><p><code>/users/{id}</code>: [delete] 删除用户</p>
<ul>
<li>id</li>
</ul>
</li>
<li><p><code>/users/edit/{id}</code>: [get] 获取某个具体用户编辑页面</p>
<ul>
<li>id</li>
</ul>
</li>
</ul>
<p><strong>流程图</strong></p>
<p>首页用户注册：</p>
<p><img src="/post_image/blog-img/register.jpg" alt="首页用户注册"></p>
<p>后台管理-修改用户：</p>
<p><img src="/post_image/blog-img/admin-modify.jpg" alt="后台管理-修改用户"></p>
<p><strong>后台实现</strong></p>
<ol>
<li><p>原有基础上添加依赖：</p>
<pre><code>// 添加  Apache Commons Lang 依赖
compile(&apos;org.apache.commons:commons-lang3:3.5&apos;)
</code></pre></li>
<li><p>对 User 实体添加持久化和校验注解：</p>
</li>
</ol>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Data</span></span><br><span class="line"><span class="hljs-meta">@Entity</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-meta">@Id</span></span><br><span class="line">    <span class="hljs-meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@NotEmpty</span>(message = <span class="hljs-string">"姓名不能为空"</span>)</span><br><span class="line">    <span class="hljs-meta">@Size</span>(min=<span class="hljs-number">2</span>, max=<span class="hljs-number">20</span>)</span><br><span class="line">    <span class="hljs-meta">@Column</span>(nullable = <span class="hljs-keyword">false</span>, length = <span class="hljs-number">20</span>) <span class="hljs-comment">// 映射为字段，值不能为空</span></span><br><span class="line">    <span class="hljs-keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@NotEmpty</span>(message = <span class="hljs-string">"邮箱不能为空"</span>)</span><br><span class="line">    <span class="hljs-meta">@Size</span>(max=<span class="hljs-number">50</span>)</span><br><span class="line">    <span class="hljs-meta">@Email</span>(message= <span class="hljs-string">"邮箱格式不对"</span> )</span><br><span class="line">    <span class="hljs-meta">@Column</span>(nullable = <span class="hljs-keyword">false</span>, length = <span class="hljs-number">50</span>, unique = <span class="hljs-keyword">true</span>)</span><br><span class="line">    <span class="hljs-keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@NotEmpty</span>(message = <span class="hljs-string">"账号不能为空"</span>)</span><br><span class="line">    <span class="hljs-meta">@Size</span>(min=<span class="hljs-number">3</span>, max=<span class="hljs-number">20</span>)</span><br><span class="line">    <span class="hljs-meta">@Column</span>(nullable = <span class="hljs-keyword">false</span>, length = <span class="hljs-number">20</span>, unique = <span class="hljs-keyword">true</span>)</span><br><span class="line">    <span class="hljs-keyword">private</span> String username; <span class="hljs-comment">// 用户账号，用户登录时的唯一标识</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@NotEmpty</span>(message = <span class="hljs-string">"密码不能为空"</span>)</span><br><span class="line">    <span class="hljs-meta">@Size</span>(max=<span class="hljs-number">100</span>)</span><br><span class="line">    <span class="hljs-meta">@Column</span>(length = <span class="hljs-number">100</span>)</span><br><span class="line">    <span class="hljs-keyword">private</span> String password; <span class="hljs-comment">// 登录时密码</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Column</span>(length = <span class="hljs-number">200</span>)</span><br><span class="line">    <span class="hljs-keyword">private</span> String avatar; <span class="hljs-comment">// 头像图片地址</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>实现 JpaRepository 接口，根据规范的方法名执行查询：</li>
</ol>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JpaRepository</span>&lt;<span class="hljs-title">User</span>, <span class="hljs-title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据用户名分页查询列表</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pageable</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function">Page&lt;User&gt; <span class="hljs-title">findByNameLike</span><span class="hljs-params">(String name, Pageable pageable)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据用户账号查询用户</span></span><br><span class="line"><span class="hljs-comment">     *</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function">User <span class="hljs-title">findByUsername</span><span class="hljs-params">(String username)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">    * 查找用户名是否被占用</span></span><br><span class="line"><span class="hljs-comment">    */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">existsByUsername</span><span class="hljs-params">(String primaryKey)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查找邮箱是否被占用</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">existsByEmail</span><span class="hljs-params">(String primaryKey)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><p>UserService 接口及实现</p>
</li>
<li><p>xyz.yuzh.spring.boot.blog.vo.Response 全局响应结果对象</p>
</li>
<li><p>AdminController 后台管理控制器 —— 跳转后台管理页面</p>
</li>
<li><p>UserController 后台管理用户管理控制器 —— 增删改查</p>
</li>
<li><p>UserOperationExcption 用户操作异常类</p>
</li>
<li><p>GlobalExceptionHandler 全局异常处理类</p>
</li>
</ol>
<p><strong>前台实现</strong></p>
<ol>
<li><p>login.html</p>
</li>
<li><p>register.html</p>
</li>
<li><p>/users/*.html</p>
</li>
<li><p>/admins/*.html</p>
</li>
<li><p>js/admins/*.js</p>
</li>
<li><p>js/users/*.js</p>
</li>
</ol>
<p><strong>问题解决</strong></p>
<p><a href="https://github.com/yuzh233/spring-boot-blog/blob/master/blog-user/%E5%A6%82%E4%BD%95%E7%BB%99%E9%80%9A%E8%BF%87%E8%84%9A%E6%9C%AC%E6%B7%BB%E5%8A%A0%E7%9A%84%20%E5%85%83%E7%B4%A0%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6.md" target="_blank" rel="noopener">如何给通过脚本添加的元素注册事件</a></p>
<p><a href="https://github.com/yuzh233/spring-boot-blog/blob/master/blog-user/%E8%A7%A3%E5%86%B3%E4%BD%BF%E7%94%A8%20bootstrap%20%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C%E6%97%B6%20%E2%80%94%E2%80%94%20%E6%A8%A1%E6%80%81%E6%A1%86%E5%9B%9E%E6%98%BE%E4%BC%A0%E5%80%BC%E9%97%AE%E9%A2%98.md" target="_blank" rel="noopener">解决使用 bootstrap 更新操作时 —— 模态框回显传值问题</a></p>
<h2 id="八、角色权限管理"><a href="#八、角色权限管理" class="headerlink" title="八、角色权限管理"></a>八、角色权限管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_26.png" alt></p>
<ul>
<li><p>User 对象实现 UserDetails 接口</p>
<ul>
<li>实现 getAuthorities 方法，返回权限实体集合（需要自定义的 Authority 转为 SimpleGrantedAuthority）</li>
</ul>
</li>
<li><p>UserServiceImpl 实现 UserDetailsService</p>
<ul>
<li>实现 security 默认方法 loadUserByUsername，返回数据库查到的用户实体</li>
</ul>
</li>
<li><p>SecurityConfig</p>
</li>
</ul>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@EnableWebSecurity</span></span><br><span class="line"><span class="hljs-meta">@EnableGlobalMethodSecurity</span>(prePostEnabled = <span class="hljs-keyword">true</span>)</span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String KEY = <span class="hljs-string">"yuzh.xyz"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Bean</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> AuthenticationProvider <span class="hljs-title">authenticationProvider</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        DaoAuthenticationProvider authenticationProvider = <span class="hljs-keyword">new</span> DaoAuthenticationProvider();</span><br><span class="line">        authenticationProvider.setUserDetailsService(userDetailsService);</span><br><span class="line">        <span class="hljs-keyword">return</span> authenticationProvider;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                    .antMatchers(<span class="hljs-string">"/css/**"</span>, <span class="hljs-string">"/js/**"</span>, <span class="hljs-string">"/fonts/**"</span>, <span class="hljs-string">"/"</span>, <span class="hljs-string">"/index"</span>).permitAll()</span><br><span class="line">                    .antMatchers(<span class="hljs-string">"/h2-console/**"</span>).permitAll()</span><br><span class="line">                    <span class="hljs-comment">// 数据库中的字段因该是 ROLE_ADMIN ，这里不需要写 ROLE_ 前缀。</span></span><br><span class="line">                    .antMatchers(<span class="hljs-string">" /admins/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)</span><br><span class="line">                    .and()</span><br><span class="line">                .formLogin()</span><br><span class="line">                    .loginPage(<span class="hljs-string">"/login"</span>)</span><br><span class="line">                    .failureUrl(<span class="hljs-string">"/login-error"</span>)</span><br><span class="line">                    .and()</span><br><span class="line">                .rememberMe().key(KEY)</span><br><span class="line">                    .and()</span><br><span class="line">                .exceptionHandling().accessDeniedPage(<span class="hljs-string">"/403"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        http.csrf().ignoringAntMatchers(<span class="hljs-string">"/h2-console/**"</span>);</span><br><span class="line">        http.headers().frameOptions().sameOrigin();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Autowired</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configureGlobal</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.userDetailsService(userDetailsService);</span><br><span class="line">        auth.authenticationProvider(authenticationProvider());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>数据库的权限存入的格式例如 <code>ROLE_ADMIN</code> / <code>ROLE_USER</code></p>
</li>
<li><p>给需要授权才能访问的方法授权</p>
<ul>
<li><p>给类授权：<code>@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)  // 指定角色权限才能操作方法</code></p>
</li>
<li><p>给方法授权：如当请求参数中的 username 被查询到已认证才允许进入方法</p>
</li>
</ul>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/&#123;username&#125;/blogs/edit"</span>)</span><br><span class="line"><span class="hljs-meta">@PreAuthorize</span>(<span class="hljs-string">"authentication.name.equals(#username)"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>当表单发起 <code>/login</code> 的 post 请求并携带固定名称的 <code>username、password</code> 参数，security 会自动处理登陆，若登陆失败，跳到配置好的登陆失败页面。</p>
<h2 id="九、博客管理"><a href="#九、博客管理" class="headerlink" title="九、博客管理"></a>九、博客管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_27.png" alt="博客管理"></p>
<ul>
<li><p>用户主页实现</p>
</li>
<li><p>个人资料设置</p>
</li>
<li><p>个人头像更换</p>
</li>
</ul>
<p><strong>user space API：用户主页空间接口</strong></p>
<ul>
<li><p><code>/blogs</code>: [get]</p>
<ul>
<li>order：排序类型，new/hot，默认是 new</li>
<li>keyword：搜索关键字。博客的标签，即为关键字。</li>
<li>async：是否为异步请求页面</li>
<li>pageIndex</li>
<li>pageSize</li>
</ul>
</li>
<li><p><code>/u/{username}</code>: [get] 具体某个用户的主页</p>
<ul>
<li>username 用户账号</li>
</ul>
</li>
<li><p><code>/u/{username}/profile</code>: [get] 获取个人设置页面</p>
<ul>
<li>username 用户账号</li>
</ul>
</li>
<li><p><code>/u/{username}/profile</code>: [post] 保存个人设置页面</p>
<ul>
<li>username 用户账号</li>
<li>User 待保存的对象</li>
</ul>
<ul>
<li><code>/u/{username}/avatar</code>: [get] 获取个人头像<ul>
<li>username 用户账号</li>
</ul>
</li>
</ul>
</li>
<li><p><code>/u/{username}/avatar</code>: [post] 保存个人头像</p>
<ul>
<li>username 用户账号</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs</code>: [get] 查询用户博客</p>
<ul>
<li>order：排序类型，new/hot，默认是 new</li>
<li>catalog：博客分类 ID，默认为空</li>
<li>keyword：搜索关键字。博客的标签，即为关键字。</li>
<li>async：是否为异步请求页面</li>
<li>pageIndex</li>
<li>pageSize</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs/edits</code>: [get] 获取新增博客页面</p>
<ul>
<li>username 用户账号</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs/edit/{id}</code>: [get] 获取编辑博客的页面</p>
<ul>
<li>username 用户账号</li>
<li>id 博客ID</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs/edit</code>: [post] 保存博客</p>
<ul>
<li>username 用户账号</li>
<li>Blog 待保存的博客对象</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs/delete/{id}</code>: [delete] 删除博客</p>
<ul>
<li>username 用户账号</li>
<li>id 博客ID</li>
</ul>
</li>
<li><p><code>/u/{username}/blogs/{id}</code>: [get] 获取博客展示页面</p>
<ul>
<li>username 用户账号</li>
<li>id 博客ID</li>
</ul>
</li>
</ul>
<p><strong>后台实现</strong></p>
<p>添加 markdown 解析器的依赖：</p>
<figure class="highlight gradle hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">compile</span>(<span class="hljs-string">'es.nitaur.markdown:txtmark:0.16'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>MongoDB File Server 文件服务器</strong> </p>
<pre><code>https://github.com/waylau/mongodb-file-server
</code></pre><p><strong>用户个人设置</strong></p>
<h2 id="十、评论管理"><a href="#十、评论管理" class="headerlink" title="十、评论管理"></a>十、评论管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_28.png" alt></p>
<p><strong>comments API：评论管理接口</strong></p>
<ul>
<li><p><code>/comments</code>: [get] 获取评论列表</p>
<ul>
<li>blogid 博客id</li>
</ul>
</li>
<li><p><code>/comments</code>: [post] 保存评论</p>
<ul>
<li>blogid 博客id<br>commentContent 评论内容</li>
</ul>
</li>
<li><p><code>/comments/{id}</code>: [delete] 删除评论</p>
<ul>
<li>blogid 博客id</li>
<li>id 评论id</li>
</ul>
</li>
</ul>
<h2 id="十一、点赞管理"><a href="#十一、点赞管理" class="headerlink" title="十一、点赞管理"></a>十一、点赞管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_34.png" alt></p>
<p><strong>votes API：点赞管理接口</strong></p>
<ul>
<li><p><code>/votes</code>: [post] 保存点赞</p>
<ul>
<li>blogid 博客id</li>
</ul>
</li>
<li><p><code>/votes/{id}</code>: [delete] 删除点赞 </p>
<ul>
<li>blogid 博客id</li>
<li>id 点赞id</li>
</ul>
</li>
</ul>
<h2 id="十二、分类管理"><a href="#十二、分类管理" class="headerlink" title="十二、分类管理"></a>十二、分类管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_29.png" alt></p>
<p><strong>catalogs API：分类管理接口</strong></p>
<ul>
<li><p><code>/catalogs</code>: [get] 获取用户博客的分类列表</p>
<ul>
<li>username 用户账号</li>
</ul>
</li>
<li><p><code>/catalogs</code>: [post] 保存用户博客的分类</p>
<ul>
<li>username 用户账号</li>
<li>CatalogVO 包含 username、Catalog</li>
</ul>
</li>
<li><p><code>/catalogs/edit</code>: [get] 获取编辑分类界面</p>
</li>
<li><p><code>/catalogs/edit/{id}</code>: [get] 获取某ID分类编辑的分类界面</p>
</li>
<li><p><code>/catalogs/{id}</code>: [delete] 删除分类</p>
<ul>
<li>id 分类ID</li>
<li>username 用户账号</li>
</ul>
</li>
</ul>
<h2 id="十三、标签管理"><a href="#十三、标签管理" class="headerlink" title="十三、标签管理"></a>十三、标签管理</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_33.png" alt></p>
<p>使用插件：Jquery Tags Input 1.3.6</p>
<p><a href="http://xoxco.com/projects/code/tagsinput" target="_blank" rel="noopener">http://xoxco.com/projects/code/tagsinput</a></p>
<h2 id="十四、首页搜索"><a href="#十四、首页搜索" class="headerlink" title="十四、首页搜索"></a>十四、首页搜索</h2><p><strong>需求分析</strong></p>
<p><img src="/post_image/blog-img/image_30.png" alt></p>
<p><strong>index API：包含最新、最热文章、最热标签、最热用户等</strong></p>
<ul>
<li><code>/blogs</code>: [get]<ul>
<li>order：排序类型，new/hot</li>
<li>keyword：搜索关键字（包含博客标签）</li>
<li>async：是否异步</li>
<li>pageIndex</li>
<li>pageSize</li>
</ul>
</li>
</ul>
<p>环境：</p>
<ul>
<li><p>Elastic Search 2.4.4</p>
</li>
<li><p>Spring Data Elastic Search 2.1.4.RELEASE – Spring Boot 对 ES 的支持模块</p>
</li>
<li><p>JNA 4.3.0 – ES 依赖模块</p>
</li>
</ul>
<h2 id="十五、部署相关"><a href="#十五、部署相关" class="headerlink" title="十五、部署相关"></a>十五、部署相关</h2><h3 id="15-1-使用外部-MongoDB-存储文件服务器数据"><a href="#15-1-使用外部-MongoDB-存储文件服务器数据" class="headerlink" title="15.1 使用外部 MongoDB 存储文件服务器数据"></a>15.1 使用外部 MongoDB 存储文件服务器数据</h3><p>之前使用的是文件服务器内嵌的 mongoDB，项目停止之后图片数据不会保存。更换外部 mongoDB：</p>
<p><strong>window 下</strong></p>
<ol>
<li><p>下载 mongoDB <a href="https://www.mongodb.com/download-center#community" target="_blank" rel="noopener">https://www.mongodb.com/download-center#community</a></p>
</li>
<li><p>选择 msi 文件下载安装</p>
</li>
<li><p>MongoDB将数据目录存储在 db 目录下。但是这个数据目录不会主动创建，需要手动创建。（如：d:/mongoData/db）</p>
</li>
<li><p><strong>修改文件服务器 build.gradle 文件，取消使用内嵌 mongoDB</strong></p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 添加  Embedded MongoDB 的依赖用于测试</span><br><span class="line">// compile('de.flapdoodle.embed:de.flapdoodle.embed.mongo')</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修改文件服务器 application.yml 文件，连接独立的 MongoDB</strong></p>
 <figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># independent MongoDB server</span></span><br><span class="line"><span class="hljs-string">spring.data.mongodb.uri=mongodb://localhost:27017/test</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>从 MongoDB 目录的 bin 目录中执行 mongod.exe 文件</p>
 <figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如：C:\mongodb\bin\mongod --dbpath d:\mongoData\db</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行 mongo.exe 命令即可连接 MongoDB</p>
</li>
<li><p>更多细节见：<a href="http://www.runoob.com/mongodb/mongodb-window-install.html" target="_blank" rel="noopener">http://www.runoob.com/mongodb/mongodb-window-install.html</a></p>
</li>
</ol>
<p><strong>linux 下</strong></p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz   # 下载</span><br><span class="line">tar -zxvf mongodb-linux-x86_64-3.0.6.tgz                                  # 解压</span><br><span class="line">mv mongodb-linux-x86_64-3.0.6.tgz mongodb                                 # 重命名</span><br><span class="line"></span><br><span class="line">vim /etc/profile                                                          # 配置环境变量</span><br><span class="line">---------------------</span><br><span class="line">export PATH=/opt/mongodb/bin:$&#123;PATH&#125;</span><br><span class="line">---------------------</span><br><span class="line">resource /etc/profile                                                     # 刷新环境变量</span><br><span class="line"></span><br><span class="line">cd /opt/mongodb</span><br><span class="line">mkdir data &amp; cd data &amp; mkdir db                                           # 创建文件存放目录</span><br><span class="line"></span><br><span class="line">mongod --dbpath=/opt/mongodb/data/db                                      # 启动 mongodb</span><br></pre></td></tr></table></figure>
<h3 id="15-2-应用启动"><a href="#15-2-应用启动" class="headerlink" title="15.2 应用启动"></a>15.2 应用启动</h3><p><strong>后台运行</strong>：<code>nohup cmd &amp;</code></p>
<ol>
<li><p>启动 mongoDB</p>
</li>
<li><p>启动文件服务器（gradlew bootRun）</p>
</li>
<li><p>进入 elastic search，删除 data 文件（测试环境下），执行 <code>./elasticsearch</code></p>
</li>
<li><p>启动 blog-full （gradlew bootRun）</p>
</li>
</ol>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/springboot/">springboot</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2018/10/30/自增变量/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">自增变量</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2018/10/13/如何给通过脚本添加的 元素注册事件/">
                <span class="level-item">如何给通过脚本添加的 元素注册事件</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comentarios</h3>
        
<div id="valine-thread" class="content"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#valine-thread' ,
        notify: true,
        verify: true,
        app_id: 'IaNb4n1EqHakKzNDh6jR1qYJ-gzGzoHsz',
        app_key: 'Hg7CxatEfuCfhqOsl7XYtEOv',
        placeholder: 'more than just code.'
    });
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <figure class="image is-128x128 has-mb-6">
                            <img class="is-rounded" src="/images/tou.jpg" alt="harry.zh">
                        </figure>
                    
                    
                    <p class="is-size-4 is-block">
                        harry.zh
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        not just code.
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Changsha, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Entradas
                    </p>
                    <p class="title has-text-weight-normal">
                        31
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categorias
                    </p>
                    <p class="title has-text-weight-normal">
                        3
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Etiquetas
                    </p>
                    <p class="title has-text-weight-normal">
                        26
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="http://github.com/yuzh233/" target="_blank">
                SEGUIR</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="http://github.com/yuzh233/">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="/">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="/">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="/">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catálogo
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#一、-使用-Gradle-Spring-Initializer-搭建-Spring-Boot-运行环境">
        <span class="has-mr-6">1</span>
        <span>一、 使用 Gradle / Spring Initializer 搭建 Spring Boot 运行环境</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#1-1-安装-Gradle-环境">
        <span class="has-mr-6">1.1</span>
        <span>1.1 安装 Gradle 环境</span>
        </a></li><li>
        <a class="is-flex" href="#1-2-使用-Spring-Initializer-快速生成-Spring-Boot-应用">
        <span class="has-mr-6">1.2</span>
        <span>1.2 使用 Spring Initializer 快速生成 Spring Boot 应用</span>
        </a></li><li>
        <a class="is-flex" href="#1-3-项目结构">
        <span class="has-mr-6">1.3</span>
        <span>1.3 项目结构</span>
        </a></li><li>
        <a class="is-flex" href="#1-4-自定义存储仓库">
        <span class="has-mr-6">1.4</span>
        <span>1.4 自定义存储仓库</span>
        </a></li><li>
        <a class="is-flex" href="#1-5-编写程序代码及测试用例">
        <span class="has-mr-6">1.5</span>
        <span>1.5 编写程序代码及测试用例</span>
        </a></li><li>
        <a class="is-flex" href="#1-6-以-Gradle-Wrapper-编译项目">
        <span class="has-mr-6">1.6</span>
        <span>1.6 以 Gradle / Wrapper 编译项目</span>
        </a></li><li>
        <a class="is-flex" href="#1-7-Gradle-项目运行的三种方式">
        <span class="has-mr-6">1.7</span>
        <span>1.7 Gradle 项目运行的三种方式</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#二、-Thymeleaf-模板引擎">
        <span class="has-mr-6">2</span>
        <span>二、 Thymeleaf 模板引擎</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#2-1-Thymeleaf">
        <span class="has-mr-6">2.1</span>
        <span>2.1 Thymeleaf</span>
        </a></li><li>
        <a class="is-flex" href="#2-2-标准方言（语法）">
        <span class="has-mr-6">2.2</span>
        <span>2.2 标准方言（语法）</span>
        </a></li><li>
        <a class="is-flex" href="#2-3-表达式基本对象">
        <span class="has-mr-6">2.3</span>
        <span>2.3 表达式基本对象</span>
        </a></li><li>
        <a class="is-flex" href="#2-4-集成-Spring-Boot">
        <span class="has-mr-6">2.4</span>
        <span>2.4 集成 Spring Boot</span>
        </a></li><li>
        <a class="is-flex" href="#2-5-Thymeleaf-实战">
        <span class="has-mr-6">2.5</span>
        <span>2.5 Thymeleaf 实战</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#三、-Spring-Data-JPA-数据持久化">
        <span class="has-mr-6">3</span>
        <span>三、 Spring Data JPA 数据持久化</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#3-1-JPA-简介">
        <span class="has-mr-6">3.1</span>
        <span>3.1 JPA 简介</span>
        </a></li><li>
        <a class="is-flex" href="#3-2-JPA-核心概念">
        <span class="has-mr-6">3.2</span>
        <span>3.2 JPA 核心概念</span>
        </a></li><li>
        <a class="is-flex" href="#3-3-Spring-Data-JPA-使用概括">
        <span class="has-mr-6">3.3</span>
        <span>3.3 Spring Data JPA 使用概括</span>
        </a></li><li>
        <a class="is-flex" href="#3-4-Spring-Data-JPA-Hibernate-Spring-Boot-集成">
        <span class="has-mr-6">3.4</span>
        <span>3.4. Spring Data JPA / Hibernate / Spring Boot 集成</span>
        </a></li><li>
        <a class="is-flex" href="#3-5-数据持久化实战">
        <span class="has-mr-6">3.5</span>
        <span>3.5 数据持久化实战</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#3-5-1-H2-内存数据库">
        <span class="has-mr-6">3.5.1</span>
        <span>3.5.1 H2 内存数据库</span>
        </a></li><li>
        <a class="is-flex" href="#3-5-2-MySql-物理数据库">
        <span class="has-mr-6">3.5.2</span>
        <span>3.5.2 MySql 物理数据库</span>
        </a></li></ul></li></ul></li><li>
        <a class="is-flex" href="#四、Elastic-Search-全文搜索">
        <span class="has-mr-6">4</span>
        <span>四、Elastic Search 全文搜索</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#4-1-集成-Spring-Boot">
        <span class="has-mr-6">4.1</span>
        <span>4.1 集成 Spring Boot</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#五、集成-BootStrap">
        <span class="has-mr-6">5</span>
        <span>五、集成 BootStrap</span>
        </a></li><li>
        <a class="is-flex" href="#六、Spring-Security-安全权限框架">
        <span class="has-mr-6">6</span>
        <span>六、Spring Security 安全权限框架</span>
        </a></li><li>
        <a class="is-flex" href="#七、用户管理">
        <span class="has-mr-6">7</span>
        <span>七、用户管理</span>
        </a></li><li>
        <a class="is-flex" href="#八、角色权限管理">
        <span class="has-mr-6">8</span>
        <span>八、角色权限管理</span>
        </a></li><li>
        <a class="is-flex" href="#九、博客管理">
        <span class="has-mr-6">9</span>
        <span>九、博客管理</span>
        </a></li><li>
        <a class="is-flex" href="#十、评论管理">
        <span class="has-mr-6">10</span>
        <span>十、评论管理</span>
        </a></li><li>
        <a class="is-flex" href="#十一、点赞管理">
        <span class="has-mr-6">11</span>
        <span>十一、点赞管理</span>
        </a></li><li>
        <a class="is-flex" href="#十二、分类管理">
        <span class="has-mr-6">12</span>
        <span>十二、分类管理</span>
        </a></li><li>
        <a class="is-flex" href="#十三、标签管理">
        <span class="has-mr-6">13</span>
        <span>十三、标签管理</span>
        </a></li><li>
        <a class="is-flex" href="#十四、首页搜索">
        <span class="has-mr-6">14</span>
        <span>十四、首页搜索</span>
        </a></li><li>
        <a class="is-flex" href="#十五、部署相关">
        <span class="has-mr-6">15</span>
        <span>十五、部署相关</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#15-1-使用外部-MongoDB-存储文件服务器数据">
        <span class="has-mr-6">15.1</span>
        <span>15.1 使用外部 MongoDB 存储文件服务器数据</span>
        </a></li><li>
        <a class="is-flex" href="#15-2-应用启动">
        <span class="has-mr-6">15.2</span>
        <span>15.2 应用启动</span>
        </a></li></ul></li></ul>
        </div>
    </div>
</div>

    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categorias
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/bug-fix/">
            <span class="level-start">
                <span class="level-item">bug-fix</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/interview/">
            <span class="level-start">
                <span class="level-item">interview</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/spring-boot/">
            <span class="level-start">
                <span class="level-item">spring-boot</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Nube de etiquetas
        </h3>
        <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/aop/" style="font-size: 12.5px;">aop</a> <a href="/tags/cokie/" style="font-size: 10px;">cokie</a> <a href="/tags/dubbo/" style="font-size: 10px;">dubbo</a> <a href="/tags/freeMarker/" style="font-size: 10px;">freeMarker</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/jms/" style="font-size: 10px;">jms</a> <a href="/tags/jsonp/" style="font-size: 10px;">jsonp</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nio/" style="font-size: 10px;">nio</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/sso/" style="font-size: 10px;">sso</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/分布式/" style="font-size: 20px;">分布式</a> <a href="/tags/数据结构/" style="font-size: 17.5px;">数据结构</a> <a href="/tags/无关代码/" style="font-size: 10px;">无关代码</a> <a href="/tags/算法/" style="font-size: 17.5px;">算法</a> <a href="/tags/线程/" style="font-size: 10px;">线程</a> <a href="/tags/集群/" style="font-size: 10px;">集群</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recientes
        </h3>
        
        <article class="media">
            
            <a href="/2018/11/08/根据树的前序和后序表达式构造唯一树/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-282224.jpg" alt="根据树的前序和后序表达式构造唯一树">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T12:53:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/根据树的前序和后序表达式构造唯一树/" class="has-link-black-ter is-size-6">根据树的前序和后序表达式构造唯一树</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/树的三种遍历方式/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-204334.jpg" alt="树的三种遍历方式">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:46:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/树的三种遍历方式/" class="has-link-black-ter is-size-6">树的三种遍历方式</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/06/源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-252102.jpg" alt="源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-06T07:53:00.000Z">2018-11-06</time></div>
                    <a href="/2018/11/06/源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题/" class="has-link-black-ter is-size-6">源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/04/数据库常用事务传播行为与隔离级别/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/jay-wennington-2250-unsplash.jpg" alt="数据库常用事务传播行为与隔离级别">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T16:26:00.000Z">2018-11-04</time></div>
                    <a href="/2018/11/04/数据库常用事务传播行为与隔离级别/" class="has-link-black-ter is-size-6">数据库常用事务传播行为与隔离级别</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/03/成员变量与局部变量/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/random/69.jpg" alt="成员变量与局部变量">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T05:12:00.000Z">2018-11-03</time></div>
                    <a href="/2018/11/03/成员变量与局部变量/" class="has-link-black-ter is-size-6">成员变量与局部变量</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archivos
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Etiquetas
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aliyun/">
                        <span class="tag">aliyun</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aop/">
                        <span class="tag">aop</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cokie/">
                        <span class="tag">cokie</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/dubbo/">
                        <span class="tag">dubbo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/freeMarker/">
                        <span class="tag">freeMarker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/idea/">
                        <span class="tag">idea</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jms/">
                        <span class="tag">jms</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jsonp/">
                        <span class="tag">jsonp</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nio/">
                        <span class="tag">nio</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/redis/">
                        <span class="tag">redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/solr/">
                        <span class="tag">solr</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">spring</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">springboot</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sso/">
                        <span class="tag">sso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tomcat/">
                        <span class="tag">tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分布式/">
                        <span class="tag">分布式</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无关代码/">
                        <span class="tag">无关代码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程/">
                        <span class="tag">线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/集群/">
                        <span class="tag">集群</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recientes
        </h3>
        
        <article class="media">
            
            <a href="/2018/11/08/根据树的前序和后序表达式构造唯一树/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-282224.jpg" alt="根据树的前序和后序表达式构造唯一树">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T12:53:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/根据树的前序和后序表达式构造唯一树/" class="has-link-black-ter is-size-6">根据树的前序和后序表达式构造唯一树</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/树的三种遍历方式/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-204334.jpg" alt="树的三种遍历方式">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:46:00.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/树的三种遍历方式/" class="has-link-black-ter is-size-6">树的三种遍历方式</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/06/源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/wallhaven-252102.jpg" alt="源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-06T07:53:00.000Z">2018-11-06</time></div>
                    <a href="/2018/11/06/源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题/" class="has-link-black-ter is-size-6">源码角度分析 CharacterEncodingFilter 解决 Post 请求中文乱码问题</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/04/数据库常用事务传播行为与隔离级别/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/sujin/jay-wennington-2250-unsplash.jpg" alt="数据库常用事务传播行为与隔离级别">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T16:26:00.000Z">2018-11-04</time></div>
                    <a href="/2018/11/04/数据库常用事务传播行为与隔离级别/" class="has-link-black-ter is-size-6">数据库常用事务传播行为与隔离级别</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/03/成员变量与局部变量/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/img/random/69.jpg" alt="成员变量与局部变量">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T05:12:00.000Z">2018-11-03</time></div>
                    <a href="/2018/11/03/成员变量与局部变量/" class="has-link-black-ter is-size-6">成员变量与局部变量</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/interview/">interview</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archivos
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Etiquetas
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aliyun/">
                        <span class="tag">aliyun</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/aop/">
                        <span class="tag">aop</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/cokie/">
                        <span class="tag">cokie</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/dubbo/">
                        <span class="tag">dubbo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/freeMarker/">
                        <span class="tag">freeMarker</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/idea/">
                        <span class="tag">idea</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jms/">
                        <span class="tag">jms</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jsonp/">
                        <span class="tag">jsonp</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maven/">
                        <span class="tag">maven</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nginx/">
                        <span class="tag">nginx</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/nio/">
                        <span class="tag">nio</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/redis/">
                        <span class="tag">redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/solr/">
                        <span class="tag">solr</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/spring/">
                        <span class="tag">spring</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/springboot/">
                        <span class="tag">springboot</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/sso/">
                        <span class="tag">sso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tomcat/">
                        <span class="tag">tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分布式/">
                        <span class="tag">分布式</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无关代码/">
                        <span class="tag">无关代码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程/">
                        <span class="tag">线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/集群/">
                        <span class="tag">集群</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/star.png" alt="基于 Spring Boot 技术栈构建企业级博客系统的开发记录" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 张 瑜&nbsp;
                Powered by Hexo & Icarus<br>
                <a href="http://www.miitbeian.gov.cn/" target="_blank">湘ICP备 18020713号</a>
                </p>
                
                <p></p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/yuzh233">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Entradas',
                PAGES: 'Pages',
                CATEGORIES: 'Categorias',
                TAGS: 'Etiquetas',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>